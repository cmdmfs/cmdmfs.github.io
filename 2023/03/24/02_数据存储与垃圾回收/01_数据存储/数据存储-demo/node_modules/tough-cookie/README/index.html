<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.8.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.8.0" type="image/png" sizes="32x32"><meta name="description" content="RFC6265 Cookies and CookieJar for Node.js                       Synopsis       123456789101112var tough &#x3D; require(&amp;#x27;tough-cookie&amp;#x27;);var Cookie &#x3D; tough.Cookie;var cookie &#x3D; Cookie.parse(header);">
<meta property="og:type" content="article">
<meta property="og:title" content="汪汪队">
<meta property="og:url" content="http://example.com/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tough-cookie/README/index.html">
<meta property="og:site_name" content="汪汪队">
<meta property="og:description" content="RFC6265 Cookies and CookieJar for Node.js                       Synopsis       123456789101112var tough &#x3D; require(&amp;#x27;tough-cookie&amp;#x27;);var Cookie &#x3D; tough.Cookie;var cookie &#x3D; Cookie.parse(header);">
<meta property="og:locale">
<meta property="og:image" content="https://nodei.co/npm/tough-cookie.png?downloads=true&downloadRank=true&stars=true">
<meta property="og:image" content="https://travis-ci.org/salesforce/tough-cookie.svg?branch=master">
<meta property="article:published_time" content="2023-03-24T12:24:41.740Z">
<meta property="article:modified_time" content="1985-10-26T08:15:00.000Z">
<meta property="article:author" content="汪汪队">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://nodei.co/npm/tough-cookie.png?downloads=true&downloadRank=true&stars=true"><title>[ Untitled ] | 汪汪队</title><link ref="canonical" href="http://example.com/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tough-cookie/README/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.8.0"><link rel="stylesheet" href="css/custom.css"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Hello Stun</div><div class="header-banner-info__subtitle">An elegant theme for Hexo</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">[ Untitled ]</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">1985-10-26</span></span></div></header><div class="post-body"><p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6265" >RFC6265</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> Cookies and CookieJar for Node.js</p>
<p><a target="_blank" rel="noopener" href="https://nodei.co/npm/tough-cookie/"><img   src="https://nodei.co/npm/tough-cookie.png?downloads=true&downloadRank=true&stars=true" style=""  alt="npm package"></a></p>
<p><a target="_blank" rel="noopener" href="https://travis-ci.org/salesforce/tough-cookie"><img   src="https://travis-ci.org/salesforce/tough-cookie.svg?branch=master" style=""  alt="Build Status"></a></p>

        <h1 id="Synopsis"   >
          <a href="#Synopsis" class="heading-link"><i class="fas fa-link"></i></a><a href="#Synopsis" class="headerlink" title="Synopsis"></a>Synopsis</h1>
      <figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tough = <span class="built_in">require</span>(<span class="string">&#x27;tough-cookie&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Cookie</span> = tough.<span class="property">Cookie</span>;</span><br><span class="line"><span class="keyword">var</span> cookie = <span class="title class_">Cookie</span>.<span class="title function_">parse</span>(header);</span><br><span class="line">cookie.<span class="property">value</span> = <span class="string">&#x27;somethingdifferent&#x27;</span>;</span><br><span class="line">header = cookie.<span class="title function_">toString</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cookiejar = <span class="keyword">new</span> tough.<span class="title class_">CookieJar</span>();</span><br><span class="line">cookiejar.<span class="title function_">setCookie</span>(cookie, <span class="string">&#x27;http://currentdomain.example.com/path&#x27;</span>, cb);</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">cookiejar.<span class="title function_">getCookies</span>(<span class="string">&#x27;http://example.com/otherpath&#x27;</span>,<span class="keyword">function</span>(<span class="params">err,cookies</span>) &#123;</span><br><span class="line">  res.<span class="property">headers</span>[<span class="string">&#x27;cookie&#x27;</span>] = cookies.<span class="title function_">join</span>(<span class="string">&#x27;; &#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>


        <h1 id="Installation"   >
          <a href="#Installation" class="heading-link"><i class="fas fa-link"></i></a><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1>
      <p>It’s <em>so</em> easy!</p>
<p><code>npm install tough-cookie</code></p>
<p>Why the name?  NPM modules <code>cookie</code>, <code>cookies</code> and <code>cookiejar</code> were already taken.</p>

        <h2 id="Version-Support"   >
          <a href="#Version-Support" class="heading-link"><i class="fas fa-link"></i></a><a href="#Version-Support" class="headerlink" title="Version Support"></a>Version Support</h2>
      <p>Support for versions of node.js will follow that of the <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.npmjs.com/package/request" >request</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> module.</p>

        <h1 id="API"   >
          <a href="#API" class="heading-link"><i class="fas fa-link"></i></a><a href="#API" class="headerlink" title="API"></a>API</h1>
      
        <h2 id="tough"   >
          <a href="#tough" class="heading-link"><i class="fas fa-link"></i></a><a href="#tough" class="headerlink" title="tough"></a>tough</h2>
      <p>Functions on the module you get from <code>require(&#39;tough-cookie&#39;)</code>.  All can be used as pure functions and don’t need to be “bound”.</p>
<p><strong>Note</strong>: prior to 1.0.x, several of these functions took a <code>strict</code> parameter. This has since been removed from the API as it was no longer necessary.</p>

        <h3 id="parseDate-string"   >
          <a href="#parseDate-string" class="heading-link"><i class="fas fa-link"></i></a><a href="#parseDate-string" class="headerlink" title="parseDate(string)"></a><code>parseDate(string)</code></h3>
      <p>Parse a cookie date string into a <code>Date</code>.  Parses according to RFC6265 Section 5.1.1, not <code>Date.parse()</code>.</p>

        <h3 id="formatDate-date"   >
          <a href="#formatDate-date" class="heading-link"><i class="fas fa-link"></i></a><a href="#formatDate-date" class="headerlink" title="formatDate(date)"></a><code>formatDate(date)</code></h3>
      <p>Format a Date into a RFC1123 string (the RFC6265-recommended format).</p>

        <h3 id="canonicalDomain-str"   >
          <a href="#canonicalDomain-str" class="heading-link"><i class="fas fa-link"></i></a><a href="#canonicalDomain-str" class="headerlink" title="canonicalDomain(str)"></a><code>canonicalDomain(str)</code></h3>
      <p>Transforms a domain-name into a canonical domain-name.  The canonical domain-name is a trimmed, lowercased, stripped-of-leading-dot and optionally punycode-encoded domain-name (Section 5.1.2 of RFC6265).  For the most part, this function is idempotent (can be run again on its output without ill effects).</p>

        <h3 id="domainMatch-str-domStr-canonicalize-true"   >
          <a href="#domainMatch-str-domStr-canonicalize-true" class="heading-link"><i class="fas fa-link"></i></a><a href="#domainMatch-str-domStr-canonicalize-true" class="headerlink" title="domainMatch(str,domStr[,canonicalize=true])"></a><code>domainMatch(str,domStr[,canonicalize=true])</code></h3>
      <p>Answers “does this real domain match the domain in a cookie?”.  The <code>str</code> is the “current” domain-name and the <code>domStr</code> is the “cookie” domain-name.  Matches according to RFC6265 Section 5.1.3, but it helps to think of it as a “suffix match”.</p>
<p>The <code>canonicalize</code> parameter will run the other two parameters through <code>canonicalDomain</code> or not.</p>

        <h3 id="defaultPath-path"   >
          <a href="#defaultPath-path" class="heading-link"><i class="fas fa-link"></i></a><a href="#defaultPath-path" class="headerlink" title="defaultPath(path)"></a><code>defaultPath(path)</code></h3>
      <p>Given a current request&#x2F;response path, gives the Path apropriate for storing in a cookie.  This is basically the “directory” of a “file” in the path, but is specified by Section 5.1.4 of the RFC.</p>
<p>The <code>path</code> parameter MUST be <em>only</em> the pathname part of a URI (i.e. excludes the hostname, query, fragment, etc.).  This is the <code>.pathname</code> property of node’s <code>uri.parse()</code> output.</p>

        <h3 id="pathMatch-reqPath-cookiePath"   >
          <a href="#pathMatch-reqPath-cookiePath" class="heading-link"><i class="fas fa-link"></i></a><a href="#pathMatch-reqPath-cookiePath" class="headerlink" title="pathMatch(reqPath,cookiePath)"></a><code>pathMatch(reqPath,cookiePath)</code></h3>
      <p>Answers “does the request-path path-match a given cookie-path?” as per RFC6265 Section 5.1.4.  Returns a boolean.</p>
<p>This is essentially a prefix-match where <code>cookiePath</code> is a prefix of <code>reqPath</code>.</p>

        <h3 id="parse-cookieString-options"   >
          <a href="#parse-cookieString-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#parse-cookieString-options" class="headerlink" title="parse(cookieString[, options])"></a><code>parse(cookieString[, options])</code></h3>
      <p>alias for <code>Cookie.parse(cookieString[, options])</code></p>

        <h3 id="fromJSON-string"   >
          <a href="#fromJSON-string" class="heading-link"><i class="fas fa-link"></i></a><a href="#fromJSON-string" class="headerlink" title="fromJSON(string)"></a><code>fromJSON(string)</code></h3>
      <p>alias for <code>Cookie.fromJSON(string)</code></p>

        <h3 id="getPublicSuffix-hostname"   >
          <a href="#getPublicSuffix-hostname" class="heading-link"><i class="fas fa-link"></i></a><a href="#getPublicSuffix-hostname" class="headerlink" title="getPublicSuffix(hostname)"></a><code>getPublicSuffix(hostname)</code></h3>
      <p>Returns the public suffix of this hostname.  The public suffix is the shortest domain-name upon which a cookie can be set.  Returns <code>null</code> if the hostname cannot have cookies set for it.</p>
<p>For example: <code>www.example.com</code> and <code>www.subdomain.example.com</code> both have public suffix <code>example.com</code>.</p>
<p>For further information, see <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://publicsuffix.org/" >http://publicsuffix.org/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.  This module derives its list from that site. This call is currently a wrapper around <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/psl"><code>psl</code></a>‘s <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.npmjs.com/package/psl#pslgetdomain" >get() method</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</p>

        <h3 id="cookieCompare-a-b"   >
          <a href="#cookieCompare-a-b" class="heading-link"><i class="fas fa-link"></i></a><a href="#cookieCompare-a-b" class="headerlink" title="cookieCompare(a,b)"></a><code>cookieCompare(a,b)</code></h3>
      <p>For use with <code>.sort()</code>, sorts a list of cookies into the recommended order given in the RFC (Section 5.4 step 2). The sort algorithm is, in order of precedence:</p>
<ul>
<li>Longest <code>.path</code></li>
<li>oldest <code>.creation</code> (which has a 1ms precision, same as <code>Date</code>)</li>
<li>lowest <code>.creationIndex</code> (to get beyond the 1ms precision)</li>
</ul>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cookies = [ <span class="comment">/* unsorted array of Cookie objects */</span> ];</span><br><span class="line">cookies = cookies.<span class="title function_">sort</span>(cookieCompare);</span><br></pre></td></tr></table></div></figure>

<p><strong>Note</strong>: Since JavaScript’s <code>Date</code> is limited to a 1ms precision, cookies within the same milisecond are entirely possible. This is especially true when using the <code>now</code> option to <code>.setCookie()</code>. The <code>.creationIndex</code> property is a per-process global counter, assigned during construction with <code>new Cookie()</code>. This preserves the spirit of the RFC sorting: older cookies go first. This works great for <code>MemoryCookieStore</code>, since <code>Set-Cookie</code> headers are parsed in order, but may not be so great for distributed systems. Sophisticated <code>Store</code>s may wish to set this to some other <em>logical clock</em> such that if cookies A and B are created in the same millisecond, but cookie A is created before cookie B, then <code>A.creationIndex &lt; B.creationIndex</code>. If you want to alter the global counter, which you probably <em>shouldn’t</em> do, it’s stored in <code>Cookie.cookiesCreated</code>.</p>

        <h3 id="permuteDomain-domain"   >
          <a href="#permuteDomain-domain" class="heading-link"><i class="fas fa-link"></i></a><a href="#permuteDomain-domain" class="headerlink" title="permuteDomain(domain)"></a><code>permuteDomain(domain)</code></h3>
      <p>Generates a list of all possible domains that <code>domainMatch()</code> the parameter.  May be handy for implementing cookie stores.</p>

        <h3 id="permutePath-path"   >
          <a href="#permutePath-path" class="heading-link"><i class="fas fa-link"></i></a><a href="#permutePath-path" class="headerlink" title="permutePath(path)"></a><code>permutePath(path)</code></h3>
      <p>Generates a list of all possible paths that <code>pathMatch()</code> the parameter.  May be handy for implementing cookie stores.</p>

        <h2 id="Cookie"   >
          <a href="#Cookie" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2>
      <p>Exported via <code>tough.Cookie</code>.</p>

        <h3 id="Cookie-parse-cookieString-options"   >
          <a href="#Cookie-parse-cookieString-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie-parse-cookieString-options" class="headerlink" title="Cookie.parse(cookieString[, options])"></a><code>Cookie.parse(cookieString[, options])</code></h3>
      <p>Parses a single Cookie or Set-Cookie HTTP header into a <code>Cookie</code> object.  Returns <code>undefined</code> if the string can’t be parsed.</p>
<p>The options parameter is not required and currently has only one property:</p>
<ul>
<li><em>loose</em> - boolean - if <code>true</code> enable parsing of key-less cookies like <code>=abc</code> and <code>=</code>, which are not RFC-compliant.</li>
</ul>
<p>If options is not an object, it is ignored, which means you can use <code>Array#map</code> with it.</p>
<p>Here’s how to process the Set-Cookie header(s) on a node HTTP&#x2F;HTTPS response:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (res.<span class="property">headers</span>[<span class="string">&#x27;set-cookie&#x27;</span>] <span class="keyword">instanceof</span> <span class="title class_">Array</span>)</span><br><span class="line">  cookies = res.<span class="property">headers</span>[<span class="string">&#x27;set-cookie&#x27;</span>].<span class="title function_">map</span>(<span class="title class_">Cookie</span>.<span class="property">parse</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  cookies = [<span class="title class_">Cookie</span>.<span class="title function_">parse</span>(res.<span class="property">headers</span>[<span class="string">&#x27;set-cookie&#x27;</span>])];</span><br></pre></td></tr></table></div></figure>

<p><em>Note:</em> in version 2.3.3, tough-cookie limited the number of spaces before the <code>=</code> to 256 characters. This limitation has since been removed.<br>See <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/salesforce/tough-cookie/issues/92" >Issue 92</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="Properties"   >
          <a href="#Properties" class="heading-link"><i class="fas fa-link"></i></a><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3>
      <p>Cookie object properties:</p>
<ul>
<li><em>key</em> - string - the name or key of the cookie (default “”)</li>
<li><em>value</em> - string - the value of the cookie (default “”)</li>
<li><em>expires</em> - <code>Date</code> - if set, the <code>Expires=</code> attribute of the cookie (defaults to the string <code>&quot;Infinity&quot;</code>). See <code>setExpires()</code></li>
<li><em>maxAge</em> - seconds - if set, the <code>Max-Age=</code> attribute <em>in seconds</em> of the cookie.  May also be set to strings <code>&quot;Infinity&quot;</code> and <code>&quot;-Infinity&quot;</code> for non-expiry and immediate-expiry, respectively.  See <code>setMaxAge()</code></li>
<li><em>domain</em> - string - the <code>Domain=</code> attribute of the cookie</li>
<li><em>path</em> - string - the <code>Path=</code> of the cookie</li>
<li><em>secure</em> - boolean - the <code>Secure</code> cookie flag</li>
<li><em>httpOnly</em> - boolean - the <code>HttpOnly</code> cookie flag</li>
<li><em>sameSite</em> - string - the <code>SameSite</code> cookie attribute (from [RFC6265bis]); must be one of <code>none</code>, <code>lax</code>, or <code>strict</code></li>
<li><em>extensions</em> - <code>Array</code> - any unrecognized cookie attributes as strings (even if equal-signs inside)</li>
<li><em>creation</em> - <code>Date</code> - when this cookie was constructed</li>
<li><em>creationIndex</em> - number - set at construction, used to provide greater sort precision (please see <code>cookieCompare(a,b)</code> for a full explanation)</li>
</ul>
<p>After a cookie has been passed through <code>CookieJar.setCookie()</code> it will have the following additional attributes:</p>
<ul>
<li><em>hostOnly</em> - boolean - is this a host-only cookie (i.e. no Domain field was set, but was instead implied)</li>
<li><em>pathIsDefault</em> - boolean - if true, there was no Path field on the cookie and <code>defaultPath()</code> was used to derive one.</li>
<li><em>creation</em> - <code>Date</code> - <strong>modified</strong> from construction to when the cookie was added to the jar</li>
<li><em>lastAccessed</em> - <code>Date</code> - last time the cookie got accessed. Will affect cookie cleaning once implemented.  Using <code>cookiejar.getCookies(...)</code> will update this attribute.</li>
</ul>

        <h3 id="Cookie-properties"   >
          <a href="#Cookie-properties" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie-properties" class="headerlink" title="Cookie([{properties}])"></a><code>Cookie([&#123;properties&#125;])</code></h3>
      <p>Receives an options object that can contain any of the above Cookie properties, uses the default for unspecified properties.</p>

        <h3 id="toString-NaN"   >
          <a href="#toString-NaN" class="heading-link"><i class="fas fa-link"></i></a><a href="#toString-NaN" class="headerlink" title=".toString()"></a><code>.toString()</code></h3>
      <p>encode to a Set-Cookie header value.  The Expires cookie field is set using <code>formatDate()</code>, but is omitted entirely if <code>.expires</code> is <code>Infinity</code>.</p>

        <h3 id="cookieString"   >
          <a href="#cookieString" class="heading-link"><i class="fas fa-link"></i></a><a href="#cookieString" class="headerlink" title=".cookieString()"></a><code>.cookieString()</code></h3>
      <p>encode to a Cookie header value (i.e. the <code>.key</code> and <code>.value</code> properties joined with ‘&#x3D;’).</p>

        <h3 id="setExpires-String"   >
          <a href="#setExpires-String" class="heading-link"><i class="fas fa-link"></i></a><a href="#setExpires-String" class="headerlink" title=".setExpires(String)"></a><code>.setExpires(String)</code></h3>
      <p>sets the expiry based on a date-string passed through <code>parseDate()</code>.  If parseDate returns <code>null</code> (i.e. can’t parse this date string), <code>.expires</code> is set to <code>&quot;Infinity&quot;</code> (a string) is set.</p>

        <h3 id="setMaxAge-number"   >
          <a href="#setMaxAge-number" class="heading-link"><i class="fas fa-link"></i></a><a href="#setMaxAge-number" class="headerlink" title=".setMaxAge(number)"></a><code>.setMaxAge(number)</code></h3>
      <p>sets the maxAge in seconds.  Coerces <code>-Infinity</code> to <code>&quot;-Infinity&quot;</code> and <code>Infinity</code> to <code>&quot;Infinity&quot;</code> so it JSON serializes correctly.</p>

        <h3 id="expiryTime-now-Date-now"   >
          <a href="#expiryTime-now-Date-now" class="heading-link"><i class="fas fa-link"></i></a><a href="#expiryTime-now-Date-now" class="headerlink" title=".expiryTime([now=Date.now()])"></a><code>.expiryTime([now=Date.now()])</code></h3>
      
        <h3 id="expiryDate-now-Date-now"   >
          <a href="#expiryDate-now-Date-now" class="heading-link"><i class="fas fa-link"></i></a><a href="#expiryDate-now-Date-now" class="headerlink" title=".expiryDate([now=Date.now()])"></a><code>.expiryDate([now=Date.now()])</code></h3>
      <p>expiryTime() Computes the absolute unix-epoch milliseconds that this cookie expires. expiryDate() works similarly, except it returns a <code>Date</code> object.  Note that in both cases the <code>now</code> parameter should be milliseconds.</p>
<p>Max-Age takes precedence over Expires (as per the RFC). The <code>.creation</code> attribute – or, by default, the <code>now</code> parameter – is used to offset the <code>.maxAge</code> attribute.</p>
<p>If Expires (<code>.expires</code>) is set, that’s returned.</p>
<p>Otherwise, <code>expiryTime()</code> returns <code>Infinity</code> and <code>expiryDate()</code> returns a <code>Date</code> object for “Tue, 19 Jan 2038 03:14:07 GMT” (latest date that can be expressed by a 32-bit <code>time_t</code>; the common limit for most user-agents).</p>

        <h3 id="TTL-now-Date-now"   >
          <a href="#TTL-now-Date-now" class="heading-link"><i class="fas fa-link"></i></a><a href="#TTL-now-Date-now" class="headerlink" title=".TTL([now=Date.now()])"></a><code>.TTL([now=Date.now()])</code></h3>
      <p>compute the TTL relative to <code>now</code> (milliseconds).  The same precedence rules as for <code>expiryTime</code>&#x2F;<code>expiryDate</code> apply.</p>
<p>The “number” <code>Infinity</code> is returned for cookies without an explicit expiry and <code>0</code> is returned if the cookie is expired.  Otherwise a time-to-live in milliseconds is returned.</p>

        <h3 id="canonicalizedDomain"   >
          <a href="#canonicalizedDomain" class="heading-link"><i class="fas fa-link"></i></a><a href="#canonicalizedDomain" class="headerlink" title=".canonicalizedDomain()"></a><code>.canonicalizedDomain()</code></h3>
      
        <h3 id="cdomain"   >
          <a href="#cdomain" class="heading-link"><i class="fas fa-link"></i></a><a href="#cdomain" class="headerlink" title=".cdomain()"></a><code>.cdomain()</code></h3>
      <p>return the canonicalized <code>.domain</code> field.  This is lower-cased and punycode (RFC3490) encoded if the domain has any non-ASCII characters.</p>

        <h3 id="toJSON"   >
          <a href="#toJSON" class="heading-link"><i class="fas fa-link"></i></a><a href="#toJSON" class="headerlink" title=".toJSON()"></a><code>.toJSON()</code></h3>
      <p>For convenience in using <code>JSON.serialize(cookie)</code>. Returns a plain-old <code>Object</code> that can be JSON-serialized.</p>
<p>Any <code>Date</code> properties (i.e., <code>.expires</code>, <code>.creation</code>, and <code>.lastAccessed</code>) are exported in ISO format (<code>.toISOString()</code>).</p>
<p><strong>NOTE</strong>: Custom <code>Cookie</code> properties will be discarded. In tough-cookie 1.x, since there was no <code>.toJSON</code> method explicitly defined, all enumerable properties were captured. If you want a property to be serialized, add the property name to the <code>Cookie.serializableProperties</code> Array.</p>

        <h3 id="Cookie-fromJSON-strOrObj"   >
          <a href="#Cookie-fromJSON-strOrObj" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie-fromJSON-strOrObj" class="headerlink" title="Cookie.fromJSON(strOrObj)"></a><code>Cookie.fromJSON(strOrObj)</code></h3>
      <p>Does the reverse of <code>cookie.toJSON()</code>. If passed a string, will <code>JSON.parse()</code> that first.</p>
<p>Any <code>Date</code> properties (i.e., <code>.expires</code>, <code>.creation</code>, and <code>.lastAccessed</code>) are parsed via <code>Date.parse()</code>, not the tough-cookie <code>parseDate</code>, since it’s JavaScript&#x2F;JSON-y timestamps being handled at this layer.</p>
<p>Returns <code>null</code> upon JSON parsing error.</p>

        <h3 id="clone"   >
          <a href="#clone" class="heading-link"><i class="fas fa-link"></i></a><a href="#clone" class="headerlink" title=".clone()"></a><code>.clone()</code></h3>
      <p>Does a deep clone of this cookie, exactly implemented as <code>Cookie.fromJSON(cookie.toJSON())</code>.</p>

        <h3 id="validate"   >
          <a href="#validate" class="heading-link"><i class="fas fa-link"></i></a><a href="#validate" class="headerlink" title=".validate()"></a><code>.validate()</code></h3>
      <p>Status: <em>IN PROGRESS</em>. Works for a few things, but is by no means comprehensive.</p>
<p>validates cookie attributes for semantic correctness.  Useful for “lint” checking any Set-Cookie headers you generate.  For now, it returns a boolean, but eventually could return a reason string – you can future-proof with this construct:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (cookie.<span class="title function_">validate</span>() === <span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// it&#x27;s tasty</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// yuck!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



        <h2 id="CookieJar"   >
          <a href="#CookieJar" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar" class="headerlink" title="CookieJar"></a>CookieJar</h2>
      <p>Exported via <code>tough.CookieJar</code>.</p>

        <h3 id="CookieJar-store-options"   >
          <a href="#CookieJar-store-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar-store-options" class="headerlink" title="CookieJar([store],[options])"></a><code>CookieJar([store],[options])</code></h3>
      <p>Simply use <code>new CookieJar()</code>.  If you’d like to use a custom store, pass that to the constructor otherwise a <code>MemoryCookieStore</code> will be created and used.</p>
<p>The <code>options</code> object can be omitted and can have the following properties:</p>
<ul>
<li><em>rejectPublicSuffixes</em> - boolean - default <code>true</code> - reject cookies with domains like “com” and “co.uk”</li>
<li><em>looseMode</em> - boolean - default <code>false</code> - accept malformed cookies like <code>bar</code> and <code>=bar</code>, which have an implied empty name.</li>
<li><em>prefixSecurity</em> - string - default <code>silent</code> - set to <code>&#39;unsafe-disabled&#39;</code>, <code>&#39;silent&#39;</code>, or <code>&#39;strict&#39;</code>. See [Cookie Prefixes] below.</li>
<li><em>allowSpecialUseDomain</em> - boolean - default <code>false</code> - accepts special-use domain suffixes, such as <code>local</code>. Useful for testing purposes.<br>This is not in the standard, but is used sometimes on the web and is accepted by (most) browsers.</li>
</ul>
<p>Since eventually this module would like to support database&#x2F;remote&#x2F;etc. CookieJars, continuation passing style is used for CookieJar methods.</p>

        <h3 id="setCookie-cookieOrString-currentUrl-options-cb-err-cookie"   >
          <a href="#setCookie-cookieOrString-currentUrl-options-cb-err-cookie" class="heading-link"><i class="fas fa-link"></i></a><a href="#setCookie-cookieOrString-currentUrl-options-cb-err-cookie" class="headerlink" title=".setCookie(cookieOrString, currentUrl, [{options},] cb(err,cookie))"></a><code>.setCookie(cookieOrString, currentUrl, [&#123;options&#125;,] cb(err,cookie))</code></h3>
      <p>Attempt to set the cookie in the cookie jar.  If the operation fails, an error will be given to the callback <code>cb</code>, otherwise the cookie is passed through.  The cookie will have updated <code>.creation</code>, <code>.lastAccessed</code> and <code>.hostOnly</code> properties.</p>
<p>The <code>options</code> object can be omitted and can have the following properties:</p>
<ul>
<li><em>http</em> - boolean - default <code>true</code> - indicates if this is an HTTP or non-HTTP API.  Affects HttpOnly cookies.</li>
<li><em>secure</em> - boolean - autodetect from url - indicates if this is a “Secure” API.  If the currentUrl starts with <code>https:</code> or <code>wss:</code> then this is defaulted to <code>true</code>, otherwise <code>false</code>.</li>
<li><em>now</em> - Date - default <code>new Date()</code> - what to use for the creation&#x2F;access time of cookies</li>
<li><em>ignoreError</em> - boolean - default <code>false</code> - silently ignore things like parse errors and invalid domains.  <code>Store</code> errors aren’t ignored by this option.</li>
<li><em>sameSiteContext</em> - string - default unset - set to <code>&#39;none&#39;</code>, <code>&#39;lax&#39;</code>, or <code>&#39;strict&#39;</code> See [SameSite Cookies] below.</li>
</ul>
<p>As per the RFC, the <code>.hostOnly</code> property is set if there was no “Domain&#x3D;” parameter in the cookie string (or <code>.domain</code> was null on the Cookie object).  The <code>.domain</code> property is set to the fully-qualified hostname of <code>currentUrl</code> in this case.  Matching this cookie requires an exact hostname match (not a <code>domainMatch</code> as per usual).</p>

        <h3 id="setCookieSync-cookieOrString-currentUrl-options"   >
          <a href="#setCookieSync-cookieOrString-currentUrl-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#setCookieSync-cookieOrString-currentUrl-options" class="headerlink" title=".setCookieSync(cookieOrString, currentUrl, [{options}])"></a><code>.setCookieSync(cookieOrString, currentUrl, [&#123;options&#125;])</code></h3>
      <p>Synchronous version of <code>setCookie</code>; only works with synchronous stores (e.g. the default <code>MemoryCookieStore</code>).</p>

        <h3 id="getCookies-currentUrl-options-cb-err-cookies"   >
          <a href="#getCookies-currentUrl-options-cb-err-cookies" class="heading-link"><i class="fas fa-link"></i></a><a href="#getCookies-currentUrl-options-cb-err-cookies" class="headerlink" title=".getCookies(currentUrl, [{options},] cb(err,cookies))"></a><code>.getCookies(currentUrl, [&#123;options&#125;,] cb(err,cookies))</code></h3>
      <p>Retrieve the list of cookies that can be sent in a Cookie header for the current url.</p>
<p>If an error is encountered, that’s passed as <code>err</code> to the callback, otherwise an <code>Array</code> of <code>Cookie</code> objects is passed.  The array is sorted with <code>cookieCompare()</code> unless the <code>&#123;sort:false&#125;</code> option is given.</p>
<p>The <code>options</code> object can be omitted and can have the following properties:</p>
<ul>
<li><em>http</em> - boolean - default <code>true</code> - indicates if this is an HTTP or non-HTTP API.  Affects HttpOnly cookies.</li>
<li><em>secure</em> - boolean - autodetect from url - indicates if this is a “Secure” API.  If the currentUrl starts with <code>https:</code> or <code>wss:</code> then this is defaulted to <code>true</code>, otherwise <code>false</code>.</li>
<li><em>now</em> - Date - default <code>new Date()</code> - what to use for the creation&#x2F;access time of cookies</li>
<li><em>expire</em> - boolean - default <code>true</code> - perform expiry-time checking of cookies and asynchronously remove expired cookies from the store.  Using <code>false</code> will return expired cookies and <strong>not</strong> remove them from the store (which is useful for replaying Set-Cookie headers, potentially).</li>
<li><em>allPaths</em> - boolean - default <code>false</code> - if <code>true</code>, do not scope cookies by path. The default uses RFC-compliant path scoping. <strong>Note</strong>: may not be supported by the underlying store (the default <code>MemoryCookieStore</code> supports it).</li>
<li><em>sameSiteContext</em> - string - default unset - Set this to <code>&#39;none&#39;</code>, <code>&#39;lax&#39;</code> or <code>&#39;strict&#39;</code> to enforce SameSite cookies upon retrival. See [SameSite Cookies] below.</li>
</ul>
<p>The <code>.lastAccessed</code> property of the returned cookies will have been updated.</p>

        <h3 id="getCookiesSync-currentUrl-options"   >
          <a href="#getCookiesSync-currentUrl-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#getCookiesSync-currentUrl-options" class="headerlink" title=".getCookiesSync(currentUrl, [{options}])"></a><code>.getCookiesSync(currentUrl, [&#123;options&#125;])</code></h3>
      <p>Synchronous version of <code>getCookies</code>; only works with synchronous stores (e.g. the default <code>MemoryCookieStore</code>).</p>

        <h3 id="getCookieString"   >
          <a href="#getCookieString" class="heading-link"><i class="fas fa-link"></i></a><a href="#getCookieString" class="headerlink" title=".getCookieString(...)"></a><code>.getCookieString(...)</code></h3>
      <p>Accepts the same options as <code>.getCookies()</code> but passes a string suitable for a Cookie header rather than an array to the callback.  Simply maps the <code>Cookie</code> array via <code>.cookieString()</code>.</p>

        <h3 id="getCookieStringSync"   >
          <a href="#getCookieStringSync" class="heading-link"><i class="fas fa-link"></i></a><a href="#getCookieStringSync" class="headerlink" title=".getCookieStringSync(...)"></a><code>.getCookieStringSync(...)</code></h3>
      <p>Synchronous version of <code>getCookieString</code>; only works with synchronous stores (e.g. the default <code>MemoryCookieStore</code>).</p>

        <h3 id="getSetCookieStrings"   >
          <a href="#getSetCookieStrings" class="heading-link"><i class="fas fa-link"></i></a><a href="#getSetCookieStrings" class="headerlink" title=".getSetCookieStrings(...)"></a><code>.getSetCookieStrings(...)</code></h3>
      <p>Returns an array of strings suitable for <strong>Set-Cookie</strong> headers. Accepts the same options as <code>.getCookies()</code>.  Simply maps the cookie array via <code>.toString()</code>.</p>

        <h3 id="getSetCookieStringsSync"   >
          <a href="#getSetCookieStringsSync" class="heading-link"><i class="fas fa-link"></i></a><a href="#getSetCookieStringsSync" class="headerlink" title=".getSetCookieStringsSync(...)"></a><code>.getSetCookieStringsSync(...)</code></h3>
      <p>Synchronous version of <code>getSetCookieStrings</code>; only works with synchronous stores (e.g. the default <code>MemoryCookieStore</code>).</p>

        <h3 id="serialize-cb-err-serializedObject"   >
          <a href="#serialize-cb-err-serializedObject" class="heading-link"><i class="fas fa-link"></i></a><a href="#serialize-cb-err-serializedObject" class="headerlink" title=".serialize(cb(err,serializedObject))"></a><code>.serialize(cb(err,serializedObject))</code></h3>
      <p>Serialize the Jar if the underlying store supports <code>.getAllCookies</code>.</p>
<p><strong>NOTE</strong>: Custom <code>Cookie</code> properties will be discarded. If you want a property to be serialized, add the property name to the <code>Cookie.serializableProperties</code> Array.</p>
<p>See [Serialization Format].</p>

        <h3 id="serializeSync"   >
          <a href="#serializeSync" class="heading-link"><i class="fas fa-link"></i></a><a href="#serializeSync" class="headerlink" title=".serializeSync()"></a><code>.serializeSync()</code></h3>
      <p>Sync version of .serialize</p>

        <h3 id="toJSON-1"   >
          <a href="#toJSON-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#toJSON-1" class="headerlink" title=".toJSON()"></a><code>.toJSON()</code></h3>
      <p>Alias of .serializeSync() for the convenience of <code>JSON.stringify(cookiejar)</code>.</p>

        <h3 id="CookieJar-deserialize-serialized-store-cb-err-object"   >
          <a href="#CookieJar-deserialize-serialized-store-cb-err-object" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar-deserialize-serialized-store-cb-err-object" class="headerlink" title="CookieJar.deserialize(serialized, [store], cb(err,object))"></a><code>CookieJar.deserialize(serialized, [store], cb(err,object))</code></h3>
      <p>A new Jar is created and the serialized Cookies are added to the underlying store. Each <code>Cookie</code> is added via <code>store.putCookie</code> in the order in which they appear in the serialization.</p>
<p>The <code>store</code> argument is optional, but should be an instance of <code>Store</code>. By default, a new instance of <code>MemoryCookieStore</code> is created.</p>
<p>As a convenience, if <code>serialized</code> is a string, it is passed through <code>JSON.parse</code> first. If that throws an error, this is passed to the callback.</p>

        <h3 id="CookieJar-deserializeSync-serialized-store"   >
          <a href="#CookieJar-deserializeSync-serialized-store" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar-deserializeSync-serialized-store" class="headerlink" title="CookieJar.deserializeSync(serialized, [store])"></a><code>CookieJar.deserializeSync(serialized, [store])</code></h3>
      <p>Sync version of <code>.deserialize</code>.  <em>Note</em> that the <code>store</code> must be synchronous for this to work.</p>

        <h3 id="CookieJar-fromJSON-string"   >
          <a href="#CookieJar-fromJSON-string" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar-fromJSON-string" class="headerlink" title="CookieJar.fromJSON(string)"></a><code>CookieJar.fromJSON(string)</code></h3>
      <p>Alias of <code>.deserializeSync</code> to provide consistency with <code>Cookie.fromJSON()</code>.</p>

        <h3 id="clone-store-cb-err-newJar"   >
          <a href="#clone-store-cb-err-newJar" class="heading-link"><i class="fas fa-link"></i></a><a href="#clone-store-cb-err-newJar" class="headerlink" title=".clone([store,]cb(err,newJar))"></a><code>.clone([store,]cb(err,newJar))</code></h3>
      <p>Produces a deep clone of this jar. Modifications to the original won’t affect the clone, and vice versa.</p>
<p>The <code>store</code> argument is optional, but should be an instance of <code>Store</code>. By default, a new instance of <code>MemoryCookieStore</code> is created. Transferring between store types is supported so long as the source implements <code>.getAllCookies()</code> and the destination implements <code>.putCookie()</code>.</p>

        <h3 id="cloneSync-store"   >
          <a href="#cloneSync-store" class="heading-link"><i class="fas fa-link"></i></a><a href="#cloneSync-store" class="headerlink" title=".cloneSync([store])"></a><code>.cloneSync([store])</code></h3>
      <p>Synchronous version of <code>.clone</code>, returning a new <code>CookieJar</code> instance.</p>
<p>The <code>store</code> argument is optional, but must be a <em>synchronous</em> <code>Store</code> instance if specified. If not passed, a new instance of <code>MemoryCookieStore</code> is used.</p>
<p>The <em>source</em> and <em>destination</em> must both be synchronous <code>Store</code>s. If one or both stores are asynchronous, use <code>.clone</code> instead. Recall that <code>MemoryCookieStore</code> supports both synchronous and asynchronous API calls.</p>

        <h3 id="removeAllCookies-cb-err"   >
          <a href="#removeAllCookies-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#removeAllCookies-cb-err" class="headerlink" title=".removeAllCookies(cb(err))"></a><code>.removeAllCookies(cb(err))</code></h3>
      <p>Removes all cookies from the jar.</p>
<p>This is a new backwards-compatible feature of <code>tough-cookie</code> version 2.5, so not all Stores will implement it efficiently. For Stores that do not implement <code>removeAllCookies</code>, the fallback is to call <code>removeCookie</code> after <code>getAllCookies</code>. If <code>getAllCookies</code> fails or isn’t implemented in the Store, that error is returned. If one or more of the <code>removeCookie</code> calls fail, only the first error is returned.</p>

        <h3 id="removeAllCookiesSync"   >
          <a href="#removeAllCookiesSync" class="heading-link"><i class="fas fa-link"></i></a><a href="#removeAllCookiesSync" class="headerlink" title=".removeAllCookiesSync()"></a><code>.removeAllCookiesSync()</code></h3>
      <p>Sync version of <code>.removeAllCookies()</code></p>

        <h2 id="Store"   >
          <a href="#Store" class="heading-link"><i class="fas fa-link"></i></a><a href="#Store" class="headerlink" title="Store"></a>Store</h2>
      <p>Base class for CookieJar stores. Available as <code>tough.Store</code>.</p>

        <h2 id="Store-API"   >
          <a href="#Store-API" class="heading-link"><i class="fas fa-link"></i></a><a href="#Store-API" class="headerlink" title="Store API"></a>Store API</h2>
      <p>The storage model for each <code>CookieJar</code> instance can be replaced with a custom implementation.  The default is <code>MemoryCookieStore</code> which can be found in the <code>lib/memstore.js</code> file.  The API uses continuation-passing-style to allow for asynchronous stores.</p>
<p>Stores should inherit from the base <code>Store</code> class, which is available as <code>require(&#39;tough-cookie&#39;).Store</code>.</p>
<p>Stores are asynchronous by default, but if <code>store.synchronous</code> is set to <code>true</code>, then the <code>*Sync</code> methods on the of the containing <code>CookieJar</code> can be used (however, the continuation-passing style</p>
<p>All <code>domain</code> parameters will have been normalized before calling.</p>
<p>The Cookie store must have all of the following methods.</p>

        <h3 id="store-findCookie-domain-path-key-cb-err-cookie"   >
          <a href="#store-findCookie-domain-path-key-cb-err-cookie" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-findCookie-domain-path-key-cb-err-cookie" class="headerlink" title="store.findCookie(domain, path, key, cb(err,cookie))"></a><code>store.findCookie(domain, path, key, cb(err,cookie))</code></h3>
      <p>Retrieve a cookie with the given domain, path and key (a.k.a. name).  The RFC maintains that exactly one of these cookies should exist in a store.  If the store is using versioning, this means that the latest&#x2F;newest such cookie should be returned.</p>
<p>Callback takes an error and the resulting <code>Cookie</code> object.  If no cookie is found then <code>null</code> MUST be passed instead (i.e. not an error).</p>

        <h3 id="store-findCookies-domain-path-cb-err-cookies"   >
          <a href="#store-findCookies-domain-path-cb-err-cookies" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-findCookies-domain-path-cb-err-cookies" class="headerlink" title="store.findCookies(domain, path, cb(err,cookies))"></a><code>store.findCookies(domain, path, cb(err,cookies))</code></h3>
      <p>Locates cookies matching the given domain and path.  This is most often called in the context of <code>cookiejar.getCookies()</code> above.</p>
<p>If no cookies are found, the callback MUST be passed an empty array.</p>
<p>The resulting list will be checked for applicability to the current request according to the RFC (domain-match, path-match, http-only-flag, secure-flag, expiry, etc.), so it’s OK to use an optimistic search algorithm when implementing this method.  However, the search algorithm used SHOULD try to find cookies that <code>domainMatch()</code> the domain and <code>pathMatch()</code> the path in order to limit the amount of checking that needs to be done.</p>
<p>As of version 0.9.12, the <code>allPaths</code> option to <code>cookiejar.getCookies()</code> above will cause the path here to be <code>null</code>.  If the path is <code>null</code>, path-matching MUST NOT be performed (i.e. domain-matching only).</p>

        <h3 id="store-putCookie-cookie-cb-err"   >
          <a href="#store-putCookie-cookie-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-putCookie-cookie-cb-err" class="headerlink" title="store.putCookie(cookie, cb(err))"></a><code>store.putCookie(cookie, cb(err))</code></h3>
      <p>Adds a new cookie to the store.  The implementation SHOULD replace any existing cookie with the same <code>.domain</code>, <code>.path</code>, and <code>.key</code> properties – depending on the nature of the implementation, it’s possible that between the call to <code>fetchCookie</code> and <code>putCookie</code> that a duplicate <code>putCookie</code> can occur.</p>
<p>The <code>cookie</code> object MUST NOT be modified; the caller will have already updated the <code>.creation</code> and <code>.lastAccessed</code> properties.</p>
<p>Pass an error if the cookie cannot be stored.</p>

        <h3 id="store-updateCookie-oldCookie-newCookie-cb-err"   >
          <a href="#store-updateCookie-oldCookie-newCookie-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-updateCookie-oldCookie-newCookie-cb-err" class="headerlink" title="store.updateCookie(oldCookie, newCookie, cb(err))"></a><code>store.updateCookie(oldCookie, newCookie, cb(err))</code></h3>
      <p>Update an existing cookie.  The implementation MUST update the <code>.value</code> for a cookie with the same <code>domain</code>, <code>.path</code> and <code>.key</code>.  The implementation SHOULD check that the old value in the store is equivalent to <code>oldCookie</code> - how the conflict is resolved is up to the store.</p>
<p>The <code>.lastAccessed</code> property will always be different between the two objects (to the precision possible via JavaScript’s clock).  Both <code>.creation</code> and <code>.creationIndex</code> are guaranteed to be the same.  Stores MAY ignore or defer the <code>.lastAccessed</code> change at the cost of affecting how cookies are selected for automatic deletion (e.g., least-recently-used, which is up to the store to implement).</p>
<p>Stores may wish to optimize changing the <code>.value</code> of the cookie in the store versus storing a new cookie.  If the implementation doesn’t define this method a stub that calls <code>putCookie(newCookie,cb)</code> will be added to the store object.</p>
<p>The <code>newCookie</code> and <code>oldCookie</code> objects MUST NOT be modified.</p>
<p>Pass an error if the newCookie cannot be stored.</p>

        <h3 id="store-removeCookie-domain-path-key-cb-err"   >
          <a href="#store-removeCookie-domain-path-key-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-removeCookie-domain-path-key-cb-err" class="headerlink" title="store.removeCookie(domain, path, key, cb(err))"></a><code>store.removeCookie(domain, path, key, cb(err))</code></h3>
      <p>Remove a cookie from the store (see notes on <code>findCookie</code> about the uniqueness constraint).</p>
<p>The implementation MUST NOT pass an error if the cookie doesn’t exist; only pass an error due to the failure to remove an existing cookie.</p>

        <h3 id="store-removeCookies-domain-path-cb-err"   >
          <a href="#store-removeCookies-domain-path-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-removeCookies-domain-path-cb-err" class="headerlink" title="store.removeCookies(domain, path, cb(err))"></a><code>store.removeCookies(domain, path, cb(err))</code></h3>
      <p>Removes matching cookies from the store.  The <code>path</code> parameter is optional, and if missing means all paths in a domain should be removed.</p>
<p>Pass an error ONLY if removing any existing cookies failed.</p>

        <h3 id="store-removeAllCookies-cb-err"   >
          <a href="#store-removeAllCookies-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-removeAllCookies-cb-err" class="headerlink" title="store.removeAllCookies(cb(err))"></a><code>store.removeAllCookies(cb(err))</code></h3>
      <p><em>Optional</em>. Removes all cookies from the store.</p>
<p>Pass an error if one or more cookies can’t be removed.</p>
<p><strong>Note</strong>: New method as of <code>tough-cookie</code> version 2.5, so not all Stores will implement this, plus some stores may choose not to implement this.</p>

        <h3 id="store-getAllCookies-cb-err-cookies"   >
          <a href="#store-getAllCookies-cb-err-cookies" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-getAllCookies-cb-err-cookies" class="headerlink" title="store.getAllCookies(cb(err, cookies))"></a><code>store.getAllCookies(cb(err, cookies))</code></h3>
      <p><em>Optional</em>. Produces an <code>Array</code> of all cookies during <code>jar.serialize()</code>. The items in the array can be true <code>Cookie</code> objects or generic <code>Object</code>s with the [Serialization Format] data structure.</p>
<p>Cookies SHOULD be returned in creation order to preserve sorting via <code>compareCookies()</code>. For reference, <code>MemoryCookieStore</code> will sort by <code>.creationIndex</code> since it uses true <code>Cookie</code> objects internally. If you don’t return the cookies in creation order, they’ll still be sorted by creation time, but this only has a precision of 1ms.  See <code>compareCookies</code> for more detail.</p>
<p>Pass an error if retrieval fails.</p>
<p><strong>Note</strong>: not all Stores can implement this due to technical limitations, so it is optional.</p>

        <h2 id="MemoryCookieStore"   >
          <a href="#MemoryCookieStore" class="heading-link"><i class="fas fa-link"></i></a><a href="#MemoryCookieStore" class="headerlink" title="MemoryCookieStore"></a>MemoryCookieStore</h2>
      <p>Inherits from <code>Store</code>.</p>
<p>A just-in-memory CookieJar synchronous store implementation, used by default. Despite being a synchronous implementation, it’s usable with both the synchronous and asynchronous forms of the <code>CookieJar</code> API. Supports serialization, <code>getAllCookies</code>, and <code>removeAllCookies</code>.</p>

        <h2 id="Community-Cookie-Stores"   >
          <a href="#Community-Cookie-Stores" class="heading-link"><i class="fas fa-link"></i></a><a href="#Community-Cookie-Stores" class="headerlink" title="Community Cookie Stores"></a>Community Cookie Stores</h2>
      <p>These are some Store implementations authored and maintained by the community. They aren’t official and we don’t vouch for them but you may be interested to have a look:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/JSBizon/db-cookie-store"><code>db-cookie-store</code></a>: SQL including SQLite-based databases</li>
<li><a target="_blank" rel="noopener" href="https://github.com/JSBizon/file-cookie-store"><code>file-cookie-store</code></a>: Netscape cookie file format on disk</li>
<li><a target="_blank" rel="noopener" href="https://github.com/benkroeger/redis-cookie-store"><code>redis-cookie-store</code></a>: Redis</li>
<li><a target="_blank" rel="noopener" href="https://github.com/mitsuru/tough-cookie-filestore"><code>tough-cookie-filestore</code></a>: JSON on disk</li>
<li><a target="_blank" rel="noopener" href="https://github.com/exponentjs/tough-cookie-web-storage-store"><code>tough-cookie-web-storage-store</code></a>: DOM localStorage and sessionStorage</li>
</ul>

        <h1 id="Serialization-Format"   >
          <a href="#Serialization-Format" class="heading-link"><i class="fas fa-link"></i></a><a href="#Serialization-Format" class="headerlink" title="Serialization Format"></a>Serialization Format</h1>
      <p><strong>NOTE</strong>: if you want to have custom <code>Cookie</code> properties serialized, add the property name to <code>Cookie.serializableProperties</code>.</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// The version of tough-cookie that serialized this jar.</span></span><br><span class="line">  <span class="attr">version</span>: <span class="string">&#x27;tough-cookie@1.x.y&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// add the store type, to make humans happy:</span></span><br><span class="line">  <span class="attr">storeType</span>: <span class="string">&#x27;MemoryCookieStore&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// CookieJar configuration:</span></span><br><span class="line">  <span class="attr">rejectPublicSuffixes</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// ... future items go here</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Gets filled from jar.store.getAllCookies():</span></span><br><span class="line">  <span class="attr">cookies</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">key</span>: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      <span class="comment">/* other Cookie.serializableProperties go here */</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h1 id="RFC6265bis"   >
          <a href="#RFC6265bis" class="heading-link"><i class="fas fa-link"></i></a><a href="#RFC6265bis" class="headerlink" title="RFC6265bis"></a>RFC6265bis</h1>
      <p>Support for RFC6265bis revision 02 is being developed. Since this is a bit of an omnibus revision to the RFC6252, support is broken up into the functional areas.</p>

        <h2 id="Leave-Secure-Cookies-Alone"   >
          <a href="#Leave-Secure-Cookies-Alone" class="heading-link"><i class="fas fa-link"></i></a><a href="#Leave-Secure-Cookies-Alone" class="headerlink" title="Leave Secure Cookies Alone"></a>Leave Secure Cookies Alone</h2>
      <p>Not yet supported.</p>
<p>This change makes it so that if a cookie is sent from the server to the client with a <code>Secure</code> attribute, the channel must also be secure or the cookie is ignored.</p>

        <h2 id="SameSite-Cookies"   >
          <a href="#SameSite-Cookies" class="heading-link"><i class="fas fa-link"></i></a><a href="#SameSite-Cookies" class="headerlink" title="SameSite Cookies"></a>SameSite Cookies</h2>
      <p>Supported.</p>
<p>This change makes it possible for servers, and supporting clients, to mitigate certain types of CSRF attacks by disallowing <code>SameSite</code> cookies from being sent cross-origin.</p>
<p>On the Cookie object itself, you can get&#x2F;set the <code>.sameSite</code> attribute, which will be serialized into the <code>SameSite=</code> cookie attribute. When unset or <code>undefined</code>, no <code>SameSite=</code> attribute will be serialized. The valid values of this attribute are <code>&#39;none&#39;</code>, <code>&#39;lax&#39;</code>, or <code>&#39;strict&#39;</code>. Other values will be serialized as-is.</p>
<p>When parsing cookies with a <code>SameSite</code> cookie attribute, values other than <code>&#39;lax&#39;</code> or <code>&#39;strict&#39;</code> are parsed as <code>&#39;none&#39;</code>. For example, <code>SomeCookie=SomeValue; SameSite=garbage</code> will parse so that <code>cookie.sameSite === &#39;none&#39;</code>.</p>
<p>In order to support SameSite cookies, you must provide a <code>sameSiteContext</code> option to <em>both</em> <code>setCookie</code> and <code>getCookies</code>. Valid values for this option are just like for the Cookie object, but have particular meanings:</p>
<ol>
<li><code>&#39;strict&#39;</code> mode - If the request is on the same “site for cookies” (see the RFC draft for what this means), pass this option to add a layer of defense against CSRF.</li>
<li><code>&#39;lax&#39;</code> mode - If the request is from another site, <em>but</em> is directly because of navigation by the user, e.g., <code>&lt;link type=prefetch&gt;</code> or <code>&lt;a href=&quot;...&quot;&gt;</code>, pass <code>sameSiteContext: &#39;lax&#39;</code>.</li>
<li><code>&#39;none&#39;</code> - Otherwise, pass <code>sameSiteContext: &#39;none&#39;</code> (this indicates a cross-origin request).</li>
<li>unset&#x2F;<code>undefined</code> - SameSite <strong>will not</strong> be enforced! This can be a valid use-case for when CSRF isn’t in the threat model of the system being built.</li>
</ol>
<p>It is highly recommended that you read RFC 6265bis for fine details on SameSite cookies. In particular <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-02#section-8.8" >Section 8.8</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> discusses security considerations and defense in depth.</p>

        <h2 id="Cookie-Prefixes"   >
          <a href="#Cookie-Prefixes" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie-Prefixes" class="headerlink" title="Cookie Prefixes"></a>Cookie Prefixes</h2>
      <p>Supported.</p>
<p>Cookie prefixes are a way to indicate that a given cookie was set with a set of attributes simply by inspecting the first few characters of the cookie’s name.</p>
<p>Cookie prefixes are defined in <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-4.1.3" >Section 4.1.3 of 6265bis</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>. Two prefixes are defined:</p>
<ol>
<li><code>&quot;__Secure-&quot; Prefix</code>: If a cookie’s name begins with a case-sensitive match for the string “__Secure-“, then the cookie will have been set with a “Secure” attribute.</li>
<li><code>&quot;__Host-&quot; Prefix</code>: If a cookie’s name begins with a case-sensitive match for the string “__Host-“, then the cookie will have been set with a “Secure” attribute, a “Path” attribute with a value of “&#x2F;“, and no “Domain” attribute.</li>
</ol>
<p>If <code>prefixSecurity</code> is enabled for <code>CookieJar</code>, then cookies that match the prefixes defined above but do not obey the attribute restrictions will not be added.</p>
<p>You can define this functionality by passing in <code>prefixSecurity</code> option to <code>CookieJar</code>. It can be one of 3 values:</p>
<ol>
<li><code>silent</code>: Enable cookie prefix checking but silently fail to add the cookie if conditions not met. Default.</li>
<li><code>strict</code>: Enable cookie prefix checking and error out if conditions not met.</li>
<li><code>unsafe-disabled</code>: Disable cookie prefix checking.</li>
</ol>
<p>Note that if <code>ignoreError</code> is passed in as <code>true</code> then the error will be silent regardless of <code>prefixSecurity</code> option (assuming it’s enabled).</p>

        <h1 id="Copyright-and-License"   >
          <a href="#Copyright-and-License" class="heading-link"><i class="fas fa-link"></i></a><a href="#Copyright-and-License" class="headerlink" title="Copyright and License"></a>Copyright and License</h1>
      <p>BSD-3-Clause:</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Copyright (c) 2015, Salesforce.com, Inc.</span><br><span class="line">All rights reserved.</span><br><span class="line"></span><br><span class="line">Redistribution and use in source and binary forms, with or without</span><br><span class="line">modification, are permitted provided that the following conditions are met:</span><br><span class="line"></span><br><span class="line">1. Redistributions of source code must retain the above copyright notice,</span><br><span class="line">this list of conditions and the following disclaimer.</span><br><span class="line"></span><br><span class="line">2. Redistributions in binary form must reproduce the above copyright notice,</span><br><span class="line">this list of conditions and the following disclaimer in the documentation</span><br><span class="line">and/or other materials provided with the distribution.</span><br><span class="line"></span><br><span class="line">3. Neither the name of Salesforce.com nor the names of its contributors may</span><br><span class="line">be used to endorse or promote products derived from this software without</span><br><span class="line">specific prior written permission.</span><br><span class="line"></span><br><span class="line">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span><br><span class="line">AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span><br><span class="line">IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span><br><span class="line">ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE</span><br><span class="line">LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span><br><span class="line">CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span><br><span class="line">SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span><br><span class="line">INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span><br><span class="line">CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span><br><span class="line">ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span><br><span class="line">POSSIBILITY OF SUCH DAMAGE.</span><br></pre></td></tr></table></div></figure>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ END ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">Author: </span><span class="copyright-author__value"><a href="http://example.com">汪汪队</a></span></div><div class="copyright-link"><span class="copyright-link__name">Link: </span><span class="copyright-link__value"><a href="http://example.com/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tough-cookie/README/">http://example.com/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tough-cookie/README/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">Copyright: </span><span class="copyright-notice__value">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> unless stating additionally</span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tr46/LICENSE/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">[ Untitled ]</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/symbol-tree/README/"><span class="paginator-prev__text">[ Untitled ]</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Catalog</span><span class="sidebar-nav-ov">Overview</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Synopsis"><span class="toc-number">1.</span> <span class="toc-text">
          Synopsis</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Installation"><span class="toc-number">2.</span> <span class="toc-text">
          Installation</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Version-Support"><span class="toc-number">2.1.</span> <span class="toc-text">
          Version Support</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#API"><span class="toc-number">3.</span> <span class="toc-text">
          API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tough"><span class="toc-number">3.1.</span> <span class="toc-text">
          tough</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#parseDate-string"><span class="toc-number">3.1.1.</span> <span class="toc-text">
          parseDate(string)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#formatDate-date"><span class="toc-number">3.1.2.</span> <span class="toc-text">
          formatDate(date)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#canonicalDomain-str"><span class="toc-number">3.1.3.</span> <span class="toc-text">
          canonicalDomain(str)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#domainMatch-str-domStr-canonicalize-true"><span class="toc-number">3.1.4.</span> <span class="toc-text">
          domainMatch(str,domStr[,canonicalize&#x3D;true])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defaultPath-path"><span class="toc-number">3.1.5.</span> <span class="toc-text">
          defaultPath(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pathMatch-reqPath-cookiePath"><span class="toc-number">3.1.6.</span> <span class="toc-text">
          pathMatch(reqPath,cookiePath)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parse-cookieString-options"><span class="toc-number">3.1.7.</span> <span class="toc-text">
          parse(cookieString[, options])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fromJSON-string"><span class="toc-number">3.1.8.</span> <span class="toc-text">
          fromJSON(string)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getPublicSuffix-hostname"><span class="toc-number">3.1.9.</span> <span class="toc-text">
          getPublicSuffix(hostname)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cookieCompare-a-b"><span class="toc-number">3.1.10.</span> <span class="toc-text">
          cookieCompare(a,b)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#permuteDomain-domain"><span class="toc-number">3.1.11.</span> <span class="toc-text">
          permuteDomain(domain)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#permutePath-path"><span class="toc-number">3.1.12.</span> <span class="toc-text">
          permutePath(path)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cookie"><span class="toc-number">3.2.</span> <span class="toc-text">
          Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie-parse-cookieString-options"><span class="toc-number">3.2.1.</span> <span class="toc-text">
          Cookie.parse(cookieString[, options])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Properties"><span class="toc-number">3.2.2.</span> <span class="toc-text">
          Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie-properties"><span class="toc-number">3.2.3.</span> <span class="toc-text">
          Cookie([{properties}])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toString-NaN"><span class="toc-number">3.2.4.</span> <span class="toc-text">
          .toString()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cookieString"><span class="toc-number">3.2.5.</span> <span class="toc-text">
          .cookieString()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setExpires-String"><span class="toc-number">3.2.6.</span> <span class="toc-text">
          .setExpires(String)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setMaxAge-number"><span class="toc-number">3.2.7.</span> <span class="toc-text">
          .setMaxAge(number)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#expiryTime-now-Date-now"><span class="toc-number">3.2.8.</span> <span class="toc-text">
          .expiryTime([now&#x3D;Date.now()])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#expiryDate-now-Date-now"><span class="toc-number">3.2.9.</span> <span class="toc-text">
          .expiryDate([now&#x3D;Date.now()])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TTL-now-Date-now"><span class="toc-number">3.2.10.</span> <span class="toc-text">
          .TTL([now&#x3D;Date.now()])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#canonicalizedDomain"><span class="toc-number">3.2.11.</span> <span class="toc-text">
          .canonicalizedDomain()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cdomain"><span class="toc-number">3.2.12.</span> <span class="toc-text">
          .cdomain()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toJSON"><span class="toc-number">3.2.13.</span> <span class="toc-text">
          .toJSON()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie-fromJSON-strOrObj"><span class="toc-number">3.2.14.</span> <span class="toc-text">
          Cookie.fromJSON(strOrObj)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#clone"><span class="toc-number">3.2.15.</span> <span class="toc-text">
          .clone()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#validate"><span class="toc-number">3.2.16.</span> <span class="toc-text">
          .validate()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CookieJar"><span class="toc-number">3.3.</span> <span class="toc-text">
          CookieJar</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CookieJar-store-options"><span class="toc-number">3.3.1.</span> <span class="toc-text">
          CookieJar([store],[options])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setCookie-cookieOrString-currentUrl-options-cb-err-cookie"><span class="toc-number">3.3.2.</span> <span class="toc-text">
          .setCookie(cookieOrString, currentUrl, [{options},] cb(err,cookie))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setCookieSync-cookieOrString-currentUrl-options"><span class="toc-number">3.3.3.</span> <span class="toc-text">
          .setCookieSync(cookieOrString, currentUrl, [{options}])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getCookies-currentUrl-options-cb-err-cookies"><span class="toc-number">3.3.4.</span> <span class="toc-text">
          .getCookies(currentUrl, [{options},] cb(err,cookies))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getCookiesSync-currentUrl-options"><span class="toc-number">3.3.5.</span> <span class="toc-text">
          .getCookiesSync(currentUrl, [{options}])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getCookieString"><span class="toc-number">3.3.6.</span> <span class="toc-text">
          .getCookieString(...)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getCookieStringSync"><span class="toc-number">3.3.7.</span> <span class="toc-text">
          .getCookieStringSync(...)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getSetCookieStrings"><span class="toc-number">3.3.8.</span> <span class="toc-text">
          .getSetCookieStrings(...)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getSetCookieStringsSync"><span class="toc-number">3.3.9.</span> <span class="toc-text">
          .getSetCookieStringsSync(...)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#serialize-cb-err-serializedObject"><span class="toc-number">3.3.10.</span> <span class="toc-text">
          .serialize(cb(err,serializedObject))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#serializeSync"><span class="toc-number">3.3.11.</span> <span class="toc-text">
          .serializeSync()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toJSON-1"><span class="toc-number">3.3.12.</span> <span class="toc-text">
          .toJSON()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CookieJar-deserialize-serialized-store-cb-err-object"><span class="toc-number">3.3.13.</span> <span class="toc-text">
          CookieJar.deserialize(serialized, [store], cb(err,object))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CookieJar-deserializeSync-serialized-store"><span class="toc-number">3.3.14.</span> <span class="toc-text">
          CookieJar.deserializeSync(serialized, [store])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CookieJar-fromJSON-string"><span class="toc-number">3.3.15.</span> <span class="toc-text">
          CookieJar.fromJSON(string)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#clone-store-cb-err-newJar"><span class="toc-number">3.3.16.</span> <span class="toc-text">
          .clone([store,]cb(err,newJar))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cloneSync-store"><span class="toc-number">3.3.17.</span> <span class="toc-text">
          .cloneSync([store])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#removeAllCookies-cb-err"><span class="toc-number">3.3.18.</span> <span class="toc-text">
          .removeAllCookies(cb(err))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#removeAllCookiesSync"><span class="toc-number">3.3.19.</span> <span class="toc-text">
          .removeAllCookiesSync()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Store"><span class="toc-number">3.4.</span> <span class="toc-text">
          Store</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Store-API"><span class="toc-number">3.5.</span> <span class="toc-text">
          Store API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#store-findCookie-domain-path-key-cb-err-cookie"><span class="toc-number">3.5.1.</span> <span class="toc-text">
          store.findCookie(domain, path, key, cb(err,cookie))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#store-findCookies-domain-path-cb-err-cookies"><span class="toc-number">3.5.2.</span> <span class="toc-text">
          store.findCookies(domain, path, cb(err,cookies))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#store-putCookie-cookie-cb-err"><span class="toc-number">3.5.3.</span> <span class="toc-text">
          store.putCookie(cookie, cb(err))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#store-updateCookie-oldCookie-newCookie-cb-err"><span class="toc-number">3.5.4.</span> <span class="toc-text">
          store.updateCookie(oldCookie, newCookie, cb(err))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#store-removeCookie-domain-path-key-cb-err"><span class="toc-number">3.5.5.</span> <span class="toc-text">
          store.removeCookie(domain, path, key, cb(err))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#store-removeCookies-domain-path-cb-err"><span class="toc-number">3.5.6.</span> <span class="toc-text">
          store.removeCookies(domain, path, cb(err))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#store-removeAllCookies-cb-err"><span class="toc-number">3.5.7.</span> <span class="toc-text">
          store.removeAllCookies(cb(err))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#store-getAllCookies-cb-err-cookies"><span class="toc-number">3.5.8.</span> <span class="toc-text">
          store.getAllCookies(cb(err, cookies))</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MemoryCookieStore"><span class="toc-number">3.6.</span> <span class="toc-text">
          MemoryCookieStore</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Community-Cookie-Stores"><span class="toc-number">3.7.</span> <span class="toc-text">
          Community Cookie Stores</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Serialization-Format"><span class="toc-number">4.</span> <span class="toc-text">
          Serialization Format</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RFC6265bis"><span class="toc-number">5.</span> <span class="toc-text">
          RFC6265bis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Leave-Secure-Cookies-Alone"><span class="toc-number">5.1.</span> <span class="toc-text">
          Leave Secure Cookies Alone</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SameSite-Cookies"><span class="toc-number">5.2.</span> <span class="toc-text">
          SameSite Cookies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cookie-Prefixes"><span class="toc-number">5.3.</span> <span class="toc-text">
          Cookie Prefixes</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Copyright-and-License"><span class="toc-number">6.</span> <span class="toc-text">
          Copyright and License</span></a></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/cat.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">Hello Stun</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">144</div><div class="sidebar-ov-state-item__name">Archives</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">You have read </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2023</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>汪汪队</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v6.3.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.8.0</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.8.0"></script><script src="/js/stun-boot.js?v=2.8.0"></script><script src="/js/scroll.js?v=2.8.0"></script><script src="/js/header.js?v=2.8.0"></script><script src="/js/sidebar.js?v=2.8.0"></script></body></html>