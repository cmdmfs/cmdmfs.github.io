<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.8.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.8.0" type="image/png" sizes="32x32"><meta name="description" content="qs          A querystring parsing and stringifying library with some added security. Lead Maintainer: Jordan Harband The qs module was originally created and maintained by TJ Holow">
<meta property="og:type" content="article">
<meta property="og:title" content="汪汪队">
<meta property="og:url" content="http://example.com/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/qs/README/index.html">
<meta property="og:site_name" content="汪汪队">
<meta property="og:description" content="qs          A querystring parsing and stringifying library with some added security. Lead Maintainer: Jordan Harband The qs module was originally created and maintained by TJ Holow">
<meta property="og:locale">
<meta property="og:image" content="http://versionbadg.es/ljharb/qs.svg">
<meta property="og:image" content="https://api.travis-ci.org/ljharb/qs.svg">
<meta property="og:image" content="https://david-dm.org/ljharb/qs.svg">
<meta property="og:image" content="https://david-dm.org/ljharb/qs/dev-status.svg">
<meta property="og:image" content="http://img.shields.io/npm/l/qs.svg">
<meta property="og:image" content="http://img.shields.io/npm/dm/qs.svg">
<meta property="og:image" content="https://nodei.co/npm/qs.png?downloads=true&stars=true">
<meta property="article:published_time" content="2023-03-24T12:24:41.084Z">
<meta property="article:modified_time" content="2017-06-14T20:34:40.000Z">
<meta property="article:author" content="汪汪队">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://versionbadg.es/ljharb/qs.svg"><title>[ Untitled ] | 汪汪队</title><link ref="canonical" href="http://example.com/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/qs/README/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.8.0"><link rel="stylesheet" href="css/custom.css"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Hello Stun</div><div class="header-banner-info__subtitle">An elegant theme for Hexo</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">[ Untitled ]</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2017-06-15</span></span></div></header><div class="post-body">
        <h1 id="qs"   >
          <a href="#qs" class="heading-link"><i class="fas fa-link"></i></a><a href="#qs" class="headerlink" title="qs "></a>qs <sup><a target="_blank" rel="noopener" href="https://npmjs.org/package/qs"><img src="http://versionbadg.es/ljharb/qs.svg" alt="Version Badge"></a></sup></h1>
      <p><a target="_blank" rel="noopener" href="https://travis-ci.org/ljharb/qs"><img src="https://api.travis-ci.org/ljharb/qs.svg" alt="Build Status"></a><br><a target="_blank" rel="noopener" href="https://david-dm.org/ljharb/qs"><img src="https://david-dm.org/ljharb/qs.svg" alt="dependency status"></a><br><a target="_blank" rel="noopener" href="https://david-dm.org/ljharb/qs?type=dev"><img src="https://david-dm.org/ljharb/qs/dev-status.svg" alt="dev dependency status"></a><br><a href="LICENSE"><img src="http://img.shields.io/npm/l/qs.svg" alt="License"></a><br><a target="_blank" rel="noopener" href="http://npm-stat.com/charts.html?package=qs"><img src="http://img.shields.io/npm/dm/qs.svg" alt="Downloads"></a></p>
<p><a target="_blank" rel="noopener" href="https://npmjs.org/package/qs"><img   src="https://nodei.co/npm/qs.png?downloads=true&stars=true" style=""  alt="npm badge"></a></p>
<p>A querystring parsing and stringifying library with some added security.</p>
<p>Lead Maintainer: <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/ljharb" >Jordan Harband</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>The <strong>qs</strong> module was originally created and maintained by <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/visionmedia/node-querystring" >TJ Holowaychuk</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</p>

        <h2 id="Usage"   >
          <a href="#Usage" class="heading-link"><i class="fas fa-link"></i></a><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2>
      <figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> qs = <span class="built_in">require</span>(<span class="string">&#x27;qs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> assert = <span class="built_in">require</span>(<span class="string">&#x27;assert&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a=c&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(obj, &#123; <span class="attr">a</span>: <span class="string">&#x27;c&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = qs.<span class="title function_">stringify</span>(obj);</span><br><span class="line">assert.<span class="title function_">equal</span>(str, <span class="string">&#x27;a=c&#x27;</span>);</span><br></pre></td></tr></table></div></figure>


        <h3 id="Parsing-Objects"   >
          <a href="#Parsing-Objects" class="heading-link"><i class="fas fa-link"></i></a><a href="#Parsing-Objects" class="headerlink" title="Parsing Objects"></a>Parsing Objects</h3>
      <p><a href="#preventEval"></a></p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qs.<span class="title function_">parse</span>(string, [options]);</span><br></pre></td></tr></table></div></figure>

<p><strong>qs</strong> allows you to create nested objects within your query strings, by surrounding the name of sub-keys with square brackets <code>[]</code>.<br>For example, the string <code>&#39;foo[bar]=baz&#39;</code> converts to:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">assert.<span class="title function_">deepEqual</span>(qs.<span class="title function_">parse</span>(<span class="string">&#x27;foo[bar]=baz&#x27;</span>), &#123;</span><br><span class="line">    <span class="attr">foo</span>: &#123;</span><br><span class="line">        <span class="attr">bar</span>: <span class="string">&#x27;baz&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>

<p>When using the <code>plainObjects</code> option the parsed value is returned as a null object, created via <code>Object.create(null)</code> and as such you should be aware that prototype methods will not exist on it and a user may set those names to whatever value they like:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nullObject = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[hasOwnProperty]=b&#x27;</span>, &#123; <span class="attr">plainObjects</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(nullObject, &#123; <span class="attr">a</span>: &#123; <span class="attr">hasOwnProperty</span>: <span class="string">&#x27;b&#x27;</span> &#125; &#125;);</span><br></pre></td></tr></table></div></figure>

<p>By default parameters that would overwrite properties on the object prototype are ignored, if you wish to keep the data from those fields either use <code>plainObjects</code> as mentioned above, or set <code>allowPrototypes</code> to <code>true</code> which will allow user input to overwrite those properties. <em>WARNING</em> It is generally a bad idea to enable this option as it can cause problems when attempting to use the properties that have been overwritten. Always be careful with this option.</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> protoObject = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[hasOwnProperty]=b&#x27;</span>, &#123; <span class="attr">allowPrototypes</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(protoObject, &#123; <span class="attr">a</span>: &#123; <span class="attr">hasOwnProperty</span>: <span class="string">&#x27;b&#x27;</span> &#125; &#125;);</span><br></pre></td></tr></table></div></figure>

<p>URI encoded strings work too:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">assert.<span class="title function_">deepEqual</span>(qs.<span class="title function_">parse</span>(<span class="string">&#x27;a%5Bb%5D=c&#x27;</span>), &#123;</span><br><span class="line">    <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">&#x27;c&#x27;</span> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>

<p>You can also nest your objects, like <code>&#39;foo[bar][baz]=foobarbaz&#39;</code>:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">assert.<span class="title function_">deepEqual</span>(qs.<span class="title function_">parse</span>(<span class="string">&#x27;foo[bar][baz]=foobarbaz&#x27;</span>), &#123;</span><br><span class="line">    <span class="attr">foo</span>: &#123;</span><br><span class="line">        <span class="attr">bar</span>: &#123;</span><br><span class="line">            <span class="attr">baz</span>: <span class="string">&#x27;foobarbaz&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>

<p>By default, when nesting objects <strong>qs</strong> will only parse up to 5 children deep. This means if you attempt to parse a string like<br><code>&#39;a[b][c][d][e][f][g][h][i]=j&#39;</code> your resulting object will be:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> expected = &#123;</span><br><span class="line">    <span class="attr">a</span>: &#123;</span><br><span class="line">        <span class="attr">b</span>: &#123;</span><br><span class="line">            <span class="attr">c</span>: &#123;</span><br><span class="line">                <span class="attr">d</span>: &#123;</span><br><span class="line">                    <span class="attr">e</span>: &#123;</span><br><span class="line">                        <span class="attr">f</span>: &#123;</span><br><span class="line">                            <span class="string">&#x27;[g][h][i]&#x27;</span>: <span class="string">&#x27;j&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">&#x27;a[b][c][d][e][f][g][h][i]=j&#x27;</span>;</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(qs.<span class="title function_">parse</span>(string), expected);</span><br></pre></td></tr></table></div></figure>

<p>This depth can be overridden by passing a <code>depth</code> option to <code>qs.parse(string, [options])</code>:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> deep = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[b][c][d][e][f][g][h][i]=j&#x27;</span>, &#123; <span class="attr">depth</span>: <span class="number">1</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(deep, &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: &#123; <span class="string">&#x27;[c][d][e][f][g][h][i]&#x27;</span>: <span class="string">&#x27;j&#x27;</span> &#125; &#125; &#125;);</span><br></pre></td></tr></table></div></figure>

<p>The depth limit helps mitigate abuse when <strong>qs</strong> is used to parse user input, and it is recommended to keep it a reasonably small number.</p>
<p>For similar reasons, by default <strong>qs</strong> will only parse up to 1000 parameters. This can be overridden by passing a <code>parameterLimit</code> option:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> limited = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a=b&amp;c=d&#x27;</span>, &#123; <span class="attr">parameterLimit</span>: <span class="number">1</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(limited, &#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span> &#125;);</span><br></pre></td></tr></table></div></figure>

<p>To bypass the leading question mark, use <code>ignoreQueryPrefix</code>:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> prefixed = qs.<span class="title function_">parse</span>(<span class="string">&#x27;?a=b&amp;c=d&#x27;</span>, &#123; <span class="attr">ignoreQueryPrefix</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(prefixed, &#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">c</span>: <span class="string">&#x27;d&#x27;</span> &#125;);</span><br></pre></td></tr></table></div></figure>

<p>An optional delimiter can also be passed:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> delimited = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a=b;c=d&#x27;</span>, &#123; <span class="attr">delimiter</span>: <span class="string">&#x27;;&#x27;</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(delimited, &#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">c</span>: <span class="string">&#x27;d&#x27;</span> &#125;);</span><br></pre></td></tr></table></div></figure>

<p>Delimiters can be a regular expression too:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regexed = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a=b;c=d,e=f&#x27;</span>, &#123; <span class="attr">delimiter</span>: <span class="regexp">/[;,]/</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(regexed, &#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">c</span>: <span class="string">&#x27;d&#x27;</span>, <span class="attr">e</span>: <span class="string">&#x27;f&#x27;</span> &#125;);</span><br></pre></td></tr></table></div></figure>

<p>Option <code>allowDots</code> can be used to enable dot notation:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> withDots = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a.b=c&#x27;</span>, &#123; <span class="attr">allowDots</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(withDots, &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">&#x27;c&#x27;</span> &#125; &#125;);</span><br></pre></td></tr></table></div></figure>


        <h3 id="Parsing-Arrays"   >
          <a href="#Parsing-Arrays" class="heading-link"><i class="fas fa-link"></i></a><a href="#Parsing-Arrays" class="headerlink" title="Parsing Arrays"></a>Parsing Arrays</h3>
      <p><strong>qs</strong> can also parse arrays using a similar <code>[]</code> notation:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> withArray = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[]=b&amp;a[]=c&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(withArray, &#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] &#125;);</span><br></pre></td></tr></table></div></figure>

<p>You may specify an index as well:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> withIndexes = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[1]=c&amp;a[0]=b&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(withIndexes, &#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] &#125;);</span><br></pre></td></tr></table></div></figure>

<p>Note that the only difference between an index in an array and a key in an object is that the value between the brackets must be a number<br>to create an array. When creating arrays with specific indices, <strong>qs</strong> will compact a sparse array to only the existing values preserving<br>their order:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> noSparse = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[1]=b&amp;a[15]=c&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(noSparse, &#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] &#125;);</span><br></pre></td></tr></table></div></figure>

<p>Note that an empty string is also a value, and will be preserved:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> withEmptyString = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[]=&amp;a[]=b&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(withEmptyString, &#123; <span class="attr">a</span>: [<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;b&#x27;</span>] &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> withIndexedEmptyString = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[0]=b&amp;a[1]=&amp;a[2]=c&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(withIndexedEmptyString, &#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] &#125;);</span><br></pre></td></tr></table></div></figure>

<p><strong>qs</strong> will also limit specifying indices in an array to a maximum index of <code>20</code>. Any array members with an index of greater than <code>20</code> will<br>instead be converted to an object with the index as the key:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> withMaxIndex = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[100]=b&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(withMaxIndex, &#123; <span class="attr">a</span>: &#123; <span class="string">&#x27;100&#x27;</span>: <span class="string">&#x27;b&#x27;</span> &#125; &#125;);</span><br></pre></td></tr></table></div></figure>

<p>This limit can be overridden by passing an <code>arrayLimit</code> option:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> withArrayLimit = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[1]=b&#x27;</span>, &#123; <span class="attr">arrayLimit</span>: <span class="number">0</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(withArrayLimit, &#123; <span class="attr">a</span>: &#123; <span class="string">&#x27;1&#x27;</span>: <span class="string">&#x27;b&#x27;</span> &#125; &#125;);</span><br></pre></td></tr></table></div></figure>

<p>To disable array parsing entirely, set <code>parseArrays</code> to <code>false</code>.</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> noParsingArrays = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[]=b&#x27;</span>, &#123; <span class="attr">parseArrays</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(noParsingArrays, &#123; <span class="attr">a</span>: &#123; <span class="string">&#x27;0&#x27;</span>: <span class="string">&#x27;b&#x27;</span> &#125; &#125;);</span><br></pre></td></tr></table></div></figure>

<p>If you mix notations, <strong>qs</strong> will merge the two items into an object:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixedNotation = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[0]=b&amp;a[b]=c&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(mixedNotation, &#123; <span class="attr">a</span>: &#123; <span class="string">&#x27;0&#x27;</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;c&#x27;</span> &#125; &#125;);</span><br></pre></td></tr></table></div></figure>

<p>You can also create arrays of objects:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arraysOfObjects = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a[][b]=c&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(arraysOfObjects, &#123; <span class="attr">a</span>: [&#123; <span class="attr">b</span>: <span class="string">&#x27;c&#x27;</span> &#125;] &#125;);</span><br></pre></td></tr></table></div></figure>


        <h3 id="Stringifying"   >
          <a href="#Stringifying" class="heading-link"><i class="fas fa-link"></i></a><a href="#Stringifying" class="headerlink" title="Stringifying"></a>Stringifying</h3>
      <p><a href="#preventEval"></a></p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qs.<span class="title function_">stringify</span>(object, [options]);</span><br></pre></td></tr></table></div></figure>

<p>When stringifying, <strong>qs</strong> by default URI encodes output. Objects are stringified as you would expect:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span> &#125;), <span class="string">&#x27;a=b&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">&#x27;c&#x27;</span> &#125; &#125;), <span class="string">&#x27;a%5Bb%5D=c&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>This encoding can be disabled by setting the <code>encode</code> option to <code>false</code>:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> unencoded = qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">&#x27;c&#x27;</span> &#125; &#125;, &#123; <span class="attr">encode</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">assert.<span class="title function_">equal</span>(unencoded, <span class="string">&#x27;a[b]=c&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>Encoding can be disabled for keys by setting the <code>encodeValuesOnly</code> option to <code>true</code>:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> encodedValues = qs.<span class="title function_">stringify</span>(</span><br><span class="line">    &#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">c</span>: [<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e=f&#x27;</span>], <span class="attr">f</span>: [[<span class="string">&#x27;g&#x27;</span>], [<span class="string">&#x27;h&#x27;</span>]] &#125;,</span><br><span class="line">    &#123; <span class="attr">encodeValuesOnly</span>: <span class="literal">true</span> &#125;</span><br><span class="line">);</span><br><span class="line">assert.<span class="title function_">equal</span>(encodedValues,<span class="string">&#x27;a=b&amp;c[0]=d&amp;c[1]=e%3Df&amp;f[0][0]=g&amp;f[1][0]=h&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>This encoding can also be replaced by a custom encoding method set as <code>encoder</code> option:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> encoded = qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">&#x27;c&#x27;</span> &#125; &#125;, &#123; <span class="attr">encoder</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="comment">// Passed in values `a`, `b`, `c`</span></span><br><span class="line">    <span class="keyword">return</span> <span class="comment">// Return encoded string</span></span><br><span class="line">&#125;&#125;)</span><br></pre></td></tr></table></div></figure>

<p><em>(Note: the <code>encoder</code> option does not apply if <code>encode</code> is <code>false</code>)</em></p>
<p>Analogue to the <code>encoder</code> there is a <code>decoder</code> option for <code>parse</code> to override decoding of properties and values:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> decoded = qs.<span class="title function_">parse</span>(<span class="string">&#x27;x=z&#x27;</span>, &#123; <span class="attr">decoder</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="comment">// Passed in values `x`, `z`</span></span><br><span class="line">    <span class="keyword">return</span> <span class="comment">// Return decoded string</span></span><br><span class="line">&#125;&#125;)</span><br></pre></td></tr></table></div></figure>

<p>Examples beyond this point will be shown as though the output is not URI encoded for clarity. Please note that the return values in these cases <em>will</em> be URI encoded during real usage.</p>
<p>When arrays are stringified, by default they are given explicit indices:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>] &#125;);</span><br><span class="line"><span class="comment">// &#x27;a[0]=b&amp;a[1]=c&amp;a[2]=d&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>You may override this by setting the <code>indices</code> option to <code>false</code>:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>] &#125;, &#123; <span class="attr">indices</span>: <span class="literal">false</span> &#125;);</span><br><span class="line"><span class="comment">// &#x27;a=b&amp;a=c&amp;a=d&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>You may use the <code>arrayFormat</code> option to specify the format of the output array:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] &#125;, &#123; <span class="attr">arrayFormat</span>: <span class="string">&#x27;indices&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// &#x27;a[0]=b&amp;a[1]=c&#x27;</span></span><br><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] &#125;, &#123; <span class="attr">arrayFormat</span>: <span class="string">&#x27;brackets&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// &#x27;a[]=b&amp;a[]=c&#x27;</span></span><br><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] &#125;, &#123; <span class="attr">arrayFormat</span>: <span class="string">&#x27;repeat&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// &#x27;a=b&amp;a=c&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>When objects are stringified, by default they use bracket notation:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="string">&#x27;d&#x27;</span>, <span class="attr">e</span>: <span class="string">&#x27;f&#x27;</span> &#125; &#125; &#125;);</span><br><span class="line"><span class="comment">// &#x27;a[b][c]=d&amp;a[b][e]=f&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>You may override this to use dot notation by setting the <code>allowDots</code> option to <code>true</code>:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="string">&#x27;d&#x27;</span>, <span class="attr">e</span>: <span class="string">&#x27;f&#x27;</span> &#125; &#125; &#125;, &#123; <span class="attr">allowDots</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"><span class="comment">// &#x27;a.b.c=d&amp;a.b.e=f&#x27;</span></span><br></pre></td></tr></table></div></figure>

<p>Empty strings and null values will omit the value, but the equals sign (&#x3D;) remains in place:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;&#x27;</span> &#125;), <span class="string">&#x27;a=&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>Key with no values (such as an empty object or array) will return nothing:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: [] &#125;), <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: &#123;&#125; &#125;), <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: [&#123;&#125;] &#125;), <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: []&#125; &#125;), <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: &#123;&#125;&#125; &#125;), <span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>Properties that are set to <code>undefined</code> will be omitted entirely:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="literal">null</span>, <span class="attr">b</span>: <span class="literal">undefined</span> &#125;), <span class="string">&#x27;a=&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>The query string may optionally be prepended with a question mark:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">c</span>: <span class="string">&#x27;d&#x27;</span> &#125;, &#123; <span class="attr">addQueryPrefix</span>: <span class="literal">true</span> &#125;), <span class="string">&#x27;?a=b&amp;c=d&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>The delimiter may be overridden with stringify as well:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">c</span>: <span class="string">&#x27;d&#x27;</span> &#125;, &#123; <span class="attr">delimiter</span>: <span class="string">&#x27;;&#x27;</span> &#125;), <span class="string">&#x27;a=b;c=d&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>If you only want to override the serialization of <code>Date</code> objects, you can provide a <code>serializeDate</code> option:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">7</span>);</span><br><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: date &#125;), <span class="string">&#x27;a=1970-01-01T00:00:00.007Z&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/:/g</span>, <span class="string">&#x27;%3A&#x27;</span>));</span><br><span class="line">assert.<span class="title function_">equal</span>(</span><br><span class="line">    qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: date &#125;, &#123; <span class="attr">serializeDate</span>: <span class="keyword">function</span> (<span class="params">d</span>) &#123; <span class="keyword">return</span> d.<span class="title function_">getTime</span>(); &#125; &#125;),</span><br><span class="line">    <span class="string">&#x27;a=7&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></div></figure>

<p>You may use the <code>sort</code> option to affect the order of parameter keys:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">alphabeticalSort</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.<span class="title function_">localeCompare</span>(b);</span><br><span class="line">&#125;</span><br><span class="line">assert.<span class="title function_">equal</span>(qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;c&#x27;</span>, <span class="attr">z</span>: <span class="string">&#x27;y&#x27;</span>, b : <span class="string">&#x27;f&#x27;</span> &#125;, &#123; <span class="attr">sort</span>: alphabeticalSort &#125;), <span class="string">&#x27;a=c&amp;b=f&amp;z=y&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>Finally, you can use the <code>filter</code> option to restrict which keys will be included in the stringified output.<br>If you pass a function, it will be called for each key to obtain the replacement value. Otherwise, if you<br>pass an array, it will be used to select properties and array indices for stringification:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">filterFunc</span>(<span class="params">prefix, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (prefix == <span class="string">&#x27;b&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// Return an `undefined` value to omit a property.</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (prefix == <span class="string">&#x27;e[f]&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value.<span class="title function_">getTime</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (prefix == <span class="string">&#x27;e[g][0]&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">c</span>: <span class="string">&#x27;d&#x27;</span>, <span class="attr">e</span>: &#123; <span class="attr">f</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">123</span>), <span class="attr">g</span>: [<span class="number">2</span>] &#125; &#125;, &#123; <span class="attr">filter</span>: filterFunc &#125;);</span><br><span class="line"><span class="comment">// &#x27;a=b&amp;c=d&amp;e[f]=123&amp;e[g][0]=4&#x27;</span></span><br><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">c</span>: <span class="string">&#x27;d&#x27;</span>, <span class="attr">e</span>: <span class="string">&#x27;f&#x27;</span> &#125;, &#123; <span class="attr">filter</span>: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;e&#x27;</span>] &#125;);</span><br><span class="line"><span class="comment">// &#x27;a=b&amp;e=f&#x27;</span></span><br><span class="line">qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>], <span class="attr">e</span>: <span class="string">&#x27;f&#x27;</span> &#125;, &#123; <span class="attr">filter</span>: [<span class="string">&#x27;a&#x27;</span>, <span class="number">0</span>, <span class="number">2</span>] &#125;);</span><br><span class="line"><span class="comment">// &#x27;a[0]=b&amp;a[2]=d&#x27;</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="Handling-of-null-values"   >
          <a href="#Handling-of-null-values" class="heading-link"><i class="fas fa-link"></i></a><a href="#Handling-of-null-values" class="headerlink" title="Handling of null values"></a>Handling of <code>null</code> values</h3>
      <p>By default, <code>null</code> values are treated like empty strings:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> withNull = qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="literal">null</span>, <span class="attr">b</span>: <span class="string">&#x27;&#x27;</span> &#125;);</span><br><span class="line">assert.<span class="title function_">equal</span>(withNull, <span class="string">&#x27;a=&amp;b=&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>Parsing does not distinguish between parameters with and without equal signs. Both are converted to empty strings.</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> equalsInsensitive = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a&amp;b=&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(equalsInsensitive, &#123; <span class="attr">a</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;&#x27;</span> &#125;);</span><br></pre></td></tr></table></div></figure>

<p>To distinguish between <code>null</code> values and empty strings use the <code>strictNullHandling</code> flag. In the result string the <code>null</code><br>values have no <code>=</code> sign:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strictNull = qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="literal">null</span>, <span class="attr">b</span>: <span class="string">&#x27;&#x27;</span> &#125;, &#123; <span class="attr">strictNullHandling</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">assert.<span class="title function_">equal</span>(strictNull, <span class="string">&#x27;a&amp;b=&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>To parse values without <code>=</code> back to <code>null</code> use the <code>strictNullHandling</code> flag:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> parsedStrictNull = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a&amp;b=&#x27;</span>, &#123; <span class="attr">strictNullHandling</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(parsedStrictNull, &#123; <span class="attr">a</span>: <span class="literal">null</span>, <span class="attr">b</span>: <span class="string">&#x27;&#x27;</span> &#125;);</span><br></pre></td></tr></table></div></figure>

<p>To completely skip rendering keys with <code>null</code> values, use the <code>skipNulls</code> flag:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nullsSkipped = qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">c</span>: <span class="literal">null</span>&#125;, &#123; <span class="attr">skipNulls</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">assert.<span class="title function_">equal</span>(nullsSkipped, <span class="string">&#x27;a=b&#x27;</span>);</span><br></pre></td></tr></table></div></figure>


        <h3 id="Dealing-with-special-character-sets"   >
          <a href="#Dealing-with-special-character-sets" class="heading-link"><i class="fas fa-link"></i></a><a href="#Dealing-with-special-character-sets" class="headerlink" title="Dealing with special character sets"></a>Dealing with special character sets</h3>
      <p>By default the encoding and decoding of characters is done in <code>utf-8</code>. If you<br>wish to encode querystrings to a different character set (i.e.<br><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shift_JIS" >Shift JIS</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>) you can use the<br><a target="_blank" rel="noopener" href="https://github.com/martinheidegger/qs-iconv"><code>qs-iconv</code></a> library:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> encoder = <span class="built_in">require</span>(<span class="string">&#x27;qs-iconv/encoder&#x27;</span>)(<span class="string">&#x27;shift_jis&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> shiftJISEncoded = qs.<span class="title function_">stringify</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;こんにちは！&#x27;</span> &#125;, &#123; <span class="attr">encoder</span>: encoder &#125;);</span><br><span class="line">assert.<span class="title function_">equal</span>(shiftJISEncoded, <span class="string">&#x27;a=%82%B1%82%F1%82%C9%82%BF%82%CD%81I&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>This also works for decoding of query strings:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> decoder = <span class="built_in">require</span>(<span class="string">&#x27;qs-iconv/decoder&#x27;</span>)(<span class="string">&#x27;shift_jis&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> obj = qs.<span class="title function_">parse</span>(<span class="string">&#x27;a=%82%B1%82%F1%82%C9%82%BF%82%CD%81I&#x27;</span>, &#123; <span class="attr">decoder</span>: decoder &#125;);</span><br><span class="line">assert.<span class="title function_">deepEqual</span>(obj, &#123; <span class="attr">a</span>: <span class="string">&#x27;こんにちは！&#x27;</span> &#125;);</span><br></pre></td></tr></table></div></figure>


        <h3 id="RFC-3986-and-RFC-1738-space-encoding"   >
          <a href="#RFC-3986-and-RFC-1738-space-encoding" class="heading-link"><i class="fas fa-link"></i></a><a href="#RFC-3986-and-RFC-1738-space-encoding" class="headerlink" title="RFC 3986 and RFC 1738 space encoding"></a>RFC 3986 and RFC 1738 space encoding</h3>
      <p>RFC3986 used as default option and encodes ‘ ‘ to <em>%20</em> which is backward compatible.<br>In the same time, output can be stringified as per RFC1738 with ‘ ‘ equal to ‘+’.</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#x27;b c&#x27; &#125;), &#x27;a=b%20c&#x27;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#x27;b c&#x27; &#125;, &#123; format : &#x27;RFC3986&#x27; &#125;), &#x27;a=b%20c&#x27;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#x27;b c&#x27; &#125;, &#123; format : &#x27;RFC1738&#x27; &#125;), &#x27;a=b+c&#x27;);</span><br></pre></td></tr></table></div></figure>

</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ END ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">Author: </span><span class="copyright-author__value"><a href="http://example.com">汪汪队</a></span></div><div class="copyright-link"><span class="copyright-link__name">Link: </span><span class="copyright-link__value"><a href="http://example.com/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/qs/README/">http://example.com/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/qs/README/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">Copyright: </span><span class="copyright-notice__value">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> unless stating additionally</span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/request/CHANGELOG/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">[ Untitled ]</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/qs/CHANGELOG/"><span class="paginator-prev__text">[ Untitled ]</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Catalog</span><span class="sidebar-nav-ov">Overview</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#qs"><span class="toc-number">1.</span> <span class="toc-text">
          qs </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage"><span class="toc-number">1.1.</span> <span class="toc-text">
          Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Parsing-Objects"><span class="toc-number">1.1.1.</span> <span class="toc-text">
          Parsing Objects</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parsing-Arrays"><span class="toc-number">1.1.2.</span> <span class="toc-text">
          Parsing Arrays</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stringifying"><span class="toc-number">1.1.3.</span> <span class="toc-text">
          Stringifying</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Handling-of-null-values"><span class="toc-number">1.1.4.</span> <span class="toc-text">
          Handling of null values</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dealing-with-special-character-sets"><span class="toc-number">1.1.5.</span> <span class="toc-text">
          Dealing with special character sets</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RFC-3986-and-RFC-1738-space-encoding"><span class="toc-number">1.1.6.</span> <span class="toc-text">
          RFC 3986 and RFC 1738 space encoding</span></a></li></ol></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/cat.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">Hello Stun</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">144</div><div class="sidebar-ov-state-item__name">Archives</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">You have read </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2023</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>汪汪队</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v6.3.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.8.0</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.8.0"></script><script src="/js/stun-boot.js?v=2.8.0"></script><script src="/js/scroll.js?v=2.8.0"></script><script src="/js/header.js?v=2.8.0"></script><script src="/js/sidebar.js?v=2.8.0"></script></body></html>