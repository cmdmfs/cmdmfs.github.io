<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.8.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.8.0" type="image/png" sizes="32x32"><meta name="description" content="have a try try">
<meta property="og:type" content="website">
<meta property="og:title" content="汪汪队">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="汪汪队">
<meta property="og:description" content="have a try try">
<meta property="og:locale">
<meta property="article:author" content="汪汪队">
<meta name="twitter:card" content="summary"><title>汪汪队</title><link ref="canonical" href="http://example.com/page/4/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.8.0"><link rel="stylesheet" href="css/custom.css"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Hello Stun</div><div class="header-banner-info__subtitle">An elegant theme for Hexo</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tweetnacl/CHANGELOG/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2016-12-13</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="TweetNaCl-js-Changelog"   >
          <a href="#TweetNaCl-js-Changelog" class="heading-link"><i class="fas fa-link"></i></a><a href="#TweetNaCl-js-Changelog" class="headerlink" title="TweetNaCl.js Changelog"></a>TweetNaCl.js Changelog</h1>
      
        <h2 id="v0-14-5"   >
          <a href="#v0-14-5" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-14-5" class="headerlink" title="v0.14.5"></a>v0.14.5</h2>
      <ul>
<li>Fixed incomplete return types in TypeScript typings.</li>
<li>Replaced COPYING.txt with LICENSE file, which now has public domain dedication<br>text from The Unlicense. License fields in package.json and bower.json have<br>been set to “Unlicense”. The project was and will be in the public domain –<br>this change just makes it easier for automated tools to know about this fact by<br>using the widely recognized and SPDX-compatible template for public domain<br>dedication.</li>
</ul>

        <h2 id="v0-14-4"   >
          <a href="#v0-14-4" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-14-4" class="headerlink" title="v0.14.4"></a>v0.14.4</h2>
      <ul>
<li>Added TypeScript type definitions (contributed by @AndSDev).</li>
<li>Improved benchmarking code.</li>
</ul>

        <h2 id="v0-14-3"   >
          <a href="#v0-14-3" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-14-3" class="headerlink" title="v0.14.3"></a>v0.14.3</h2>
      <p>Fixed a bug in the fast version of Poly1305 and brought it back.</p>
<p>Thanks to @floodyberry for promptly responding and fixing the original C code:</p>
<blockquote>
<p>“The issue was not properly detecting if st-&gt;h was &gt;&#x3D; 2^130 - 5, coupled with<br>[testing mistake] not catching the failure. The chance of the bug affecting<br>anything in the real world is essentially zero luckily, but it’s good to have<br>it fixed.”</p>
</blockquote>
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/floodyberry/poly1305-donna/issues/2#issuecomment-202698577" >https://github.com/floodyberry/poly1305-donna/issues/2#issuecomment-202698577</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="v0-14-2"   >
          <a href="#v0-14-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-14-2" class="headerlink" title="v0.14.2"></a>v0.14.2</h2>
      <p>Switched Poly1305 fast version back to original (slow) version due to a bug.</p>

        <h2 id="v0-14-1"   >
          <a href="#v0-14-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-14-1" class="headerlink" title="v0.14.1"></a>v0.14.1</h2>
      <p>No code changes, just tweaked packaging and added COPYING.txt.</p>

        <h2 id="v0-14-0"   >
          <a href="#v0-14-0" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-14-0" class="headerlink" title="v0.14.0"></a>v0.14.0</h2>
      <ul>
<li><p><strong>Breaking change!</strong> All functions from <code>nacl.util</code> have been removed. These<br>functions are no longer available:</p>
<pre><code>nacl.util.decodeUTF8
nacl.util.encodeUTF8
nacl.util.decodeBase64
nacl.util.encodeBase64
</code></pre>
<p>If want to continue using them, you can include<br><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/dchest/tweetnacl-util-js" >https://github.com/dchest/tweetnacl-util-js</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> package:</p>
<pre><code>&lt;script src=&quot;nacl.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;nacl-util.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>or</p>
<pre><code>var nacl = require(&#39;tweetnacl&#39;);
nacl.util = require(&#39;tweetnacl-util&#39;);
</code></pre>
<p>However it is recommended to use better packages that have wider<br>compatibility and better performance. Functions from <code>nacl.util</code> were never<br>intended to be robust solution for string conversion and were included for<br>convenience: cryptography library is not the right place for them.</p>
<p>Currently calling these functions will throw error pointing to<br><code>tweetnacl-util-js</code> (in the next version this error message will be removed).</p>
</li>
<li><p>Improved detection of available random number generators, making it possible<br>to use <code>nacl.randomBytes</code> and related functions in Web Workers without<br>changes.</p>
</li>
<li><p>Changes to testing (see README).</p>
</li>
</ul>

        <h2 id="v0-13-3"   >
          <a href="#v0-13-3" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-13-3" class="headerlink" title="v0.13.3"></a>v0.13.3</h2>
      <p>No code changes.</p>
<ul>
<li><p>Reverted license field in package.json to “Public domain”.</p>
</li>
<li><p>Fixed typo in README.</p>
</li>
</ul>

        <h2 id="v0-13-2"   >
          <a href="#v0-13-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-13-2" class="headerlink" title="v0.13.2"></a>v0.13.2</h2>
      <ul>
<li><p>Fixed undefined variable bug in fast version of Poly1305. No worries, this<br>bug was <em>never</em> triggered.</p>
</li>
<li><p>Specified CC0 public domain dedication.</p>
</li>
<li><p>Updated development dependencies.</p>
</li>
</ul>

        <h2 id="v0-13-1"   >
          <a href="#v0-13-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-13-1" class="headerlink" title="v0.13.1"></a>v0.13.1</h2>
      <ul>
<li>Exclude <code>crypto</code> and <code>buffer</code> modules from browserify builds.</li>
</ul>

        <h2 id="v0-13-0"   >
          <a href="#v0-13-0" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-13-0" class="headerlink" title="v0.13.0"></a>v0.13.0</h2>
      <ul>
<li><p>Made <code>nacl-fast</code> the default version in NPM package. Now<br><code>require(&quot;tweetnacl&quot;)</code> will use fast version; to get the original version,<br>use <code>require(&quot;tweetnacl/nacl.js&quot;)</code>.</p>
</li>
<li><p>Cleanup temporary array after generating random bytes.</p>
</li>
</ul>

        <h2 id="v0-12-2"   >
          <a href="#v0-12-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-12-2" class="headerlink" title="v0.12.2"></a>v0.12.2</h2>
      <ul>
<li>Improved performance of curve operations, making <code>nacl.scalarMult</code>, <code>nacl.box</code>,<br><code>nacl.sign</code> and related functions up to 3x faster in <code>nacl-fast</code> version.</li>
</ul>

        <h2 id="v0-12-1"   >
          <a href="#v0-12-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-12-1" class="headerlink" title="v0.12.1"></a>v0.12.1</h2>
      <ul>
<li>Significantly improved performance of Salsa20 (<del>1.5x faster) and<br>Poly1305 (</del>3.5x faster) in <code>nacl-fast</code> version.</li>
</ul>

        <h2 id="v0-12-0"   >
          <a href="#v0-12-0" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-12-0" class="headerlink" title="v0.12.0"></a>v0.12.0</h2>
      <ul>
<li>Instead of using the given secret key directly, TweetNaCl.js now copies it to<br>a new array in <code>nacl.box.keyPair.fromSecretKey</code> and<br><code>nacl.sign.keyPair.fromSecretKey</code>.</li>
</ul>

        <h2 id="v0-11-2"   >
          <a href="#v0-11-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-11-2" class="headerlink" title="v0.11.2"></a>v0.11.2</h2>
      <ul>
<li>Added new constant: <code>nacl.sign.seedLength</code>.</li>
</ul>

        <h2 id="v0-11-1"   >
          <a href="#v0-11-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-11-1" class="headerlink" title="v0.11.1"></a>v0.11.1</h2>
      <ul>
<li>Even faster hash for both short and long inputs (in <code>nacl-fast</code>).</li>
</ul>

        <h2 id="v0-11-0"   >
          <a href="#v0-11-0" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-11-0" class="headerlink" title="v0.11.0"></a>v0.11.0</h2>
      <ul>
<li><p>Implement <code>nacl.sign.keyPair.fromSeed</code> to enable creation of sign key pairs<br>deterministically from a 32-byte seed. (It behaves like<br><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://doc.libsodium.org/public-key_cryptography/public-key_signatures.html" >libsodium’s</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span><br><code>crypto_sign_seed_keypair</code>: the seed becomes a secret part of the secret key.)</p>
</li>
<li><p>Fast version now has an improved hash implementation that is 2x-5x faster.</p>
</li>
<li><p>Fixed benchmarks, which may have produced incorrect measurements.</p>
</li>
</ul>

        <h2 id="v0-10-1"   >
          <a href="#v0-10-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-10-1" class="headerlink" title="v0.10.1"></a>v0.10.1</h2>
      <ul>
<li>Exported undocumented <code>nacl.lowlevel.crypto_core_hsalsa20</code>.</li>
</ul>

        <h2 id="v0-10-0"   >
          <a href="#v0-10-0" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-10-0" class="headerlink" title="v0.10.0"></a>v0.10.0</h2>
      <ul>
<li><strong>Signature API breaking change!</strong> <code>nacl.sign</code> and <code>nacl.sign.open</code> now deal<br> with signed messages, and new <code>nacl.sign.detached</code> and<br> <code>nacl.sign.detached.verify</code> are available.</li>
</ul>
<p> Previously, <code>nacl.sign</code> returned a signature, and <code>nacl.sign.open</code> accepted a<br> message and “detached” signature. This was unlike NaCl’s API, which dealt with<br> signed messages (concatenation of signature and message).</p>
<p> The new API is:</p>
<pre><code>  nacl.sign(message, secretKey) -&gt; signedMessage
  nacl.sign.open(signedMessage, publicKey) -&gt; message | null
</code></pre>
<p> Since detached signatures are common, two new API functions were introduced:</p>
<pre><code>  nacl.sign.detached(message, secretKey) -&gt; signature
  nacl.sign.detached.verify(message, signature, publicKey) -&gt; true | false
</code></pre>
<p> (Note that it’s <code>verify</code>, not <code>open</code>, and it returns a boolean value, unlike<br> <code>open</code>, which returns an “unsigned” message.)</p>
<ul>
<li>NPM package now comes without <code>test</code> directory to keep it small.</li>
</ul>

        <h2 id="v0-9-2"   >
          <a href="#v0-9-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-9-2" class="headerlink" title="v0.9.2"></a>v0.9.2</h2>
      <ul>
<li>Improved documentation.</li>
<li>Fast version: increased theoretical message size limit from 2^32-1 to 2^52<br>bytes in Poly1305 (and thus, secretbox and box). However this has no impact<br>in practice since JavaScript arrays or ArrayBuffers are limited to 32-bit<br>indexes, and most implementations won’t allocate more than a gigabyte or so.<br>(Obviously, there are no tests for the correctness of implementation.) Also,<br>it’s not recommended to use messages that large without splitting them into<br>smaller packets anyway.</li>
</ul>

        <h2 id="v0-9-1"   >
          <a href="#v0-9-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#v0-9-1" class="headerlink" title="v0.9.1"></a>v0.9.1</h2>
      <ul>
<li>Initial release</li>
</ul>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tunnel-agent/README/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2013-04-22</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="tunnel-agent"   >
          <a href="#tunnel-agent" class="heading-link"><i class="fas fa-link"></i></a><a href="#tunnel-agent" class="headerlink" title="tunnel-agent"></a>tunnel-agent</h1>
      <p>HTTP proxy tunneling agent. Formerly part of mikeal&#x2F;request, now a standalone module.</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tr46/README/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2020-01-03</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="tr46"   >
          <a href="#tr46" class="heading-link"><i class="fas fa-link"></i></a><a href="#tr46" class="headerlink" title="tr46"></a>tr46</h1>
      <p>An JavaScript implementation of <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://unicode.org/reports/tr46/" >Unicode Technical Standard #46: Unicode IDNA Compatibility Processing</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</p>

        <h2 id="Installation"   >
          <a href="#Installation" class="heading-link"><i class="fas fa-link"></i></a><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2>
      <p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://nodejs.org/" >Node.js</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> ≥ 8 is required. To install, type this at the command line:</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install tr46</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">yarn add tr46</span><br></pre></td></tr></table></div></figure>



        <h2 id="API"   >
          <a href="#API" class="heading-link"><i class="fas fa-link"></i></a><a href="#API" class="headerlink" title="API"></a>API</h2>
      
        <h3 id="toASCII-domainName-options"   >
          <a href="#toASCII-domainName-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#toASCII-domainName-options" class="headerlink" title="toASCII(domainName[, options])"></a><code>toASCII(domainName[, options])</code></h3>
      <p>Converts a string of Unicode symbols to a case-folded Punycode string of ASCII symbols.</p>
<p>Available options:</p>
<ul>
<li><a href="#checkBidi"><code>checkBidi</code></a></li>
<li><a href="#checkHyphens"><code>checkHyphens</code></a></li>
<li><a href="#checkJoiners"><code>checkJoiners</code></a></li>
<li><a href="#processingOption"><code>processingOption</code></a></li>
<li><a href="#useSTD3ASCIIRules"><code>useSTD3ASCIIRules</code></a></li>
<li><a href="#verifyDNSLength"><code>verifyDNSLength</code></a></li>
</ul>

        <h3 id="toUnicode-domainName-options"   >
          <a href="#toUnicode-domainName-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#toUnicode-domainName-options" class="headerlink" title="toUnicode(domainName[, options])"></a><code>toUnicode(domainName[, options])</code></h3>
      <p>Converts a case-folded Punycode string of ASCII symbols to a string of Unicode symbols.</p>
<p>Available options:</p>
<ul>
<li><a href="#checkBidi"><code>checkBidi</code></a></li>
<li><a href="#checkHyphens"><code>checkHyphens</code></a></li>
<li><a href="#checkJoiners"><code>checkJoiners</code></a></li>
<li><a href="#processingOption"><code>processingOption</code></a></li>
<li><a href="#useSTD3ASCIIRules"><code>useSTD3ASCIIRules</code></a></li>
</ul>

        <h2 id="Options"   >
          <a href="#Options" class="heading-link"><i class="fas fa-link"></i></a><a href="#Options" class="headerlink" title="Options"></a>Options</h2>
      
        <h3 id="checkBidi"   >
          <a href="#checkBidi" class="heading-link"><i class="fas fa-link"></i></a><a href="#checkBidi" class="headerlink" title="checkBidi"></a><code>checkBidi</code></h3>
      <p>Type: <code>Boolean</code><br>Default value: <code>false</code><br>When set to <code>true</code>, any bi-directional text within the input will be checked for validation.</p>

        <h3 id="checkHyphens"   >
          <a href="#checkHyphens" class="heading-link"><i class="fas fa-link"></i></a><a href="#checkHyphens" class="headerlink" title="checkHyphens"></a><code>checkHyphens</code></h3>
      <p>Type: <code>Boolean</code><br>Default value: <code>false</code><br>When set to <code>true</code>, the positions of any hyphen characters within the input will be checked for validation.</p>

        <h3 id="checkJoiners"   >
          <a href="#checkJoiners" class="heading-link"><i class="fas fa-link"></i></a><a href="#checkJoiners" class="headerlink" title="checkJoiners"></a><code>checkJoiners</code></h3>
      <p>Type: <code>Boolean</code><br>Default value: <code>false</code><br>When set to <code>true</code>, any word joiner characters within the input will be checked for validation.</p>

        <h3 id="processingOption"   >
          <a href="#processingOption" class="heading-link"><i class="fas fa-link"></i></a><a href="#processingOption" class="headerlink" title="processingOption"></a><code>processingOption</code></h3>
      <p>Type: <code>String</code><br>Default value: <code>&quot;nontransitional&quot;</code><br>When set to <code>&quot;transitional&quot;</code>, symbols within the input will be validated according to the older IDNA2003 protocol. When set to <code>&quot;nontransitional&quot;</code>, the current IDNA2008 protocol will be used.</p>

        <h3 id="useSTD3ASCIIRules"   >
          <a href="#useSTD3ASCIIRules" class="heading-link"><i class="fas fa-link"></i></a><a href="#useSTD3ASCIIRules" class="headerlink" title="useSTD3ASCIIRules"></a><code>useSTD3ASCIIRules</code></h3>
      <p>Type: <code>Boolean</code><br>Default value: <code>false</code><br>When set to <code>true</code>, input will be validated according to <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://unicode.org/reports/tr46/#STD3_Rules" >STD3 Rules</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</p>

        <h3 id="verifyDNSLength"   >
          <a href="#verifyDNSLength" class="heading-link"><i class="fas fa-link"></i></a><a href="#verifyDNSLength" class="headerlink" title="verifyDNSLength"></a><code>verifyDNSLength</code></h3>
      <p>Type: <code>Boolean</code><br>Default value: <code>false</code><br>When set to <code>true</code>, the length of each DNS label within the input will be checked for validation.</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tr46/LICENSE/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2020-01-02</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>The MIT License (MIT)</p>
<p>Copyright (c) 2016 Sebastian Mayr</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy<br>of this software and associated documentation files (the “Software”), to deal<br>in the Software without restriction, including without limitation the rights<br>to use, copy, modify, merge, publish, distribute, sublicense, and&#x2F;or sell<br>copies of the Software, and to permit persons to whom the Software is<br>furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all<br>copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE<br>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,<br>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE<br>SOFTWARE.</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/tough-cookie/README/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">1985-10-26</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6265" >RFC6265</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> Cookies and CookieJar for Node.js</p>
<p><a target="_blank" rel="noopener" href="https://nodei.co/npm/tough-cookie/"><img   src="https://nodei.co/npm/tough-cookie.png?downloads=true&downloadRank=true&stars=true" style=""  alt="npm package"></a></p>
<p><a target="_blank" rel="noopener" href="https://travis-ci.org/salesforce/tough-cookie"><img   src="https://travis-ci.org/salesforce/tough-cookie.svg?branch=master" style=""  alt="Build Status"></a></p>

        <h1 id="Synopsis"   >
          <a href="#Synopsis" class="heading-link"><i class="fas fa-link"></i></a><a href="#Synopsis" class="headerlink" title="Synopsis"></a>Synopsis</h1>
      <figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tough = <span class="built_in">require</span>(<span class="string">&#x27;tough-cookie&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Cookie</span> = tough.<span class="property">Cookie</span>;</span><br><span class="line"><span class="keyword">var</span> cookie = <span class="title class_">Cookie</span>.<span class="title function_">parse</span>(header);</span><br><span class="line">cookie.<span class="property">value</span> = <span class="string">&#x27;somethingdifferent&#x27;</span>;</span><br><span class="line">header = cookie.<span class="title function_">toString</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cookiejar = <span class="keyword">new</span> tough.<span class="title class_">CookieJar</span>();</span><br><span class="line">cookiejar.<span class="title function_">setCookie</span>(cookie, <span class="string">&#x27;http://currentdomain.example.com/path&#x27;</span>, cb);</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">cookiejar.<span class="title function_">getCookies</span>(<span class="string">&#x27;http://example.com/otherpath&#x27;</span>,<span class="keyword">function</span>(<span class="params">err,cookies</span>) &#123;</span><br><span class="line">  res.<span class="property">headers</span>[<span class="string">&#x27;cookie&#x27;</span>] = cookies.<span class="title function_">join</span>(<span class="string">&#x27;; &#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>


        <h1 id="Installation"   >
          <a href="#Installation" class="heading-link"><i class="fas fa-link"></i></a><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1>
      <p>It’s <em>so</em> easy!</p>
<p><code>npm install tough-cookie</code></p>
<p>Why the name?  NPM modules <code>cookie</code>, <code>cookies</code> and <code>cookiejar</code> were already taken.</p>

        <h2 id="Version-Support"   >
          <a href="#Version-Support" class="heading-link"><i class="fas fa-link"></i></a><a href="#Version-Support" class="headerlink" title="Version Support"></a>Version Support</h2>
      <p>Support for versions of node.js will follow that of the <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.npmjs.com/package/request" >request</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> module.</p>

        <h1 id="API"   >
          <a href="#API" class="heading-link"><i class="fas fa-link"></i></a><a href="#API" class="headerlink" title="API"></a>API</h1>
      
        <h2 id="tough"   >
          <a href="#tough" class="heading-link"><i class="fas fa-link"></i></a><a href="#tough" class="headerlink" title="tough"></a>tough</h2>
      <p>Functions on the module you get from <code>require(&#39;tough-cookie&#39;)</code>.  All can be used as pure functions and don’t need to be “bound”.</p>
<p><strong>Note</strong>: prior to 1.0.x, several of these functions took a <code>strict</code> parameter. This has since been removed from the API as it was no longer necessary.</p>

        <h3 id="parseDate-string"   >
          <a href="#parseDate-string" class="heading-link"><i class="fas fa-link"></i></a><a href="#parseDate-string" class="headerlink" title="parseDate(string)"></a><code>parseDate(string)</code></h3>
      <p>Parse a cookie date string into a <code>Date</code>.  Parses according to RFC6265 Section 5.1.1, not <code>Date.parse()</code>.</p>

        <h3 id="formatDate-date"   >
          <a href="#formatDate-date" class="heading-link"><i class="fas fa-link"></i></a><a href="#formatDate-date" class="headerlink" title="formatDate(date)"></a><code>formatDate(date)</code></h3>
      <p>Format a Date into a RFC1123 string (the RFC6265-recommended format).</p>

        <h3 id="canonicalDomain-str"   >
          <a href="#canonicalDomain-str" class="heading-link"><i class="fas fa-link"></i></a><a href="#canonicalDomain-str" class="headerlink" title="canonicalDomain(str)"></a><code>canonicalDomain(str)</code></h3>
      <p>Transforms a domain-name into a canonical domain-name.  The canonical domain-name is a trimmed, lowercased, stripped-of-leading-dot and optionally punycode-encoded domain-name (Section 5.1.2 of RFC6265).  For the most part, this function is idempotent (can be run again on its output without ill effects).</p>

        <h3 id="domainMatch-str-domStr-canonicalize-true"   >
          <a href="#domainMatch-str-domStr-canonicalize-true" class="heading-link"><i class="fas fa-link"></i></a><a href="#domainMatch-str-domStr-canonicalize-true" class="headerlink" title="domainMatch(str,domStr[,canonicalize=true])"></a><code>domainMatch(str,domStr[,canonicalize=true])</code></h3>
      <p>Answers “does this real domain match the domain in a cookie?”.  The <code>str</code> is the “current” domain-name and the <code>domStr</code> is the “cookie” domain-name.  Matches according to RFC6265 Section 5.1.3, but it helps to think of it as a “suffix match”.</p>
<p>The <code>canonicalize</code> parameter will run the other two parameters through <code>canonicalDomain</code> or not.</p>

        <h3 id="defaultPath-path"   >
          <a href="#defaultPath-path" class="heading-link"><i class="fas fa-link"></i></a><a href="#defaultPath-path" class="headerlink" title="defaultPath(path)"></a><code>defaultPath(path)</code></h3>
      <p>Given a current request&#x2F;response path, gives the Path apropriate for storing in a cookie.  This is basically the “directory” of a “file” in the path, but is specified by Section 5.1.4 of the RFC.</p>
<p>The <code>path</code> parameter MUST be <em>only</em> the pathname part of a URI (i.e. excludes the hostname, query, fragment, etc.).  This is the <code>.pathname</code> property of node’s <code>uri.parse()</code> output.</p>

        <h3 id="pathMatch-reqPath-cookiePath"   >
          <a href="#pathMatch-reqPath-cookiePath" class="heading-link"><i class="fas fa-link"></i></a><a href="#pathMatch-reqPath-cookiePath" class="headerlink" title="pathMatch(reqPath,cookiePath)"></a><code>pathMatch(reqPath,cookiePath)</code></h3>
      <p>Answers “does the request-path path-match a given cookie-path?” as per RFC6265 Section 5.1.4.  Returns a boolean.</p>
<p>This is essentially a prefix-match where <code>cookiePath</code> is a prefix of <code>reqPath</code>.</p>

        <h3 id="parse-cookieString-options"   >
          <a href="#parse-cookieString-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#parse-cookieString-options" class="headerlink" title="parse(cookieString[, options])"></a><code>parse(cookieString[, options])</code></h3>
      <p>alias for <code>Cookie.parse(cookieString[, options])</code></p>

        <h3 id="fromJSON-string"   >
          <a href="#fromJSON-string" class="heading-link"><i class="fas fa-link"></i></a><a href="#fromJSON-string" class="headerlink" title="fromJSON(string)"></a><code>fromJSON(string)</code></h3>
      <p>alias for <code>Cookie.fromJSON(string)</code></p>

        <h3 id="getPublicSuffix-hostname"   >
          <a href="#getPublicSuffix-hostname" class="heading-link"><i class="fas fa-link"></i></a><a href="#getPublicSuffix-hostname" class="headerlink" title="getPublicSuffix(hostname)"></a><code>getPublicSuffix(hostname)</code></h3>
      <p>Returns the public suffix of this hostname.  The public suffix is the shortest domain-name upon which a cookie can be set.  Returns <code>null</code> if the hostname cannot have cookies set for it.</p>
<p>For example: <code>www.example.com</code> and <code>www.subdomain.example.com</code> both have public suffix <code>example.com</code>.</p>
<p>For further information, see <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://publicsuffix.org/" >http://publicsuffix.org/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.  This module derives its list from that site. This call is currently a wrapper around <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/psl"><code>psl</code></a>‘s <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.npmjs.com/package/psl#pslgetdomain" >get() method</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</p>

        <h3 id="cookieCompare-a-b"   >
          <a href="#cookieCompare-a-b" class="heading-link"><i class="fas fa-link"></i></a><a href="#cookieCompare-a-b" class="headerlink" title="cookieCompare(a,b)"></a><code>cookieCompare(a,b)</code></h3>
      <p>For use with <code>.sort()</code>, sorts a list of cookies into the recommended order given in the RFC (Section 5.4 step 2). The sort algorithm is, in order of precedence:</p>
<ul>
<li>Longest <code>.path</code></li>
<li>oldest <code>.creation</code> (which has a 1ms precision, same as <code>Date</code>)</li>
<li>lowest <code>.creationIndex</code> (to get beyond the 1ms precision)</li>
</ul>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cookies = [ <span class="comment">/* unsorted array of Cookie objects */</span> ];</span><br><span class="line">cookies = cookies.<span class="title function_">sort</span>(cookieCompare);</span><br></pre></td></tr></table></div></figure>

<p><strong>Note</strong>: Since JavaScript’s <code>Date</code> is limited to a 1ms precision, cookies within the same milisecond are entirely possible. This is especially true when using the <code>now</code> option to <code>.setCookie()</code>. The <code>.creationIndex</code> property is a per-process global counter, assigned during construction with <code>new Cookie()</code>. This preserves the spirit of the RFC sorting: older cookies go first. This works great for <code>MemoryCookieStore</code>, since <code>Set-Cookie</code> headers are parsed in order, but may not be so great for distributed systems. Sophisticated <code>Store</code>s may wish to set this to some other <em>logical clock</em> such that if cookies A and B are created in the same millisecond, but cookie A is created before cookie B, then <code>A.creationIndex &lt; B.creationIndex</code>. If you want to alter the global counter, which you probably <em>shouldn’t</em> do, it’s stored in <code>Cookie.cookiesCreated</code>.</p>

        <h3 id="permuteDomain-domain"   >
          <a href="#permuteDomain-domain" class="heading-link"><i class="fas fa-link"></i></a><a href="#permuteDomain-domain" class="headerlink" title="permuteDomain(domain)"></a><code>permuteDomain(domain)</code></h3>
      <p>Generates a list of all possible domains that <code>domainMatch()</code> the parameter.  May be handy for implementing cookie stores.</p>

        <h3 id="permutePath-path"   >
          <a href="#permutePath-path" class="heading-link"><i class="fas fa-link"></i></a><a href="#permutePath-path" class="headerlink" title="permutePath(path)"></a><code>permutePath(path)</code></h3>
      <p>Generates a list of all possible paths that <code>pathMatch()</code> the parameter.  May be handy for implementing cookie stores.</p>

        <h2 id="Cookie"   >
          <a href="#Cookie" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2>
      <p>Exported via <code>tough.Cookie</code>.</p>

        <h3 id="Cookie-parse-cookieString-options"   >
          <a href="#Cookie-parse-cookieString-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie-parse-cookieString-options" class="headerlink" title="Cookie.parse(cookieString[, options])"></a><code>Cookie.parse(cookieString[, options])</code></h3>
      <p>Parses a single Cookie or Set-Cookie HTTP header into a <code>Cookie</code> object.  Returns <code>undefined</code> if the string can’t be parsed.</p>
<p>The options parameter is not required and currently has only one property:</p>
<ul>
<li><em>loose</em> - boolean - if <code>true</code> enable parsing of key-less cookies like <code>=abc</code> and <code>=</code>, which are not RFC-compliant.</li>
</ul>
<p>If options is not an object, it is ignored, which means you can use <code>Array#map</code> with it.</p>
<p>Here’s how to process the Set-Cookie header(s) on a node HTTP&#x2F;HTTPS response:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (res.<span class="property">headers</span>[<span class="string">&#x27;set-cookie&#x27;</span>] <span class="keyword">instanceof</span> <span class="title class_">Array</span>)</span><br><span class="line">  cookies = res.<span class="property">headers</span>[<span class="string">&#x27;set-cookie&#x27;</span>].<span class="title function_">map</span>(<span class="title class_">Cookie</span>.<span class="property">parse</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  cookies = [<span class="title class_">Cookie</span>.<span class="title function_">parse</span>(res.<span class="property">headers</span>[<span class="string">&#x27;set-cookie&#x27;</span>])];</span><br></pre></td></tr></table></div></figure>

<p><em>Note:</em> in version 2.3.3, tough-cookie limited the number of spaces before the <code>=</code> to 256 characters. This limitation has since been removed.<br>See <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/salesforce/tough-cookie/issues/92" >Issue 92</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="Properties"   >
          <a href="#Properties" class="heading-link"><i class="fas fa-link"></i></a><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3>
      <p>Cookie object properties:</p>
<ul>
<li><em>key</em> - string - the name or key of the cookie (default “”)</li>
<li><em>value</em> - string - the value of the cookie (default “”)</li>
<li><em>expires</em> - <code>Date</code> - if set, the <code>Expires=</code> attribute of the cookie (defaults to the string <code>&quot;Infinity&quot;</code>). See <code>setExpires()</code></li>
<li><em>maxAge</em> - seconds - if set, the <code>Max-Age=</code> attribute <em>in seconds</em> of the cookie.  May also be set to strings <code>&quot;Infinity&quot;</code> and <code>&quot;-Infinity&quot;</code> for non-expiry and immediate-expiry, respectively.  See <code>setMaxAge()</code></li>
<li><em>domain</em> - string - the <code>Domain=</code> attribute of the cookie</li>
<li><em>path</em> - string - the <code>Path=</code> of the cookie</li>
<li><em>secure</em> - boolean - the <code>Secure</code> cookie flag</li>
<li><em>httpOnly</em> - boolean - the <code>HttpOnly</code> cookie flag</li>
<li><em>sameSite</em> - string - the <code>SameSite</code> cookie attribute (from [RFC6265bis]); must be one of <code>none</code>, <code>lax</code>, or <code>strict</code></li>
<li><em>extensions</em> - <code>Array</code> - any unrecognized cookie attributes as strings (even if equal-signs inside)</li>
<li><em>creation</em> - <code>Date</code> - when this cookie was constructed</li>
<li><em>creationIndex</em> - number - set at construction, used to provide greater sort precision (please see <code>cookieCompare(a,b)</code> for a full explanation)</li>
</ul>
<p>After a cookie has been passed through <code>CookieJar.setCookie()</code> it will have the following additional attributes:</p>
<ul>
<li><em>hostOnly</em> - boolean - is this a host-only cookie (i.e. no Domain field was set, but was instead implied)</li>
<li><em>pathIsDefault</em> - boolean - if true, there was no Path field on the cookie and <code>defaultPath()</code> was used to derive one.</li>
<li><em>creation</em> - <code>Date</code> - <strong>modified</strong> from construction to when the cookie was added to the jar</li>
<li><em>lastAccessed</em> - <code>Date</code> - last time the cookie got accessed. Will affect cookie cleaning once implemented.  Using <code>cookiejar.getCookies(...)</code> will update this attribute.</li>
</ul>

        <h3 id="Cookie-properties"   >
          <a href="#Cookie-properties" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie-properties" class="headerlink" title="Cookie([{properties}])"></a><code>Cookie([&#123;properties&#125;])</code></h3>
      <p>Receives an options object that can contain any of the above Cookie properties, uses the default for unspecified properties.</p>

        <h3 id="toString-NaN"   >
          <a href="#toString-NaN" class="heading-link"><i class="fas fa-link"></i></a><a href="#toString-NaN" class="headerlink" title=".toString()"></a><code>.toString()</code></h3>
      <p>encode to a Set-Cookie header value.  The Expires cookie field is set using <code>formatDate()</code>, but is omitted entirely if <code>.expires</code> is <code>Infinity</code>.</p>

        <h3 id="cookieString"   >
          <a href="#cookieString" class="heading-link"><i class="fas fa-link"></i></a><a href="#cookieString" class="headerlink" title=".cookieString()"></a><code>.cookieString()</code></h3>
      <p>encode to a Cookie header value (i.e. the <code>.key</code> and <code>.value</code> properties joined with ‘&#x3D;’).</p>

        <h3 id="setExpires-String"   >
          <a href="#setExpires-String" class="heading-link"><i class="fas fa-link"></i></a><a href="#setExpires-String" class="headerlink" title=".setExpires(String)"></a><code>.setExpires(String)</code></h3>
      <p>sets the expiry based on a date-string passed through <code>parseDate()</code>.  If parseDate returns <code>null</code> (i.e. can’t parse this date string), <code>.expires</code> is set to <code>&quot;Infinity&quot;</code> (a string) is set.</p>

        <h3 id="setMaxAge-number"   >
          <a href="#setMaxAge-number" class="heading-link"><i class="fas fa-link"></i></a><a href="#setMaxAge-number" class="headerlink" title=".setMaxAge(number)"></a><code>.setMaxAge(number)</code></h3>
      <p>sets the maxAge in seconds.  Coerces <code>-Infinity</code> to <code>&quot;-Infinity&quot;</code> and <code>Infinity</code> to <code>&quot;Infinity&quot;</code> so it JSON serializes correctly.</p>

        <h3 id="expiryTime-now-Date-now"   >
          <a href="#expiryTime-now-Date-now" class="heading-link"><i class="fas fa-link"></i></a><a href="#expiryTime-now-Date-now" class="headerlink" title=".expiryTime([now=Date.now()])"></a><code>.expiryTime([now=Date.now()])</code></h3>
      
        <h3 id="expiryDate-now-Date-now"   >
          <a href="#expiryDate-now-Date-now" class="heading-link"><i class="fas fa-link"></i></a><a href="#expiryDate-now-Date-now" class="headerlink" title=".expiryDate([now=Date.now()])"></a><code>.expiryDate([now=Date.now()])</code></h3>
      <p>expiryTime() Computes the absolute unix-epoch milliseconds that this cookie expires. expiryDate() works similarly, except it returns a <code>Date</code> object.  Note that in both cases the <code>now</code> parameter should be milliseconds.</p>
<p>Max-Age takes precedence over Expires (as per the RFC). The <code>.creation</code> attribute – or, by default, the <code>now</code> parameter – is used to offset the <code>.maxAge</code> attribute.</p>
<p>If Expires (<code>.expires</code>) is set, that’s returned.</p>
<p>Otherwise, <code>expiryTime()</code> returns <code>Infinity</code> and <code>expiryDate()</code> returns a <code>Date</code> object for “Tue, 19 Jan 2038 03:14:07 GMT” (latest date that can be expressed by a 32-bit <code>time_t</code>; the common limit for most user-agents).</p>

        <h3 id="TTL-now-Date-now"   >
          <a href="#TTL-now-Date-now" class="heading-link"><i class="fas fa-link"></i></a><a href="#TTL-now-Date-now" class="headerlink" title=".TTL([now=Date.now()])"></a><code>.TTL([now=Date.now()])</code></h3>
      <p>compute the TTL relative to <code>now</code> (milliseconds).  The same precedence rules as for <code>expiryTime</code>&#x2F;<code>expiryDate</code> apply.</p>
<p>The “number” <code>Infinity</code> is returned for cookies without an explicit expiry and <code>0</code> is returned if the cookie is expired.  Otherwise a time-to-live in milliseconds is returned.</p>

        <h3 id="canonicalizedDomain"   >
          <a href="#canonicalizedDomain" class="heading-link"><i class="fas fa-link"></i></a><a href="#canonicalizedDomain" class="headerlink" title=".canonicalizedDomain()"></a><code>.canonicalizedDomain()</code></h3>
      
        <h3 id="cdomain"   >
          <a href="#cdomain" class="heading-link"><i class="fas fa-link"></i></a><a href="#cdomain" class="headerlink" title=".cdomain()"></a><code>.cdomain()</code></h3>
      <p>return the canonicalized <code>.domain</code> field.  This is lower-cased and punycode (RFC3490) encoded if the domain has any non-ASCII characters.</p>

        <h3 id="toJSON"   >
          <a href="#toJSON" class="heading-link"><i class="fas fa-link"></i></a><a href="#toJSON" class="headerlink" title=".toJSON()"></a><code>.toJSON()</code></h3>
      <p>For convenience in using <code>JSON.serialize(cookie)</code>. Returns a plain-old <code>Object</code> that can be JSON-serialized.</p>
<p>Any <code>Date</code> properties (i.e., <code>.expires</code>, <code>.creation</code>, and <code>.lastAccessed</code>) are exported in ISO format (<code>.toISOString()</code>).</p>
<p><strong>NOTE</strong>: Custom <code>Cookie</code> properties will be discarded. In tough-cookie 1.x, since there was no <code>.toJSON</code> method explicitly defined, all enumerable properties were captured. If you want a property to be serialized, add the property name to the <code>Cookie.serializableProperties</code> Array.</p>

        <h3 id="Cookie-fromJSON-strOrObj"   >
          <a href="#Cookie-fromJSON-strOrObj" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie-fromJSON-strOrObj" class="headerlink" title="Cookie.fromJSON(strOrObj)"></a><code>Cookie.fromJSON(strOrObj)</code></h3>
      <p>Does the reverse of <code>cookie.toJSON()</code>. If passed a string, will <code>JSON.parse()</code> that first.</p>
<p>Any <code>Date</code> properties (i.e., <code>.expires</code>, <code>.creation</code>, and <code>.lastAccessed</code>) are parsed via <code>Date.parse()</code>, not the tough-cookie <code>parseDate</code>, since it’s JavaScript&#x2F;JSON-y timestamps being handled at this layer.</p>
<p>Returns <code>null</code> upon JSON parsing error.</p>

        <h3 id="clone"   >
          <a href="#clone" class="heading-link"><i class="fas fa-link"></i></a><a href="#clone" class="headerlink" title=".clone()"></a><code>.clone()</code></h3>
      <p>Does a deep clone of this cookie, exactly implemented as <code>Cookie.fromJSON(cookie.toJSON())</code>.</p>

        <h3 id="validate"   >
          <a href="#validate" class="heading-link"><i class="fas fa-link"></i></a><a href="#validate" class="headerlink" title=".validate()"></a><code>.validate()</code></h3>
      <p>Status: <em>IN PROGRESS</em>. Works for a few things, but is by no means comprehensive.</p>
<p>validates cookie attributes for semantic correctness.  Useful for “lint” checking any Set-Cookie headers you generate.  For now, it returns a boolean, but eventually could return a reason string – you can future-proof with this construct:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (cookie.<span class="title function_">validate</span>() === <span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// it&#x27;s tasty</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// yuck!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



        <h2 id="CookieJar"   >
          <a href="#CookieJar" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar" class="headerlink" title="CookieJar"></a>CookieJar</h2>
      <p>Exported via <code>tough.CookieJar</code>.</p>

        <h3 id="CookieJar-store-options"   >
          <a href="#CookieJar-store-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar-store-options" class="headerlink" title="CookieJar([store],[options])"></a><code>CookieJar([store],[options])</code></h3>
      <p>Simply use <code>new CookieJar()</code>.  If you’d like to use a custom store, pass that to the constructor otherwise a <code>MemoryCookieStore</code> will be created and used.</p>
<p>The <code>options</code> object can be omitted and can have the following properties:</p>
<ul>
<li><em>rejectPublicSuffixes</em> - boolean - default <code>true</code> - reject cookies with domains like “com” and “co.uk”</li>
<li><em>looseMode</em> - boolean - default <code>false</code> - accept malformed cookies like <code>bar</code> and <code>=bar</code>, which have an implied empty name.</li>
<li><em>prefixSecurity</em> - string - default <code>silent</code> - set to <code>&#39;unsafe-disabled&#39;</code>, <code>&#39;silent&#39;</code>, or <code>&#39;strict&#39;</code>. See [Cookie Prefixes] below.</li>
<li><em>allowSpecialUseDomain</em> - boolean - default <code>false</code> - accepts special-use domain suffixes, such as <code>local</code>. Useful for testing purposes.<br>This is not in the standard, but is used sometimes on the web and is accepted by (most) browsers.</li>
</ul>
<p>Since eventually this module would like to support database&#x2F;remote&#x2F;etc. CookieJars, continuation passing style is used for CookieJar methods.</p>

        <h3 id="setCookie-cookieOrString-currentUrl-options-cb-err-cookie"   >
          <a href="#setCookie-cookieOrString-currentUrl-options-cb-err-cookie" class="heading-link"><i class="fas fa-link"></i></a><a href="#setCookie-cookieOrString-currentUrl-options-cb-err-cookie" class="headerlink" title=".setCookie(cookieOrString, currentUrl, [{options},] cb(err,cookie))"></a><code>.setCookie(cookieOrString, currentUrl, [&#123;options&#125;,] cb(err,cookie))</code></h3>
      <p>Attempt to set the cookie in the cookie jar.  If the operation fails, an error will be given to the callback <code>cb</code>, otherwise the cookie is passed through.  The cookie will have updated <code>.creation</code>, <code>.lastAccessed</code> and <code>.hostOnly</code> properties.</p>
<p>The <code>options</code> object can be omitted and can have the following properties:</p>
<ul>
<li><em>http</em> - boolean - default <code>true</code> - indicates if this is an HTTP or non-HTTP API.  Affects HttpOnly cookies.</li>
<li><em>secure</em> - boolean - autodetect from url - indicates if this is a “Secure” API.  If the currentUrl starts with <code>https:</code> or <code>wss:</code> then this is defaulted to <code>true</code>, otherwise <code>false</code>.</li>
<li><em>now</em> - Date - default <code>new Date()</code> - what to use for the creation&#x2F;access time of cookies</li>
<li><em>ignoreError</em> - boolean - default <code>false</code> - silently ignore things like parse errors and invalid domains.  <code>Store</code> errors aren’t ignored by this option.</li>
<li><em>sameSiteContext</em> - string - default unset - set to <code>&#39;none&#39;</code>, <code>&#39;lax&#39;</code>, or <code>&#39;strict&#39;</code> See [SameSite Cookies] below.</li>
</ul>
<p>As per the RFC, the <code>.hostOnly</code> property is set if there was no “Domain&#x3D;” parameter in the cookie string (or <code>.domain</code> was null on the Cookie object).  The <code>.domain</code> property is set to the fully-qualified hostname of <code>currentUrl</code> in this case.  Matching this cookie requires an exact hostname match (not a <code>domainMatch</code> as per usual).</p>

        <h3 id="setCookieSync-cookieOrString-currentUrl-options"   >
          <a href="#setCookieSync-cookieOrString-currentUrl-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#setCookieSync-cookieOrString-currentUrl-options" class="headerlink" title=".setCookieSync(cookieOrString, currentUrl, [{options}])"></a><code>.setCookieSync(cookieOrString, currentUrl, [&#123;options&#125;])</code></h3>
      <p>Synchronous version of <code>setCookie</code>; only works with synchronous stores (e.g. the default <code>MemoryCookieStore</code>).</p>

        <h3 id="getCookies-currentUrl-options-cb-err-cookies"   >
          <a href="#getCookies-currentUrl-options-cb-err-cookies" class="heading-link"><i class="fas fa-link"></i></a><a href="#getCookies-currentUrl-options-cb-err-cookies" class="headerlink" title=".getCookies(currentUrl, [{options},] cb(err,cookies))"></a><code>.getCookies(currentUrl, [&#123;options&#125;,] cb(err,cookies))</code></h3>
      <p>Retrieve the list of cookies that can be sent in a Cookie header for the current url.</p>
<p>If an error is encountered, that’s passed as <code>err</code> to the callback, otherwise an <code>Array</code> of <code>Cookie</code> objects is passed.  The array is sorted with <code>cookieCompare()</code> unless the <code>&#123;sort:false&#125;</code> option is given.</p>
<p>The <code>options</code> object can be omitted and can have the following properties:</p>
<ul>
<li><em>http</em> - boolean - default <code>true</code> - indicates if this is an HTTP or non-HTTP API.  Affects HttpOnly cookies.</li>
<li><em>secure</em> - boolean - autodetect from url - indicates if this is a “Secure” API.  If the currentUrl starts with <code>https:</code> or <code>wss:</code> then this is defaulted to <code>true</code>, otherwise <code>false</code>.</li>
<li><em>now</em> - Date - default <code>new Date()</code> - what to use for the creation&#x2F;access time of cookies</li>
<li><em>expire</em> - boolean - default <code>true</code> - perform expiry-time checking of cookies and asynchronously remove expired cookies from the store.  Using <code>false</code> will return expired cookies and <strong>not</strong> remove them from the store (which is useful for replaying Set-Cookie headers, potentially).</li>
<li><em>allPaths</em> - boolean - default <code>false</code> - if <code>true</code>, do not scope cookies by path. The default uses RFC-compliant path scoping. <strong>Note</strong>: may not be supported by the underlying store (the default <code>MemoryCookieStore</code> supports it).</li>
<li><em>sameSiteContext</em> - string - default unset - Set this to <code>&#39;none&#39;</code>, <code>&#39;lax&#39;</code> or <code>&#39;strict&#39;</code> to enforce SameSite cookies upon retrival. See [SameSite Cookies] below.</li>
</ul>
<p>The <code>.lastAccessed</code> property of the returned cookies will have been updated.</p>

        <h3 id="getCookiesSync-currentUrl-options"   >
          <a href="#getCookiesSync-currentUrl-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#getCookiesSync-currentUrl-options" class="headerlink" title=".getCookiesSync(currentUrl, [{options}])"></a><code>.getCookiesSync(currentUrl, [&#123;options&#125;])</code></h3>
      <p>Synchronous version of <code>getCookies</code>; only works with synchronous stores (e.g. the default <code>MemoryCookieStore</code>).</p>

        <h3 id="getCookieString"   >
          <a href="#getCookieString" class="heading-link"><i class="fas fa-link"></i></a><a href="#getCookieString" class="headerlink" title=".getCookieString(...)"></a><code>.getCookieString(...)</code></h3>
      <p>Accepts the same options as <code>.getCookies()</code> but passes a string suitable for a Cookie header rather than an array to the callback.  Simply maps the <code>Cookie</code> array via <code>.cookieString()</code>.</p>

        <h3 id="getCookieStringSync"   >
          <a href="#getCookieStringSync" class="heading-link"><i class="fas fa-link"></i></a><a href="#getCookieStringSync" class="headerlink" title=".getCookieStringSync(...)"></a><code>.getCookieStringSync(...)</code></h3>
      <p>Synchronous version of <code>getCookieString</code>; only works with synchronous stores (e.g. the default <code>MemoryCookieStore</code>).</p>

        <h3 id="getSetCookieStrings"   >
          <a href="#getSetCookieStrings" class="heading-link"><i class="fas fa-link"></i></a><a href="#getSetCookieStrings" class="headerlink" title=".getSetCookieStrings(...)"></a><code>.getSetCookieStrings(...)</code></h3>
      <p>Returns an array of strings suitable for <strong>Set-Cookie</strong> headers. Accepts the same options as <code>.getCookies()</code>.  Simply maps the cookie array via <code>.toString()</code>.</p>

        <h3 id="getSetCookieStringsSync"   >
          <a href="#getSetCookieStringsSync" class="heading-link"><i class="fas fa-link"></i></a><a href="#getSetCookieStringsSync" class="headerlink" title=".getSetCookieStringsSync(...)"></a><code>.getSetCookieStringsSync(...)</code></h3>
      <p>Synchronous version of <code>getSetCookieStrings</code>; only works with synchronous stores (e.g. the default <code>MemoryCookieStore</code>).</p>

        <h3 id="serialize-cb-err-serializedObject"   >
          <a href="#serialize-cb-err-serializedObject" class="heading-link"><i class="fas fa-link"></i></a><a href="#serialize-cb-err-serializedObject" class="headerlink" title=".serialize(cb(err,serializedObject))"></a><code>.serialize(cb(err,serializedObject))</code></h3>
      <p>Serialize the Jar if the underlying store supports <code>.getAllCookies</code>.</p>
<p><strong>NOTE</strong>: Custom <code>Cookie</code> properties will be discarded. If you want a property to be serialized, add the property name to the <code>Cookie.serializableProperties</code> Array.</p>
<p>See [Serialization Format].</p>

        <h3 id="serializeSync"   >
          <a href="#serializeSync" class="heading-link"><i class="fas fa-link"></i></a><a href="#serializeSync" class="headerlink" title=".serializeSync()"></a><code>.serializeSync()</code></h3>
      <p>Sync version of .serialize</p>

        <h3 id="toJSON-1"   >
          <a href="#toJSON-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#toJSON-1" class="headerlink" title=".toJSON()"></a><code>.toJSON()</code></h3>
      <p>Alias of .serializeSync() for the convenience of <code>JSON.stringify(cookiejar)</code>.</p>

        <h3 id="CookieJar-deserialize-serialized-store-cb-err-object"   >
          <a href="#CookieJar-deserialize-serialized-store-cb-err-object" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar-deserialize-serialized-store-cb-err-object" class="headerlink" title="CookieJar.deserialize(serialized, [store], cb(err,object))"></a><code>CookieJar.deserialize(serialized, [store], cb(err,object))</code></h3>
      <p>A new Jar is created and the serialized Cookies are added to the underlying store. Each <code>Cookie</code> is added via <code>store.putCookie</code> in the order in which they appear in the serialization.</p>
<p>The <code>store</code> argument is optional, but should be an instance of <code>Store</code>. By default, a new instance of <code>MemoryCookieStore</code> is created.</p>
<p>As a convenience, if <code>serialized</code> is a string, it is passed through <code>JSON.parse</code> first. If that throws an error, this is passed to the callback.</p>

        <h3 id="CookieJar-deserializeSync-serialized-store"   >
          <a href="#CookieJar-deserializeSync-serialized-store" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar-deserializeSync-serialized-store" class="headerlink" title="CookieJar.deserializeSync(serialized, [store])"></a><code>CookieJar.deserializeSync(serialized, [store])</code></h3>
      <p>Sync version of <code>.deserialize</code>.  <em>Note</em> that the <code>store</code> must be synchronous for this to work.</p>

        <h3 id="CookieJar-fromJSON-string"   >
          <a href="#CookieJar-fromJSON-string" class="heading-link"><i class="fas fa-link"></i></a><a href="#CookieJar-fromJSON-string" class="headerlink" title="CookieJar.fromJSON(string)"></a><code>CookieJar.fromJSON(string)</code></h3>
      <p>Alias of <code>.deserializeSync</code> to provide consistency with <code>Cookie.fromJSON()</code>.</p>

        <h3 id="clone-store-cb-err-newJar"   >
          <a href="#clone-store-cb-err-newJar" class="heading-link"><i class="fas fa-link"></i></a><a href="#clone-store-cb-err-newJar" class="headerlink" title=".clone([store,]cb(err,newJar))"></a><code>.clone([store,]cb(err,newJar))</code></h3>
      <p>Produces a deep clone of this jar. Modifications to the original won’t affect the clone, and vice versa.</p>
<p>The <code>store</code> argument is optional, but should be an instance of <code>Store</code>. By default, a new instance of <code>MemoryCookieStore</code> is created. Transferring between store types is supported so long as the source implements <code>.getAllCookies()</code> and the destination implements <code>.putCookie()</code>.</p>

        <h3 id="cloneSync-store"   >
          <a href="#cloneSync-store" class="heading-link"><i class="fas fa-link"></i></a><a href="#cloneSync-store" class="headerlink" title=".cloneSync([store])"></a><code>.cloneSync([store])</code></h3>
      <p>Synchronous version of <code>.clone</code>, returning a new <code>CookieJar</code> instance.</p>
<p>The <code>store</code> argument is optional, but must be a <em>synchronous</em> <code>Store</code> instance if specified. If not passed, a new instance of <code>MemoryCookieStore</code> is used.</p>
<p>The <em>source</em> and <em>destination</em> must both be synchronous <code>Store</code>s. If one or both stores are asynchronous, use <code>.clone</code> instead. Recall that <code>MemoryCookieStore</code> supports both synchronous and asynchronous API calls.</p>

        <h3 id="removeAllCookies-cb-err"   >
          <a href="#removeAllCookies-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#removeAllCookies-cb-err" class="headerlink" title=".removeAllCookies(cb(err))"></a><code>.removeAllCookies(cb(err))</code></h3>
      <p>Removes all cookies from the jar.</p>
<p>This is a new backwards-compatible feature of <code>tough-cookie</code> version 2.5, so not all Stores will implement it efficiently. For Stores that do not implement <code>removeAllCookies</code>, the fallback is to call <code>removeCookie</code> after <code>getAllCookies</code>. If <code>getAllCookies</code> fails or isn’t implemented in the Store, that error is returned. If one or more of the <code>removeCookie</code> calls fail, only the first error is returned.</p>

        <h3 id="removeAllCookiesSync"   >
          <a href="#removeAllCookiesSync" class="heading-link"><i class="fas fa-link"></i></a><a href="#removeAllCookiesSync" class="headerlink" title=".removeAllCookiesSync()"></a><code>.removeAllCookiesSync()</code></h3>
      <p>Sync version of <code>.removeAllCookies()</code></p>

        <h2 id="Store"   >
          <a href="#Store" class="heading-link"><i class="fas fa-link"></i></a><a href="#Store" class="headerlink" title="Store"></a>Store</h2>
      <p>Base class for CookieJar stores. Available as <code>tough.Store</code>.</p>

        <h2 id="Store-API"   >
          <a href="#Store-API" class="heading-link"><i class="fas fa-link"></i></a><a href="#Store-API" class="headerlink" title="Store API"></a>Store API</h2>
      <p>The storage model for each <code>CookieJar</code> instance can be replaced with a custom implementation.  The default is <code>MemoryCookieStore</code> which can be found in the <code>lib/memstore.js</code> file.  The API uses continuation-passing-style to allow for asynchronous stores.</p>
<p>Stores should inherit from the base <code>Store</code> class, which is available as <code>require(&#39;tough-cookie&#39;).Store</code>.</p>
<p>Stores are asynchronous by default, but if <code>store.synchronous</code> is set to <code>true</code>, then the <code>*Sync</code> methods on the of the containing <code>CookieJar</code> can be used (however, the continuation-passing style</p>
<p>All <code>domain</code> parameters will have been normalized before calling.</p>
<p>The Cookie store must have all of the following methods.</p>

        <h3 id="store-findCookie-domain-path-key-cb-err-cookie"   >
          <a href="#store-findCookie-domain-path-key-cb-err-cookie" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-findCookie-domain-path-key-cb-err-cookie" class="headerlink" title="store.findCookie(domain, path, key, cb(err,cookie))"></a><code>store.findCookie(domain, path, key, cb(err,cookie))</code></h3>
      <p>Retrieve a cookie with the given domain, path and key (a.k.a. name).  The RFC maintains that exactly one of these cookies should exist in a store.  If the store is using versioning, this means that the latest&#x2F;newest such cookie should be returned.</p>
<p>Callback takes an error and the resulting <code>Cookie</code> object.  If no cookie is found then <code>null</code> MUST be passed instead (i.e. not an error).</p>

        <h3 id="store-findCookies-domain-path-cb-err-cookies"   >
          <a href="#store-findCookies-domain-path-cb-err-cookies" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-findCookies-domain-path-cb-err-cookies" class="headerlink" title="store.findCookies(domain, path, cb(err,cookies))"></a><code>store.findCookies(domain, path, cb(err,cookies))</code></h3>
      <p>Locates cookies matching the given domain and path.  This is most often called in the context of <code>cookiejar.getCookies()</code> above.</p>
<p>If no cookies are found, the callback MUST be passed an empty array.</p>
<p>The resulting list will be checked for applicability to the current request according to the RFC (domain-match, path-match, http-only-flag, secure-flag, expiry, etc.), so it’s OK to use an optimistic search algorithm when implementing this method.  However, the search algorithm used SHOULD try to find cookies that <code>domainMatch()</code> the domain and <code>pathMatch()</code> the path in order to limit the amount of checking that needs to be done.</p>
<p>As of version 0.9.12, the <code>allPaths</code> option to <code>cookiejar.getCookies()</code> above will cause the path here to be <code>null</code>.  If the path is <code>null</code>, path-matching MUST NOT be performed (i.e. domain-matching only).</p>

        <h3 id="store-putCookie-cookie-cb-err"   >
          <a href="#store-putCookie-cookie-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-putCookie-cookie-cb-err" class="headerlink" title="store.putCookie(cookie, cb(err))"></a><code>store.putCookie(cookie, cb(err))</code></h3>
      <p>Adds a new cookie to the store.  The implementation SHOULD replace any existing cookie with the same <code>.domain</code>, <code>.path</code>, and <code>.key</code> properties – depending on the nature of the implementation, it’s possible that between the call to <code>fetchCookie</code> and <code>putCookie</code> that a duplicate <code>putCookie</code> can occur.</p>
<p>The <code>cookie</code> object MUST NOT be modified; the caller will have already updated the <code>.creation</code> and <code>.lastAccessed</code> properties.</p>
<p>Pass an error if the cookie cannot be stored.</p>

        <h3 id="store-updateCookie-oldCookie-newCookie-cb-err"   >
          <a href="#store-updateCookie-oldCookie-newCookie-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-updateCookie-oldCookie-newCookie-cb-err" class="headerlink" title="store.updateCookie(oldCookie, newCookie, cb(err))"></a><code>store.updateCookie(oldCookie, newCookie, cb(err))</code></h3>
      <p>Update an existing cookie.  The implementation MUST update the <code>.value</code> for a cookie with the same <code>domain</code>, <code>.path</code> and <code>.key</code>.  The implementation SHOULD check that the old value in the store is equivalent to <code>oldCookie</code> - how the conflict is resolved is up to the store.</p>
<p>The <code>.lastAccessed</code> property will always be different between the two objects (to the precision possible via JavaScript’s clock).  Both <code>.creation</code> and <code>.creationIndex</code> are guaranteed to be the same.  Stores MAY ignore or defer the <code>.lastAccessed</code> change at the cost of affecting how cookies are selected for automatic deletion (e.g., least-recently-used, which is up to the store to implement).</p>
<p>Stores may wish to optimize changing the <code>.value</code> of the cookie in the store versus storing a new cookie.  If the implementation doesn’t define this method a stub that calls <code>putCookie(newCookie,cb)</code> will be added to the store object.</p>
<p>The <code>newCookie</code> and <code>oldCookie</code> objects MUST NOT be modified.</p>
<p>Pass an error if the newCookie cannot be stored.</p>

        <h3 id="store-removeCookie-domain-path-key-cb-err"   >
          <a href="#store-removeCookie-domain-path-key-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-removeCookie-domain-path-key-cb-err" class="headerlink" title="store.removeCookie(domain, path, key, cb(err))"></a><code>store.removeCookie(domain, path, key, cb(err))</code></h3>
      <p>Remove a cookie from the store (see notes on <code>findCookie</code> about the uniqueness constraint).</p>
<p>The implementation MUST NOT pass an error if the cookie doesn’t exist; only pass an error due to the failure to remove an existing cookie.</p>

        <h3 id="store-removeCookies-domain-path-cb-err"   >
          <a href="#store-removeCookies-domain-path-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-removeCookies-domain-path-cb-err" class="headerlink" title="store.removeCookies(domain, path, cb(err))"></a><code>store.removeCookies(domain, path, cb(err))</code></h3>
      <p>Removes matching cookies from the store.  The <code>path</code> parameter is optional, and if missing means all paths in a domain should be removed.</p>
<p>Pass an error ONLY if removing any existing cookies failed.</p>

        <h3 id="store-removeAllCookies-cb-err"   >
          <a href="#store-removeAllCookies-cb-err" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-removeAllCookies-cb-err" class="headerlink" title="store.removeAllCookies(cb(err))"></a><code>store.removeAllCookies(cb(err))</code></h3>
      <p><em>Optional</em>. Removes all cookies from the store.</p>
<p>Pass an error if one or more cookies can’t be removed.</p>
<p><strong>Note</strong>: New method as of <code>tough-cookie</code> version 2.5, so not all Stores will implement this, plus some stores may choose not to implement this.</p>

        <h3 id="store-getAllCookies-cb-err-cookies"   >
          <a href="#store-getAllCookies-cb-err-cookies" class="heading-link"><i class="fas fa-link"></i></a><a href="#store-getAllCookies-cb-err-cookies" class="headerlink" title="store.getAllCookies(cb(err, cookies))"></a><code>store.getAllCookies(cb(err, cookies))</code></h3>
      <p><em>Optional</em>. Produces an <code>Array</code> of all cookies during <code>jar.serialize()</code>. The items in the array can be true <code>Cookie</code> objects or generic <code>Object</code>s with the [Serialization Format] data structure.</p>
<p>Cookies SHOULD be returned in creation order to preserve sorting via <code>compareCookies()</code>. For reference, <code>MemoryCookieStore</code> will sort by <code>.creationIndex</code> since it uses true <code>Cookie</code> objects internally. If you don’t return the cookies in creation order, they’ll still be sorted by creation time, but this only has a precision of 1ms.  See <code>compareCookies</code> for more detail.</p>
<p>Pass an error if retrieval fails.</p>
<p><strong>Note</strong>: not all Stores can implement this due to technical limitations, so it is optional.</p>

        <h2 id="MemoryCookieStore"   >
          <a href="#MemoryCookieStore" class="heading-link"><i class="fas fa-link"></i></a><a href="#MemoryCookieStore" class="headerlink" title="MemoryCookieStore"></a>MemoryCookieStore</h2>
      <p>Inherits from <code>Store</code>.</p>
<p>A just-in-memory CookieJar synchronous store implementation, used by default. Despite being a synchronous implementation, it’s usable with both the synchronous and asynchronous forms of the <code>CookieJar</code> API. Supports serialization, <code>getAllCookies</code>, and <code>removeAllCookies</code>.</p>

        <h2 id="Community-Cookie-Stores"   >
          <a href="#Community-Cookie-Stores" class="heading-link"><i class="fas fa-link"></i></a><a href="#Community-Cookie-Stores" class="headerlink" title="Community Cookie Stores"></a>Community Cookie Stores</h2>
      <p>These are some Store implementations authored and maintained by the community. They aren’t official and we don’t vouch for them but you may be interested to have a look:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/JSBizon/db-cookie-store"><code>db-cookie-store</code></a>: SQL including SQLite-based databases</li>
<li><a target="_blank" rel="noopener" href="https://github.com/JSBizon/file-cookie-store"><code>file-cookie-store</code></a>: Netscape cookie file format on disk</li>
<li><a target="_blank" rel="noopener" href="https://github.com/benkroeger/redis-cookie-store"><code>redis-cookie-store</code></a>: Redis</li>
<li><a target="_blank" rel="noopener" href="https://github.com/mitsuru/tough-cookie-filestore"><code>tough-cookie-filestore</code></a>: JSON on disk</li>
<li><a target="_blank" rel="noopener" href="https://github.com/exponentjs/tough-cookie-web-storage-store"><code>tough-cookie-web-storage-store</code></a>: DOM localStorage and sessionStorage</li>
</ul>

        <h1 id="Serialization-Format"   >
          <a href="#Serialization-Format" class="heading-link"><i class="fas fa-link"></i></a><a href="#Serialization-Format" class="headerlink" title="Serialization Format"></a>Serialization Format</h1>
      <p><strong>NOTE</strong>: if you want to have custom <code>Cookie</code> properties serialized, add the property name to <code>Cookie.serializableProperties</code>.</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// The version of tough-cookie that serialized this jar.</span></span><br><span class="line">  <span class="attr">version</span>: <span class="string">&#x27;tough-cookie@1.x.y&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// add the store type, to make humans happy:</span></span><br><span class="line">  <span class="attr">storeType</span>: <span class="string">&#x27;MemoryCookieStore&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// CookieJar configuration:</span></span><br><span class="line">  <span class="attr">rejectPublicSuffixes</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// ... future items go here</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Gets filled from jar.store.getAllCookies():</span></span><br><span class="line">  <span class="attr">cookies</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">key</span>: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      <span class="comment">/* other Cookie.serializableProperties go here */</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h1 id="RFC6265bis"   >
          <a href="#RFC6265bis" class="heading-link"><i class="fas fa-link"></i></a><a href="#RFC6265bis" class="headerlink" title="RFC6265bis"></a>RFC6265bis</h1>
      <p>Support for RFC6265bis revision 02 is being developed. Since this is a bit of an omnibus revision to the RFC6252, support is broken up into the functional areas.</p>

        <h2 id="Leave-Secure-Cookies-Alone"   >
          <a href="#Leave-Secure-Cookies-Alone" class="heading-link"><i class="fas fa-link"></i></a><a href="#Leave-Secure-Cookies-Alone" class="headerlink" title="Leave Secure Cookies Alone"></a>Leave Secure Cookies Alone</h2>
      <p>Not yet supported.</p>
<p>This change makes it so that if a cookie is sent from the server to the client with a <code>Secure</code> attribute, the channel must also be secure or the cookie is ignored.</p>

        <h2 id="SameSite-Cookies"   >
          <a href="#SameSite-Cookies" class="heading-link"><i class="fas fa-link"></i></a><a href="#SameSite-Cookies" class="headerlink" title="SameSite Cookies"></a>SameSite Cookies</h2>
      <p>Supported.</p>
<p>This change makes it possible for servers, and supporting clients, to mitigate certain types of CSRF attacks by disallowing <code>SameSite</code> cookies from being sent cross-origin.</p>
<p>On the Cookie object itself, you can get&#x2F;set the <code>.sameSite</code> attribute, which will be serialized into the <code>SameSite=</code> cookie attribute. When unset or <code>undefined</code>, no <code>SameSite=</code> attribute will be serialized. The valid values of this attribute are <code>&#39;none&#39;</code>, <code>&#39;lax&#39;</code>, or <code>&#39;strict&#39;</code>. Other values will be serialized as-is.</p>
<p>When parsing cookies with a <code>SameSite</code> cookie attribute, values other than <code>&#39;lax&#39;</code> or <code>&#39;strict&#39;</code> are parsed as <code>&#39;none&#39;</code>. For example, <code>SomeCookie=SomeValue; SameSite=garbage</code> will parse so that <code>cookie.sameSite === &#39;none&#39;</code>.</p>
<p>In order to support SameSite cookies, you must provide a <code>sameSiteContext</code> option to <em>both</em> <code>setCookie</code> and <code>getCookies</code>. Valid values for this option are just like for the Cookie object, but have particular meanings:</p>
<ol>
<li><code>&#39;strict&#39;</code> mode - If the request is on the same “site for cookies” (see the RFC draft for what this means), pass this option to add a layer of defense against CSRF.</li>
<li><code>&#39;lax&#39;</code> mode - If the request is from another site, <em>but</em> is directly because of navigation by the user, e.g., <code>&lt;link type=prefetch&gt;</code> or <code>&lt;a href=&quot;...&quot;&gt;</code>, pass <code>sameSiteContext: &#39;lax&#39;</code>.</li>
<li><code>&#39;none&#39;</code> - Otherwise, pass <code>sameSiteContext: &#39;none&#39;</code> (this indicates a cross-origin request).</li>
<li>unset&#x2F;<code>undefined</code> - SameSite <strong>will not</strong> be enforced! This can be a valid use-case for when CSRF isn’t in the threat model of the system being built.</li>
</ol>
<p>It is highly recommended that you read RFC 6265bis for fine details on SameSite cookies. In particular <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-02#section-8.8" >Section 8.8</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> discusses security considerations and defense in depth.</p>

        <h2 id="Cookie-Prefixes"   >
          <a href="#Cookie-Prefixes" class="heading-link"><i class="fas fa-link"></i></a><a href="#Cookie-Prefixes" class="headerlink" title="Cookie Prefixes"></a>Cookie Prefixes</h2>
      <p>Supported.</p>
<p>Cookie prefixes are a way to indicate that a given cookie was set with a set of attributes simply by inspecting the first few characters of the cookie’s name.</p>
<p>Cookie prefixes are defined in <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-4.1.3" >Section 4.1.3 of 6265bis</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>. Two prefixes are defined:</p>
<ol>
<li><code>&quot;__Secure-&quot; Prefix</code>: If a cookie’s name begins with a case-sensitive match for the string “__Secure-“, then the cookie will have been set with a “Secure” attribute.</li>
<li><code>&quot;__Host-&quot; Prefix</code>: If a cookie’s name begins with a case-sensitive match for the string “__Host-“, then the cookie will have been set with a “Secure” attribute, a “Path” attribute with a value of “&#x2F;“, and no “Domain” attribute.</li>
</ol>
<p>If <code>prefixSecurity</code> is enabled for <code>CookieJar</code>, then cookies that match the prefixes defined above but do not obey the attribute restrictions will not be added.</p>
<p>You can define this functionality by passing in <code>prefixSecurity</code> option to <code>CookieJar</code>. It can be one of 3 values:</p>
<ol>
<li><code>silent</code>: Enable cookie prefix checking but silently fail to add the cookie if conditions not met. Default.</li>
<li><code>strict</code>: Enable cookie prefix checking and error out if conditions not met.</li>
<li><code>unsafe-disabled</code>: Disable cookie prefix checking.</li>
</ol>
<p>Note that if <code>ignoreError</code> is passed in as <code>true</code> then the error will be silent regardless of <code>prefixSecurity</code> option (assuming it’s enabled).</p>

        <h1 id="Copyright-and-License"   >
          <a href="#Copyright-and-License" class="heading-link"><i class="fas fa-link"></i></a><a href="#Copyright-and-License" class="headerlink" title="Copyright and License"></a>Copyright and License</h1>
      <p>BSD-3-Clause:</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Copyright (c) 2015, Salesforce.com, Inc.</span><br><span class="line">All rights reserved.</span><br><span class="line"></span><br><span class="line">Redistribution and use in source and binary forms, with or without</span><br><span class="line">modification, are permitted provided that the following conditions are met:</span><br><span class="line"></span><br><span class="line">1. Redistributions of source code must retain the above copyright notice,</span><br><span class="line">this list of conditions and the following disclaimer.</span><br><span class="line"></span><br><span class="line">2. Redistributions in binary form must reproduce the above copyright notice,</span><br><span class="line">this list of conditions and the following disclaimer in the documentation</span><br><span class="line">and/or other materials provided with the distribution.</span><br><span class="line"></span><br><span class="line">3. Neither the name of Salesforce.com nor the names of its contributors may</span><br><span class="line">be used to endorse or promote products derived from this software without</span><br><span class="line">specific prior written permission.</span><br><span class="line"></span><br><span class="line">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span><br><span class="line">AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span><br><span class="line">IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span><br><span class="line">ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE</span><br><span class="line">LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span><br><span class="line">CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span><br><span class="line">SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span><br><span class="line">INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span><br><span class="line">CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span><br><span class="line">ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span><br><span class="line">POSSIBILITY OF SUCH DAMAGE.</span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/symbol-tree/README/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">1985-10-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="symbol-tree"   >
          <a href="#symbol-tree" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbol-tree" class="headerlink" title="symbol-tree"></a>symbol-tree</h1>
      <p><a target="_blank" rel="noopener" href="https://travis-ci.org/jsdom/js-symbol-tree"><img   src="https://api.travis-ci.org/jsdom/js-symbol-tree.svg?branch=master" style=""  alt="Travis CI Build Status"></a> <a target="_blank" rel="noopener" href="https://coveralls.io/github/jsdom/js-symbol-tree?branch=master"><img   src="https://coveralls.io/repos/github/jsdom/js-symbol-tree/badge.svg?branch=master" style=""  alt="Coverage Status"></a></p>
<p>Turn any collection of objects into its own efficient tree or linked list using <code>Symbol</code>.</p>
<p>This library has been designed to provide an efficient backing data structure for DOM trees. You can also use this library as an efficient linked list. Any meta data is stored on your objects directly, which ensures any kind of insertion or deletion is performed in constant time. Because an ES6 <code>Symbol</code> is used, the meta data does not interfere with your object in any way.</p>
<p>Node.js 4+, io.js and modern browsers are supported.</p>

        <h2 id="Example"   >
          <a href="#Example" class="heading-link"><i class="fas fa-link"></i></a><a href="#Example" class="headerlink" title="Example"></a>Example</h2>
      <p>A linked list:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">SymbolTree</span> = <span class="built_in">require</span>(<span class="string">&#x27;symbol-tree&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> tree = <span class="keyword">new</span> <span class="title class_">SymbolTree</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = &#123;<span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span>&#125;; <span class="comment">// or `new Whatever()`</span></span><br><span class="line"><span class="keyword">let</span> b = &#123;<span class="attr">foo</span>: <span class="string">&#x27;baz&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> c = &#123;<span class="attr">foo</span>: <span class="string">&#x27;qux&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line">tree.<span class="title function_">insertBefore</span>(b, a); <span class="comment">// insert a before b</span></span><br><span class="line">tree.<span class="title function_">insertAfter</span>(b, c); <span class="comment">// insert c after b</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tree.<span class="title function_">nextSibling</span>(a) === b);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tree.<span class="title function_">nextSibling</span>(b) === c);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tree.<span class="title function_">previousSibling</span>(c) === b);</span><br><span class="line"></span><br><span class="line">tree.<span class="title function_">remove</span>(b);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tree.<span class="title function_">nextSibling</span>(a) === c);</span><br></pre></td></tr></table></div></figure>

<p>A tree:</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">SymbolTree</span> = <span class="built_in">require</span>(<span class="string">&#x27;symbol-tree&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> tree = <span class="keyword">new</span> <span class="title class_">SymbolTree</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> parent = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> b = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> c = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">tree.<span class="title function_">prependChild</span>(parent, a); <span class="comment">// insert a as the first child</span></span><br><span class="line">tree.<span class="title function_">appendChild</span>(parent,c ); <span class="comment">// insert c as the last child</span></span><br><span class="line">tree.<span class="title function_">insertAfter</span>(a, b); <span class="comment">// insert b after a, it now has the same parent as a</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tree.<span class="title function_">firstChild</span>(parent) === a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tree.<span class="title function_">nextSibling</span>(tree.<span class="title function_">firstChild</span>(parent)) === b);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tree.<span class="title function_">lastChild</span>(parent) === c);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> grandparent = &#123;&#125;;</span><br><span class="line">tree.<span class="title function_">prependChild</span>(grandparent, parent);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tree.<span class="title function_">firstChild</span>(tree.<span class="title function_">firstChild</span>(grandparent)) === a);</span><br></pre></td></tr></table></div></figure>

<p>See <a href="api.md">api.md</a> for more documentation.</p>

        <h2 id="Testing"   >
          <a href="#Testing" class="heading-link"><i class="fas fa-link"></i></a><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2>
      <p>Make sure you install the dependencies first:</p>
<pre><code>npm install
</code></pre>
<p>You can now run the unit tests by executing:</p>
<pre><code>npm test
</code></pre>
<p>The line and branch coverage should be 100%.</p>

        <h2 id="API-Documentation"   >
          <a href="#API-Documentation" class="heading-link"><i class="fas fa-link"></i></a><a href="#API-Documentation" class="headerlink" title="API Documentation"></a>API Documentation</h2>
      <p><a name="module_symbol-tree"></a></p>

        <h2 id="symbol-tree-1"   >
          <a href="#symbol-tree-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbol-tree-1" class="headerlink" title="symbol-tree"></a>symbol-tree</h2>
      <p><strong>Author</strong>: Joris van der Wel <span class="exturl"><a class="exturl__link"   href="mailto:&#106;&#111;&#x72;&#x69;&#115;&#64;&#x6a;&#x6f;&#x72;&#105;&#x73;&#118;&#x61;&#x6e;&#x64;&#x65;&#x72;&#x77;&#x65;&#108;&#x2e;&#99;&#111;&#x6d;" >&#106;&#111;&#x72;&#x69;&#115;&#64;&#x6a;&#x6f;&#x72;&#105;&#x73;&#118;&#x61;&#x6e;&#x64;&#x65;&#x72;&#x77;&#x65;&#108;&#x2e;&#99;&#111;&#x6d;</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>  </p>
<ul>
<li><a href="#module_symbol-tree">symbol-tree</a><ul>
<li><a href="#exp_module_symbol-tree--SymbolTree">SymbolTree</a> ⏏<ul>
<li><a href="#new_module_symbol-tree--SymbolTree_new">new SymbolTree([description])</a></li>
<li><a href="#module_symbol-tree--SymbolTree+initialize">.initialize(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+hasChildren">.hasChildren(object)</a> ⇒ <code>Boolean</code></li>
<li><a href="#module_symbol-tree--SymbolTree+firstChild">.firstChild(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+lastChild">.lastChild(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+previousSibling">.previousSibling(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+nextSibling">.nextSibling(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+parent">.parent(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+lastInclusiveDescendant">.lastInclusiveDescendant(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+preceding">.preceding(object, [options])</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+following">.following(object, [options])</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+childrenToArray">.childrenToArray(parent, [options])</a> ⇒ <code>Array.&lt;Object&gt;</code></li>
<li><a href="#module_symbol-tree--SymbolTree+ancestorsToArray">.ancestorsToArray(object, [options])</a> ⇒ <code>Array.&lt;Object&gt;</code></li>
<li><a href="#module_symbol-tree--SymbolTree+treeToArray">.treeToArray(root, [options])</a> ⇒ <code>Array.&lt;Object&gt;</code></li>
<li><a href="#module_symbol-tree--SymbolTree+childrenIterator">.childrenIterator(parent, [options])</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+previousSiblingsIterator">.previousSiblingsIterator(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+nextSiblingsIterator">.nextSiblingsIterator(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+ancestorsIterator">.ancestorsIterator(object)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+treeIterator">.treeIterator(root, options)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+index">.index(child)</a> ⇒ <code>Number</code></li>
<li><a href="#module_symbol-tree--SymbolTree+childrenCount">.childrenCount(parent)</a> ⇒ <code>Number</code></li>
<li><a href="#module_symbol-tree--SymbolTree+compareTreePosition">.compareTreePosition(left, right)</a> ⇒ <code>Number</code></li>
<li><a href="#module_symbol-tree--SymbolTree+remove">.remove(removeObject)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+insertBefore">.insertBefore(referenceObject, newObject)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+insertAfter">.insertAfter(referenceObject, newObject)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+prependChild">.prependChild(referenceObject, newObject)</a> ⇒ <code>Object</code></li>
<li><a href="#module_symbol-tree--SymbolTree+appendChild">.appendChild(referenceObject, newObject)</a> ⇒ <code>Object</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="exp_module_symbol-tree--SymbolTree"></a></p>

        <h3 id="SymbolTree-⏏"   >
          <a href="#SymbolTree-⏏" class="heading-link"><i class="fas fa-link"></i></a><a href="#SymbolTree-⏏" class="headerlink" title="SymbolTree ⏏"></a>SymbolTree ⏏</h3>
      <p><strong>Kind</strong>: Exported class<br><a name="new_module_symbol-tree--SymbolTree_new"></a></p>

        <h4 id="new-SymbolTree-description"   >
          <a href="#new-SymbolTree-description" class="heading-link"><i class="fas fa-link"></i></a><a href="#new-SymbolTree-description" class="headerlink" title="new SymbolTree([description])"></a>new SymbolTree([description])</h4>
      <div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>[description]</td>
<td><code>string</code></td>
<td><code>&quot;&#x27;SymbolTree data&#x27;&quot;</code></td>
<td>Description used for the Symbol</td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+initialize"></a></p>

        <h4 id="symbolTree-initialize-object-⇒-Object"   >
          <a href="#symbolTree-initialize-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-initialize-object-⇒-Object" class="headerlink" title="symbolTree.initialize(object) ⇒ Object"></a>symbolTree.initialize(object) ⇒ <code>Object</code></h4>
      <p>You can use this function to (optionally) initialize an object right after its creation,<br>to take advantage of V8’s fast properties. Also useful if you would like to<br>freeze your object.</p>
<p><code>O(1)</code></p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - object  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+hasChildren"></a></p>

        <h4 id="symbolTree-hasChildren-object-⇒-Boolean"   >
          <a href="#symbolTree-hasChildren-object-⇒-Boolean" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-hasChildren-object-⇒-Boolean" class="headerlink" title="symbolTree.hasChildren(object) ⇒ Boolean"></a>symbolTree.hasChildren(object) ⇒ <code>Boolean</code></h4>
      <p>Returns <code>true</code> if the object has any children. Otherwise it returns <code>false</code>.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+firstChild"></a></p>

        <h4 id="symbolTree-firstChild-object-⇒-Object"   >
          <a href="#symbolTree-firstChild-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-firstChild-object-⇒-Object" class="headerlink" title="symbolTree.firstChild(object) ⇒ Object"></a>symbolTree.firstChild(object) ⇒ <code>Object</code></h4>
      <p>Returns the first child of the given object.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+lastChild"></a></p>

        <h4 id="symbolTree-lastChild-object-⇒-Object"   >
          <a href="#symbolTree-lastChild-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-lastChild-object-⇒-Object" class="headerlink" title="symbolTree.lastChild(object) ⇒ Object"></a>symbolTree.lastChild(object) ⇒ <code>Object</code></h4>
      <p>Returns the last child of the given object.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+previousSibling"></a></p>

        <h4 id="symbolTree-previousSibling-object-⇒-Object"   >
          <a href="#symbolTree-previousSibling-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-previousSibling-object-⇒-Object" class="headerlink" title="symbolTree.previousSibling(object) ⇒ Object"></a>symbolTree.previousSibling(object) ⇒ <code>Object</code></h4>
      <p>Returns the previous sibling of the given object.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+nextSibling"></a></p>

        <h4 id="symbolTree-nextSibling-object-⇒-Object"   >
          <a href="#symbolTree-nextSibling-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-nextSibling-object-⇒-Object" class="headerlink" title="symbolTree.nextSibling(object) ⇒ Object"></a>symbolTree.nextSibling(object) ⇒ <code>Object</code></h4>
      <p>Returns the next sibling of the given object.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+parent"></a></p>

        <h4 id="symbolTree-parent-object-⇒-Object"   >
          <a href="#symbolTree-parent-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-parent-object-⇒-Object" class="headerlink" title="symbolTree.parent(object) ⇒ Object"></a>symbolTree.parent(object) ⇒ <code>Object</code></h4>
      <p>Return the parent of the given object.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+lastInclusiveDescendant"></a></p>

        <h4 id="symbolTree-lastInclusiveDescendant-object-⇒-Object"   >
          <a href="#symbolTree-lastInclusiveDescendant-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-lastInclusiveDescendant-object-⇒-Object" class="headerlink" title="symbolTree.lastInclusiveDescendant(object) ⇒ Object"></a>symbolTree.lastInclusiveDescendant(object) ⇒ <code>Object</code></h4>
      <p>Find the inclusive descendant that is last in tree order of the given object.</p>
<ul>
<li><code>O(n)</code> (worst case) where <code>n</code> is the depth of the subtree of <code>object</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+preceding"></a></p>

        <h4 id="symbolTree-preceding-object-options-⇒-Object"   >
          <a href="#symbolTree-preceding-object-options-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-preceding-object-options-⇒-Object" class="headerlink" title="symbolTree.preceding(object, [options]) ⇒ Object"></a>symbolTree.preceding(object, [options]) ⇒ <code>Object</code></h4>
      <p>Find the preceding object (A) of the given object (B).<br>An object A is preceding an object B if A and B are in the same tree<br>and A comes before B in tree order.</p>
<ul>
<li><code>O(n)</code> (worst case)</li>
<li><code>O(1)</code> (amortized when walking the entire tree)</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
<td></td>
</tr>
<tr>
<td>[options]</td>
<td><code>Object</code></td>
<td></td>
</tr>
<tr>
<td>[options.root]</td>
<td><code>Object</code></td>
<td>If set, <code>root</code> must be an inclusive ancestor        of the return value (or else null is returned). This check <em>assumes</em>        that <code>root</code> is also an inclusive ancestor of the given <code>object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+following"></a></p>

        <h4 id="symbolTree-following-object-options-⇒-Object"   >
          <a href="#symbolTree-following-object-options-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-following-object-options-⇒-Object" class="headerlink" title="symbolTree.following(object, [options]) ⇒ Object"></a>symbolTree.following(object, [options]) ⇒ <code>Object</code></h4>
      <p>Find the following object (A) of the given object (B).<br>An object A is following an object B if A and B are in the same tree<br>and A comes after B in tree order.</p>
<ul>
<li><code>O(n)</code> (worst case) where <code>n</code> is the amount of objects in the entire tree</li>
<li><code>O(1)</code> (amortized when walking the entire tree)</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[options]</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[options.root]</td>
<td><code>Object</code></td>
<td></td>
<td>If set, <code>root</code> must be an inclusive ancestor        of the return value (or else null is returned). This check <em>assumes</em>        that <code>root</code> is also an inclusive ancestor of the given <code>object</code></td>
</tr>
<tr>
<td>[options.skipChildren]</td>
<td><code>Boolean</code></td>
<td><code>false</code></td>
<td>If set, ignore the children of <code>object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+childrenToArray"></a></p>

        <h4 id="symbolTree-childrenToArray-parent-options-⇒-Array-lt-Object-gt"   >
          <a href="#symbolTree-childrenToArray-parent-options-⇒-Array-lt-Object-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-childrenToArray-parent-options-⇒-Array-lt-Object-gt" class="headerlink" title="symbolTree.childrenToArray(parent, [options]) ⇒ Array.&lt;Object&gt;"></a>symbolTree.childrenToArray(parent, [options]) ⇒ <code>Array.&lt;Object&gt;</code></h4>
      <p>Append all children of the given object to an array.</p>
<ul>
<li><code>O(n)</code> where <code>n</code> is the amount of children of the given <code>parent</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>parent</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[options]</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[options.array]</td>
<td><code>Array.&lt;Object&gt;</code></td>
<td><code>[]</code></td>
<td></td>
</tr>
<tr>
<td>[options.filter]</td>
<td><code>function</code></td>
<td></td>
<td>Function to test each object before it is added to the array.                            Invoked with arguments (object). Should return <code>true</code> if an object                            is to be included.</td>
</tr>
<tr>
<td>[options.thisArg]</td>
<td><code>*</code></td>
<td></td>
<td>Value to use as <code>this</code> when executing <code>filter</code>.</td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+ancestorsToArray"></a></p>

        <h4 id="symbolTree-ancestorsToArray-object-options-⇒-Array-lt-Object-gt"   >
          <a href="#symbolTree-ancestorsToArray-object-options-⇒-Array-lt-Object-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-ancestorsToArray-object-options-⇒-Array-lt-Object-gt" class="headerlink" title="symbolTree.ancestorsToArray(object, [options]) ⇒ Array.&lt;Object&gt;"></a>symbolTree.ancestorsToArray(object, [options]) ⇒ <code>Array.&lt;Object&gt;</code></h4>
      <p>Append all inclusive ancestors of the given object to an array.</p>
<ul>
<li><code>O(n)</code> where <code>n</code> is the amount of ancestors of the given <code>object</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[options]</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[options.array]</td>
<td><code>Array.&lt;Object&gt;</code></td>
<td><code>[]</code></td>
<td></td>
</tr>
<tr>
<td>[options.filter]</td>
<td><code>function</code></td>
<td></td>
<td>Function to test each object before it is added to the array.                            Invoked with arguments (object). Should return <code>true</code> if an object                            is to be included.</td>
</tr>
<tr>
<td>[options.thisArg]</td>
<td><code>*</code></td>
<td></td>
<td>Value to use as <code>this</code> when executing <code>filter</code>.</td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+treeToArray"></a></p>

        <h4 id="symbolTree-treeToArray-root-options-⇒-Array-lt-Object-gt"   >
          <a href="#symbolTree-treeToArray-root-options-⇒-Array-lt-Object-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-treeToArray-root-options-⇒-Array-lt-Object-gt" class="headerlink" title="symbolTree.treeToArray(root, [options]) ⇒ Array.&lt;Object&gt;"></a>symbolTree.treeToArray(root, [options]) ⇒ <code>Array.&lt;Object&gt;</code></h4>
      <p>Append all descendants of the given object to an array (in tree order).</p>
<ul>
<li><code>O(n)</code> where <code>n</code> is the amount of objects in the sub-tree of the given <code>object</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>root</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[options]</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[options.array]</td>
<td><code>Array.&lt;Object&gt;</code></td>
<td><code>[]</code></td>
<td></td>
</tr>
<tr>
<td>[options.filter]</td>
<td><code>function</code></td>
<td></td>
<td>Function to test each object before it is added to the array.                            Invoked with arguments (object). Should return <code>true</code> if an object                            is to be included.</td>
</tr>
<tr>
<td>[options.thisArg]</td>
<td><code>*</code></td>
<td></td>
<td>Value to use as <code>this</code> when executing <code>filter</code>.</td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+childrenIterator"></a></p>

        <h4 id="symbolTree-childrenIterator-parent-options-⇒-Object"   >
          <a href="#symbolTree-childrenIterator-parent-options-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-childrenIterator-parent-options-⇒-Object" class="headerlink" title="symbolTree.childrenIterator(parent, [options]) ⇒ Object"></a>symbolTree.childrenIterator(parent, [options]) ⇒ <code>Object</code></h4>
      <p>Iterate over all children of the given object</p>
<ul>
<li><code>O(1)</code> for a single iteration</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - An iterable iterator (ES6)  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>parent</td>
<td><code>Object</code></td>
<td></td>
</tr>
<tr>
<td>[options]</td>
<td><code>Object</code></td>
<td></td>
</tr>
<tr>
<td>[options.reverse]</td>
<td><code>Boolean</code></td>
<td><code>false</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+previousSiblingsIterator"></a></p>

        <h4 id="symbolTree-previousSiblingsIterator-object-⇒-Object"   >
          <a href="#symbolTree-previousSiblingsIterator-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-previousSiblingsIterator-object-⇒-Object" class="headerlink" title="symbolTree.previousSiblingsIterator(object) ⇒ Object"></a>symbolTree.previousSiblingsIterator(object) ⇒ <code>Object</code></h4>
      <p>Iterate over all the previous siblings of the given object. (in reverse tree order)</p>
<ul>
<li><code>O(1)</code> for a single iteration</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - An iterable iterator (ES6)  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+nextSiblingsIterator"></a></p>

        <h4 id="symbolTree-nextSiblingsIterator-object-⇒-Object"   >
          <a href="#symbolTree-nextSiblingsIterator-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-nextSiblingsIterator-object-⇒-Object" class="headerlink" title="symbolTree.nextSiblingsIterator(object) ⇒ Object"></a>symbolTree.nextSiblingsIterator(object) ⇒ <code>Object</code></h4>
      <p>Iterate over all the next siblings of the given object. (in tree order)</p>
<ul>
<li><code>O(1)</code> for a single iteration</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - An iterable iterator (ES6)  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+ancestorsIterator"></a></p>

        <h4 id="symbolTree-ancestorsIterator-object-⇒-Object"   >
          <a href="#symbolTree-ancestorsIterator-object-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-ancestorsIterator-object-⇒-Object" class="headerlink" title="symbolTree.ancestorsIterator(object) ⇒ Object"></a>symbolTree.ancestorsIterator(object) ⇒ <code>Object</code></h4>
      <p>Iterate over all inclusive ancestors of the given object</p>
<ul>
<li><code>O(1)</code> for a single iteration</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - An iterable iterator (ES6)  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+treeIterator"></a></p>

        <h4 id="symbolTree-treeIterator-root-options-⇒-Object"   >
          <a href="#symbolTree-treeIterator-root-options-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-treeIterator-root-options-⇒-Object" class="headerlink" title="symbolTree.treeIterator(root, options) ⇒ Object"></a>symbolTree.treeIterator(root, options) ⇒ <code>Object</code></h4>
      <p>Iterate over all descendants of the given object (in tree order).</p>
<p>Where <code>n</code> is the amount of objects in the sub-tree of the given <code>root</code>:</p>
<ul>
<li><code>O(n)</code> (worst case for a single iteration)</li>
<li><code>O(n)</code> (amortized, when completing the iterator)</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - An iterable iterator (ES6)  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>root</td>
<td><code>Object</code></td>
<td></td>
</tr>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td></td>
</tr>
<tr>
<td>[options.reverse]</td>
<td><code>Boolean</code></td>
<td><code>false</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+index"></a></p>

        <h4 id="symbolTree-index-child-⇒-Number"   >
          <a href="#symbolTree-index-child-⇒-Number" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-index-child-⇒-Number" class="headerlink" title="symbolTree.index(child) ⇒ Number"></a>symbolTree.index(child) ⇒ <code>Number</code></h4>
      <p>Find the index of the given object (the number of preceding siblings).</p>
<ul>
<li><code>O(n)</code> where <code>n</code> is the amount of preceding siblings</li>
<li><code>O(1)</code> (amortized, if the tree is not modified)</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Number</code> - The number of preceding siblings, or -1 if the object has no parent  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>child</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+childrenCount"></a></p>

        <h4 id="symbolTree-childrenCount-parent-⇒-Number"   >
          <a href="#symbolTree-childrenCount-parent-⇒-Number" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-childrenCount-parent-⇒-Number" class="headerlink" title="symbolTree.childrenCount(parent) ⇒ Number"></a>symbolTree.childrenCount(parent) ⇒ <code>Number</code></h4>
      <p>Calculate the number of children.</p>
<ul>
<li><code>O(n)</code> where <code>n</code> is the amount of children</li>
<li><code>O(1)</code> (amortized, if the tree is not modified)</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>parent</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+compareTreePosition"></a></p>

        <h4 id="symbolTree-compareTreePosition-left-right-⇒-Number"   >
          <a href="#symbolTree-compareTreePosition-left-right-⇒-Number" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-compareTreePosition-left-right-⇒-Number" class="headerlink" title="symbolTree.compareTreePosition(left, right) ⇒ Number"></a>symbolTree.compareTreePosition(left, right) ⇒ <code>Number</code></h4>
      <p>Compare the position of an object relative to another object. A bit set is returned:</p>
<ul>
    <li>DISCONNECTED : 1</li>
    <li>PRECEDING : 2</li>
    <li>FOLLOWING : 4</li>
    <li>CONTAINS : 8</li>
    <li>CONTAINED_BY : 16</li>
</ul>

<p>The semantics are the same as compareDocumentPosition in DOM, with the exception that<br>DISCONNECTED never occurs with any other bit.</p>
<p>where <code>n</code> and <code>m</code> are the amount of ancestors of <code>left</code> and <code>right</code>;<br>where <code>o</code> is the amount of children of the lowest common ancestor of <code>left</code> and <code>right</code>:</p>
<ul>
<li><code>O(n + m + o)</code> (worst case)</li>
<li><code>O(n + m)</code> (amortized, if the tree is not modified)</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a>  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td><code>Object</code></td>
</tr>
<tr>
<td>right</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+remove"></a></p>

        <h4 id="symbolTree-remove-removeObject-⇒-Object"   >
          <a href="#symbolTree-remove-removeObject-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-remove-removeObject-⇒-Object" class="headerlink" title="symbolTree.remove(removeObject) ⇒ Object"></a>symbolTree.remove(removeObject) ⇒ <code>Object</code></h4>
      <p>Remove the object from this tree.<br>Has no effect if already removed.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - removeObject  </p>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>removeObject</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+insertBefore"></a></p>

        <h4 id="symbolTree-insertBefore-referenceObject-newObject-⇒-Object"   >
          <a href="#symbolTree-insertBefore-referenceObject-newObject-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-insertBefore-referenceObject-newObject-⇒-Object" class="headerlink" title="symbolTree.insertBefore(referenceObject, newObject) ⇒ Object"></a>symbolTree.insertBefore(referenceObject, newObject) ⇒ <code>Object</code></h4>
      <p>Insert the given object before the reference object.<br><code>newObject</code> is now the previous sibling of <code>referenceObject</code>.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - newObject<br><strong>Throws</strong>:</p>
<ul>
<li><code>Error</code> If the newObject is already present in this SymbolTree</li>
</ul>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>referenceObject</td>
<td><code>Object</code></td>
</tr>
<tr>
<td>newObject</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+insertAfter"></a></p>

        <h4 id="symbolTree-insertAfter-referenceObject-newObject-⇒-Object"   >
          <a href="#symbolTree-insertAfter-referenceObject-newObject-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-insertAfter-referenceObject-newObject-⇒-Object" class="headerlink" title="symbolTree.insertAfter(referenceObject, newObject) ⇒ Object"></a>symbolTree.insertAfter(referenceObject, newObject) ⇒ <code>Object</code></h4>
      <p>Insert the given object after the reference object.<br><code>newObject</code> is now the next sibling of <code>referenceObject</code>.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - newObject<br><strong>Throws</strong>:</p>
<ul>
<li><code>Error</code> If the newObject is already present in this SymbolTree</li>
</ul>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>referenceObject</td>
<td><code>Object</code></td>
</tr>
<tr>
<td>newObject</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+prependChild"></a></p>

        <h4 id="symbolTree-prependChild-referenceObject-newObject-⇒-Object"   >
          <a href="#symbolTree-prependChild-referenceObject-newObject-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-prependChild-referenceObject-newObject-⇒-Object" class="headerlink" title="symbolTree.prependChild(referenceObject, newObject) ⇒ Object"></a>symbolTree.prependChild(referenceObject, newObject) ⇒ <code>Object</code></h4>
      <p>Insert the given object as the first child of the given reference object.<br><code>newObject</code> is now the first child of <code>referenceObject</code>.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - newObject<br><strong>Throws</strong>:</p>
<ul>
<li><code>Error</code> If the newObject is already present in this SymbolTree</li>
</ul>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>referenceObject</td>
<td><code>Object</code></td>
</tr>
<tr>
<td>newObject</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
<p><a name="module_symbol-tree--SymbolTree+appendChild"></a></p>

        <h4 id="symbolTree-appendChild-referenceObject-newObject-⇒-Object"   >
          <a href="#symbolTree-appendChild-referenceObject-newObject-⇒-Object" class="heading-link"><i class="fas fa-link"></i></a><a href="#symbolTree-appendChild-referenceObject-newObject-⇒-Object" class="headerlink" title="symbolTree.appendChild(referenceObject, newObject) ⇒ Object"></a>symbolTree.appendChild(referenceObject, newObject) ⇒ <code>Object</code></h4>
      <p>Insert the given object as the last child of the given reference object.<br><code>newObject</code> is now the last child of <code>referenceObject</code>.</p>
<ul>
<li><code>O(1)</code></li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_symbol-tree--SymbolTree"><code>SymbolTree</code></a><br><strong>Returns</strong>: <code>Object</code> - newObject<br><strong>Throws</strong>:</p>
<ul>
<li><code>Error</code> If the newObject is already present in this SymbolTree</li>
</ul>
<div class="table-container"><table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>referenceObject</td>
<td><code>Object</code></td>
</tr>
<tr>
<td>newObject</td>
<td><code>Object</code></td>
</tr>
</tbody></table></div>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/stealthy-require/README/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2017-05-09</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="Stealthy-Require"   >
          <a href="#Stealthy-Require" class="heading-link"><i class="fas fa-link"></i></a><a href="#Stealthy-Require" class="headerlink" title="Stealthy-Require"></a>Stealthy-Require</h1>
      <p><a target="_blank" rel="noopener" href="https://travis-ci.org/analog-nico/stealthy-require"><img   src="https://img.shields.io/travis/analog-nico/stealthy-require/master.svg?style=flat-square" style=""  alt="Build Status"></a><br><a target="_blank" rel="noopener" href="https://coveralls.io/r/analog-nico/stealthy-require"><img   src="https://img.shields.io/coveralls/analog-nico/stealthy-require.svg?style=flat-square" style=""  alt="Coverage Status"></a><br><a target="_blank" rel="noopener" href="https://david-dm.org/analog-nico/stealthy-require"><img   src="https://img.shields.io/david/analog-nico/stealthy-require.svg?style=flat-square" style=""  alt="Dependency Status"></a></p>
<p>This is probably the closest you can currently get to require something in node.js with completely bypassing the require cache.</p>
<p><code>stealthy-require</code> works like this:</p>
<ol>
<li>It clears the require cache.</li>
<li>It calls a callback in which you require your module(s) without the cache kicking in.</li>
<li>It clears the cache again and restores its old state.</li>
</ol>
<p>The restrictions are:</p>
<ul>
<li><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/nodejs/node/issues/5016" >Native modules cannot be required twice.</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> Thus this module bypasses the require cache only for non-native (e.g. JS) modules.</li>
<li>The require cache is only bypassed for all operations that happen synchronously when a module is required. If a module lazy loads another module at a later time that require call will not bypass the cache anymore.</li>
</ul>
<p>This means you should have a close look at all internal require calls before you decide to use this library.</p>

        <h2 id="Installation"   >
          <a href="#Installation" class="heading-link"><i class="fas fa-link"></i></a><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2>
      <p><a target="_blank" rel="noopener" href="https://npmjs.org/package/stealthy-require"><img   src="https://nodei.co/npm/stealthy-require.png?downloads=true" style=""  alt="NPM Stats"></a></p>
<p>This is a module for node.js and is installed via npm:</p>
<figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install stealthy-require --save</span><br></pre></td></tr></table></div></figure>


        <h2 id="Usage"   >
          <a href="#Usage" class="heading-link"><i class="fas fa-link"></i></a><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2>
      <p>Let’s say you want to bypass the require cache for this require call:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>With <code>stealthy-require</code> you can do that like this:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stealthyRequire = <span class="built_in">require</span>(<span class="string">&#x27;stealthy-require&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> requestFresh = <span class="title function_">stealthyRequire</span>(<span class="built_in">require</span>.<span class="property">cache</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>

<p>The require cache is bypassed for the module you require (i.e. <code>request</code>) as well as all modules the module requires (i.e. <code>http</code> and many more).</p>
<p>Sometimes the require cache shall not be bypassed for specific modules. E.g. <code>request</code> is required but <code>tough-cookie</code> – on which <code>request</code> depends on – shall be required using the regular cache. For that you can pass two extra arguments to <code>stealthyRequire(...)</code>:</p>
<ul>
<li>A callback that requires the modules that shall be required without bypassing the cache</li>
<li>The <code>module</code> variable</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stealthyRequire = <span class="built_in">require</span>(<span class="string">&#x27;stealthy-require&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> requestFresh = <span class="title function_">stealthyRequire</span>(<span class="built_in">require</span>.<span class="property">cache</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&#x27;tough-cookie&#x27;</span>); <span class="comment">// No return needed</span></span><br><span class="line">    <span class="comment">// You can require multiple modules here</span></span><br><span class="line">&#125;, <span class="variable language_">module</span>);</span><br></pre></td></tr></table></div></figure>


        <h2 id="Usage-with-Module-Bundlers"   >
          <a href="#Usage-with-Module-Bundlers" class="heading-link"><i class="fas fa-link"></i></a><a href="#Usage-with-Module-Bundlers" class="headerlink" title="Usage with Module Bundlers"></a>Usage with Module Bundlers</h2>
      <ul>
<li><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://webpack.github.io/" >Webpack</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> works out-of-the-box like described in the <a href="#usage">Usage section</a> above.</li>
<li><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://browserify.org/" >Browserify</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> does not expose <code>require.cache</code>. However, as of <code>browserify@13.0.1</code> the cache is passed as the 6th argument to CommonJS modules. Thus you can pass this argument instead:</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Tweak for Browserify - using arguments[5] instead of require.cache</span></span><br><span class="line"><span class="keyword">var</span> requestFresh = <span class="title function_">stealthyRequire</span>(<span class="variable language_">arguments</span>[<span class="number">5</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>


        <h2 id="Preventing-a-Memory-Leak-When-Repeatedly-Requiring-Fresh-Module-Instances-in-Node-js"   >
          <a href="#Preventing-a-Memory-Leak-When-Repeatedly-Requiring-Fresh-Module-Instances-in-Node-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#Preventing-a-Memory-Leak-When-Repeatedly-Requiring-Fresh-Module-Instances-in-Node-js" class="headerlink" title="Preventing a Memory Leak When Repeatedly Requiring Fresh Module Instances in Node.js"></a>Preventing a Memory Leak When Repeatedly Requiring Fresh Module Instances in Node.js</h2>
      <p>If you are using <code>stealthy-require</code> in node.js and repeatedly require fresh module instances the <code>module.children</code> array will hold all module instances which prevents unneeded instances to be garbage collected.</p>
<p>Assume your code calls <code>doSomething()</code> repeatedly.</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stealthyRequire = <span class="built_in">require</span>(<span class="string">&#x27;stealthy-require&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> freshInstance = <span class="title function_">stealthyRequire</span>(<span class="built_in">require</span>.<span class="property">cache</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">&#x27;some-module&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> freshInstance.<span class="title function_">calc</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>After <code>doSomething()</code> returns <code>freshInstance</code> is not used anymore but won’t be garbage collected because <code>module.children</code> still holds a reference. The solution is to truncate <code>module.children</code> accordingly:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stealthyRequire = <span class="built_in">require</span>(<span class="string">&#x27;stealthy-require&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> initialChildren = <span class="variable language_">module</span>.<span class="property">children</span>.<span class="title function_">slice</span>(); <span class="comment">// Creates a shallow copy of the array</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> freshInstance = <span class="title function_">stealthyRequire</span>(<span class="built_in">require</span>.<span class="property">cache</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">&#x27;some-module&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">children</span> = initialChildren;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> freshInstance.<span class="title function_">calc</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>The <code>slice</code> operation removes all new <code>module.children</code> entries created during the <code>stealthyRequire(...)</code> call and thus <code>freshInstance</code> gets garbage collected after <code>doSomething()</code> returns.</p>

        <h2 id="Technical-Walkthrough"   >
          <a href="#Technical-Walkthrough" class="heading-link"><i class="fas fa-link"></i></a><a href="#Technical-Walkthrough" class="headerlink" title="Technical Walkthrough"></a>Technical Walkthrough</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Load stealthy-require</span></span><br><span class="line"><span class="keyword">var</span> stealthyRequire = <span class="built_in">require</span>(<span class="string">&#x27;stealthy-require&#x27;</span>);</span><br><span class="line"><span class="comment">// This does nothing but loading the code.</span></span><br><span class="line"><span class="comment">// It has no side-effects like patching the module loader or anything.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Any regular require works as always.</span></span><br><span class="line"><span class="keyword">var</span> request1 = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Call stealthyRequire with passing the require cache and a callback.</span></span><br><span class="line"><span class="keyword">var</span> requestFresh = <span class="title function_">stealthyRequire</span>(<span class="built_in">require</span>.<span class="property">cache</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2a. Before this callback gets called the require cache is cleared.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2b. Any require taking place here takes place on a clean require cache.</span></span><br><span class="line">    <span class="comment">// Since the require call is part of the user&#x27;s code it also works with module bundlers.</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line">    <span class="comment">// Anything returned here will be returned by stealthyRequire(...).</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2c. After this callback gets called the require cache is</span></span><br><span class="line">    <span class="comment">// - cleared again and</span></span><br><span class="line">    <span class="comment">// - restored to its old state before step 2.</span></span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Any regular require again works as always.</span></span><br><span class="line"><span class="comment">// In this case require returns the cached request module instance.</span></span><br><span class="line"><span class="keyword">var</span> request2 = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// And voilà:</span></span><br><span class="line">request1 === request2 <span class="comment">// -&gt; true</span></span><br><span class="line">request1 === requestFresh <span class="comment">// -&gt; false</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="Contributing"   >
          <a href="#Contributing" class="heading-link"><i class="fas fa-link"></i></a><a href="#Contributing" class="headerlink" title="Contributing"></a>Contributing</h2>
      <p>To set up your development environment for <code>stealthy-require</code>:</p>
<ol>
<li>Clone this repo to your desktop,</li>
<li>in the shell <code>cd</code> to the main folder,</li>
<li>hit <code>npm install</code>,</li>
<li>hit <code>npm install gulp -g</code> if you haven’t installed gulp globally yet, and</li>
<li>run <code>gulp dev</code>. (Or run <code>node ./node_modules/.bin/gulp dev</code> if you don’t want to install gulp globally.)</li>
</ol>
<p><code>gulp dev</code> watches all source files and if you save some changes it will lint the code and execute all tests. The test coverage report can be viewed from <code>./coverage/lcov-report/index.html</code>.</p>
<p>If you want to debug a test you should use <code>gulp test-without-coverage</code> to run all tests without obscuring the code by the test coverage instrumentation.</p>

        <h2 id="Change-History"   >
          <a href="#Change-History" class="heading-link"><i class="fas fa-link"></i></a><a href="#Change-History" class="headerlink" title="Change History"></a>Change History</h2>
      <ul>
<li>v1.1.1 (2017-05-08)<ul>
<li>Fix that stops <code>undefined</code> entries from appearing in <code>require.cache</code> <em>(Thanks to @jasperjn from reporting this in <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/analog-nico/stealthy-require/issues/4" >issue #4</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>)</em></li>
</ul>
</li>
<li>v1.1.0 (2017-04-25)<ul>
<li>Added ability to disable bypassing the cache for certain modules <em>(Thanks to @novemberborn for suggesting this in <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/analog-nico/stealthy-require/issues/3" >issue #3</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>)</em></li>
<li>Added section in README about a <a href="#preventing-a-memory-leak-when-repeatedly-requiring-fresh-module-instances-in-nodejs">potential memory leak</a> <em>(Thanks to @Flarna and @novemberborn for bringing that up in <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/analog-nico/stealthy-require/issues/2" >issue #2</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>)</em></li>
<li>Performance optimizations <em>(Thanks to @jcready for <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/analog-nico/stealthy-require/pull/1" >pull request #1</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>)</em></li>
</ul>
</li>
<li>v1.0.0 (2016-07-18)<ul>
<li><strong>Breaking Change:</strong> API completely changed. Please read the <a href="#usage">Usage section</a> again.</li>
<li>Redesigned library to support module bundlers like <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://webpack.github.io/" >Webpack</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> and <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://browserify.org/" >Browserify</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ul>
</li>
<li>v0.1.0 (2016-05-26)<ul>
<li>Initial version</li>
</ul>
</li>
</ul>

        <h2 id="License-ISC"   >
          <a href="#License-ISC" class="heading-link"><i class="fas fa-link"></i></a><a href="#License-ISC" class="headerlink" title="License (ISC)"></a>License (ISC)</h2>
      <p>In case you never heard about the <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/ISC_license" >ISC license</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> it is functionally equivalent to the MIT license.</p>
<p>See the <a href="LICENSE">LICENSE file</a> for details.</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/sshpk/README/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2018-12-21</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="sshpk"   >
          <a href="#sshpk" class="heading-link"><i class="fas fa-link"></i></a><a href="#sshpk" class="headerlink" title="sshpk"></a>sshpk</h1>
      <p>Parse, convert, fingerprint and use SSH keys (both public and private) in pure<br>node – no <code>ssh-keygen</code> or other external dependencies.</p>
<p>Supports RSA, DSA, ECDSA (nistp-*) and ED25519 key types, in PEM (PKCS#1,<br>PKCS#8) and OpenSSH formats.</p>
<p>This library has been extracted from<br><a target="_blank" rel="noopener" href="https://github.com/joyent/node-http-signature"><code>node-http-signature</code></a><br>(work by <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/mcavage" >Mark Cavage</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> and<br><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/bahamas10" >Dave Eddy</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>) and<br><a target="_blank" rel="noopener" href="https://github.com/bahamas10/node-ssh-fingerprint"><code>node-ssh-fingerprint</code></a><br>(work by Dave Eddy), with additions (including ECDSA support) by<br><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/arekinath" >Alex Wilson</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</p>

        <h2 id="Install"   >
          <a href="#Install" class="heading-link"><i class="fas fa-link"></i></a><a href="#Install" class="headerlink" title="Install"></a>Install</h2>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sshpk</span><br></pre></td></tr></table></div></figure>


        <h2 id="Examples"   >
          <a href="#Examples" class="heading-link"><i class="fas fa-link"></i></a><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sshpk = <span class="built_in">require</span>(<span class="string">&#x27;sshpk&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Read in an OpenSSH-format public key */</span></span><br><span class="line"><span class="keyword">var</span> keyPub = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;id_rsa.pub&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> key = sshpk.<span class="title function_">parseKey</span>(keyPub, <span class="string">&#x27;ssh&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Get metadata about the key */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type =&gt; %s&#x27;</span>, key.<span class="property">type</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;size =&gt; %d bits&#x27;</span>, key.<span class="property">size</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;comment =&gt; %s&#x27;</span>, key.<span class="property">comment</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Compute key fingerprints, in new OpenSSH (&gt;6.7) format, and old MD5 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fingerprint =&gt; %s&#x27;</span>, key.<span class="title function_">fingerprint</span>().<span class="title function_">toString</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;old-style fingerprint =&gt; %s&#x27;</span>, key.<span class="title function_">fingerprint</span>(<span class="string">&#x27;md5&#x27;</span>).<span class="title function_">toString</span>());</span><br></pre></td></tr></table></div></figure>

<p>Example output:</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type =&gt; rsa</span><br><span class="line">size =&gt; 2048 bits</span><br><span class="line">comment =&gt; foo@foo.com</span><br><span class="line">fingerprint =&gt; SHA256:PYC9kPVC6J873CSIbfp0LwYeczP/W4ffObNCuDJ1u5w</span><br><span class="line">old-style fingerprint =&gt; a0:c8:ad:6c:32:9a:32:fa:59:cc:a9:8c:0a:0d:6e:bd</span><br></pre></td></tr></table></div></figure>

<p>More examples: converting between formats:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Read in a PEM public key */</span></span><br><span class="line"><span class="keyword">var</span> keyPem = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;id_rsa.pem&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> key = sshpk.<span class="title function_">parseKey</span>(keyPem, <span class="string">&#x27;pem&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Convert to PEM PKCS#8 public key format */</span></span><br><span class="line"><span class="keyword">var</span> pemBuf = key.<span class="title function_">toBuffer</span>(<span class="string">&#x27;pkcs8&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Convert to SSH public key format (and return as a string) */</span></span><br><span class="line"><span class="keyword">var</span> sshKey = key.<span class="title function_">toString</span>(<span class="string">&#x27;ssh&#x27;</span>);</span><br></pre></td></tr></table></div></figure>

<p>Signing and verifying:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Read in an OpenSSH/PEM *private* key */</span></span><br><span class="line"><span class="keyword">var</span> keyPriv = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;id_ecdsa&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> key = sshpk.<span class="title function_">parsePrivateKey</span>(keyPriv, <span class="string">&#x27;pem&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = <span class="string">&#x27;some data&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Sign some data with the key */</span></span><br><span class="line"><span class="keyword">var</span> s = key.<span class="title function_">createSign</span>(<span class="string">&#x27;sha1&#x27;</span>);</span><br><span class="line">s.<span class="title function_">update</span>(data);</span><br><span class="line"><span class="keyword">var</span> signature = s.<span class="title function_">sign</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Now load the public key (could also use just key.toPublic()) */</span></span><br><span class="line"><span class="keyword">var</span> keyPub = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;id_ecdsa.pub&#x27;</span>);</span><br><span class="line">key = sshpk.<span class="title function_">parseKey</span>(keyPub, <span class="string">&#x27;ssh&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Make a crypto.Verifier with this key */</span></span><br><span class="line"><span class="keyword">var</span> v = key.<span class="title function_">createVerify</span>(<span class="string">&#x27;sha1&#x27;</span>);</span><br><span class="line">v.<span class="title function_">update</span>(data);</span><br><span class="line"><span class="keyword">var</span> valid = v.<span class="title function_">verify</span>(signature);</span><br><span class="line"><span class="comment">/* =&gt; true! */</span></span><br></pre></td></tr></table></div></figure>

<p>Matching fingerprints with keys:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fp = sshpk.<span class="title function_">parseFingerprint</span>(<span class="string">&#x27;SHA256:PYC9kPVC6J873CSIbfp0LwYeczP/W4ffObNCuDJ1u5w&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> keys = [sshpk.<span class="title function_">parseKey</span>(...), sshpk.<span class="title function_">parseKey</span>(...), ...];</span><br><span class="line"></span><br><span class="line">keys.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">key</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> (fp.<span class="title function_">matches</span>(key))</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;found it!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>


        <h2 id="Usage"   >
          <a href="#Usage" class="heading-link"><i class="fas fa-link"></i></a><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2>
      
        <h2 id="Public-keys"   >
          <a href="#Public-keys" class="heading-link"><i class="fas fa-link"></i></a><a href="#Public-keys" class="headerlink" title="Public keys"></a>Public keys</h2>
      
        <h3 id="parseKey-data-format-39-auto-39-options"   >
          <a href="#parseKey-data-format-39-auto-39-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#parseKey-data-format-39-auto-39-options" class="headerlink" title="parseKey(data[, format = &#39;auto&#39;[, options]])"></a><code>parseKey(data[, format = &#39;auto&#39;[, options]])</code></h3>
      <p>Parses a key from a given data format and returns a new <code>Key</code> object.</p>
<p>Parameters</p>
<ul>
<li><code>data</code> – Either a Buffer or String, containing the key</li>
<li><code>format</code> – String name of format to use, valid options are:<ul>
<li><code>auto</code>: choose automatically from all below</li>
<li><code>pem</code>: supports both PKCS#1 and PKCS#8</li>
<li><code>ssh</code>: standard OpenSSH format,</li>
<li><code>pkcs1</code>, <code>pkcs8</code>: variants of <code>pem</code></li>
<li><code>rfc4253</code>: raw OpenSSH wire format</li>
<li><code>openssh</code>: new post-OpenSSH 6.5 internal format, produced by<br>       <code>ssh-keygen -o</code></li>
<li><code>dnssec</code>: <code>.key</code> file format output by <code>dnssec-keygen</code> etc</li>
<li><code>putty</code>: the PuTTY <code>.ppk</code> file format (supports truncated variant without<br>     all the lines from <code>Private-Lines:</code> onwards)</li>
</ul>
</li>
<li><code>options</code> – Optional Object, extra options, with keys:<ul>
<li><code>filename</code> – Optional String, name for the key being parsed<br>          (eg. the filename that was opened). Used to generate<br>          Error messages</li>
<li><code>passphrase</code> – Optional String, encryption passphrase used to decrypt an<br>            encrypted PEM file</li>
</ul>
</li>
</ul>

        <h3 id="Key-isKey-obj"   >
          <a href="#Key-isKey-obj" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-isKey-obj" class="headerlink" title="Key.isKey(obj)"></a><code>Key.isKey(obj)</code></h3>
      <p>Returns <code>true</code> if the given object is a valid <code>Key</code> object created by a version<br>of <code>sshpk</code> compatible with this one.</p>
<p>Parameters</p>
<ul>
<li><code>obj</code> – Object to identify</li>
</ul>

        <h3 id="Key-type"   >
          <a href="#Key-type" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-type" class="headerlink" title="Key#type"></a><code>Key#type</code></h3>
      <p>String, the type of key. Valid options are <code>rsa</code>, <code>dsa</code>, <code>ecdsa</code>.</p>

        <h3 id="Key-size"   >
          <a href="#Key-size" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-size" class="headerlink" title="Key#size"></a><code>Key#size</code></h3>
      <p>Integer, “size” of the key in bits. For RSA&#x2F;DSA this is the size of the modulus;<br>for ECDSA this is the bit size of the curve in use.</p>

        <h3 id="Key-comment"   >
          <a href="#Key-comment" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-comment" class="headerlink" title="Key#comment"></a><code>Key#comment</code></h3>
      <p>Optional string, a key comment used by some formats (eg the <code>ssh</code> format).</p>

        <h3 id="Key-curve"   >
          <a href="#Key-curve" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-curve" class="headerlink" title="Key#curve"></a><code>Key#curve</code></h3>
      <p>Only present if <code>this.type === &#39;ecdsa&#39;</code>, string containing the name of the<br>named curve used with this key. Possible values include <code>nistp256</code>, <code>nistp384</code><br>and <code>nistp521</code>.</p>

        <h3 id="Key-toBuffer-format-39-ssh-39"   >
          <a href="#Key-toBuffer-format-39-ssh-39" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-toBuffer-format-39-ssh-39" class="headerlink" title="Key#toBuffer([format = &#39;ssh&#39;])"></a><code>Key#toBuffer([format = &#39;ssh&#39;])</code></h3>
      <p>Convert the key into a given data format and return the serialized key as<br>a Buffer.</p>
<p>Parameters</p>
<ul>
<li><code>format</code> – String name of format to use, for valid options see <code>parseKey()</code></li>
</ul>

        <h3 id="Key-toString-format-39-ssh"   >
          <a href="#Key-toString-format-39-ssh" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-toString-format-39-ssh" class="headerlink" title="Key#toString([format = &#39;ssh])"></a><code>Key#toString([format = &#39;ssh])</code></h3>
      <p>Same as <code>this.toBuffer(format).toString()</code>.</p>

        <h3 id="Key-fingerprint-algorithm-39-sha256-39-hashType-39-ssh-39"   >
          <a href="#Key-fingerprint-algorithm-39-sha256-39-hashType-39-ssh-39" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-fingerprint-algorithm-39-sha256-39-hashType-39-ssh-39" class="headerlink" title="Key#fingerprint([algorithm = &#39;sha256&#39;[, hashType = &#39;ssh&#39;]])"></a><code>Key#fingerprint([algorithm = &#39;sha256&#39;[, hashType = &#39;ssh&#39;]])</code></h3>
      <p>Creates a new <code>Fingerprint</code> object representing this Key’s fingerprint.</p>
<p>Parameters</p>
<ul>
<li><code>algorithm</code> – String name of hash algorithm to use, valid options are <code>md5</code>,<br>           <code>sha1</code>, <code>sha256</code>, <code>sha384</code>, <code>sha512</code></li>
<li><code>hashType</code> – String name of fingerprint hash type to use, valid options are<br>          <code>ssh</code> (the type of fingerprint used by OpenSSH, e.g. in<br>          <code>ssh-keygen</code>), <code>spki</code> (used by HPKP, some OpenSSL applications)</li>
</ul>

        <h3 id="Key-createVerify-hashAlgorithm"   >
          <a href="#Key-createVerify-hashAlgorithm" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-createVerify-hashAlgorithm" class="headerlink" title="Key#createVerify([hashAlgorithm])"></a><code>Key#createVerify([hashAlgorithm])</code></h3>
      <p>Creates a <code>crypto.Verifier</code> specialized to use this Key (and the correct public<br>key algorithm to match it). The returned Verifier has the same API as a regular<br>one, except that the <code>verify()</code> function takes only the target signature as an<br>argument.</p>
<p>Parameters</p>
<ul>
<li><code>hashAlgorithm</code> – optional String name of hash algorithm to use, any<br>               supported by OpenSSL are valid, usually including<br>               <code>sha1</code>, <code>sha256</code>.</li>
</ul>
<p><code>v.verify(signature[, format])</code> Parameters</p>
<ul>
<li><code>signature</code> – either a Signature object, or a Buffer or String</li>
<li><code>format</code> – optional String, name of format to interpret given String with.<br>        Not valid if <code>signature</code> is a Signature or Buffer.</li>
</ul>

        <h3 id="Key-createDiffieHellman"   >
          <a href="#Key-createDiffieHellman" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-createDiffieHellman" class="headerlink" title="Key#createDiffieHellman()"></a><code>Key#createDiffieHellman()</code></h3>
      
        <h3 id="Key-createDH"   >
          <a href="#Key-createDH" class="heading-link"><i class="fas fa-link"></i></a><a href="#Key-createDH" class="headerlink" title="Key#createDH()"></a><code>Key#createDH()</code></h3>
      <p>Creates a Diffie-Hellman key exchange object initialized with this key and all<br>necessary parameters. This has the same API as a <code>crypto.DiffieHellman</code><br>instance, except that functions take <code>Key</code> and <code>PrivateKey</code> objects as<br>arguments, and return them where indicated for.</p>
<p>This is only valid for keys belonging to a cryptosystem that supports DHE<br>or a close analogue (i.e. <code>dsa</code>, <code>ecdsa</code> and <code>curve25519</code> keys). An attempt<br>to call this function on other keys will yield an <code>Error</code>.</p>

        <h2 id="Private-keys"   >
          <a href="#Private-keys" class="heading-link"><i class="fas fa-link"></i></a><a href="#Private-keys" class="headerlink" title="Private keys"></a>Private keys</h2>
      
        <h3 id="parsePrivateKey-data-format-39-auto-39-options"   >
          <a href="#parsePrivateKey-data-format-39-auto-39-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#parsePrivateKey-data-format-39-auto-39-options" class="headerlink" title="parsePrivateKey(data[, format = &#39;auto&#39;[, options]])"></a><code>parsePrivateKey(data[, format = &#39;auto&#39;[, options]])</code></h3>
      <p>Parses a private key from a given data format and returns a new<br><code>PrivateKey</code> object.</p>
<p>Parameters</p>
<ul>
<li><code>data</code> – Either a Buffer or String, containing the key</li>
<li><code>format</code> – String name of format to use, valid options are:<ul>
<li><code>auto</code>: choose automatically from all below</li>
<li><code>pem</code>: supports both PKCS#1 and PKCS#8</li>
<li><code>ssh</code>, <code>openssh</code>: new post-OpenSSH 6.5 internal format, produced by<br>              <code>ssh-keygen -o</code></li>
<li><code>pkcs1</code>, <code>pkcs8</code>: variants of <code>pem</code></li>
<li><code>rfc4253</code>: raw OpenSSH wire format</li>
<li><code>dnssec</code>: <code>.private</code> format output by <code>dnssec-keygen</code> etc.</li>
</ul>
</li>
<li><code>options</code> – Optional Object, extra options, with keys:<ul>
<li><code>filename</code> – Optional String, name for the key being parsed<br>          (eg. the filename that was opened). Used to generate<br>          Error messages</li>
<li><code>passphrase</code> – Optional String, encryption passphrase used to decrypt an<br>            encrypted PEM file</li>
</ul>
</li>
</ul>

        <h3 id="generatePrivateKey-type-options"   >
          <a href="#generatePrivateKey-type-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#generatePrivateKey-type-options" class="headerlink" title="generatePrivateKey(type[, options])"></a><code>generatePrivateKey(type[, options])</code></h3>
      <p>Generates a new private key of a certain key type, from random data.</p>
<p>Parameters</p>
<ul>
<li><code>type</code> – String, type of key to generate. Currently supported are <code>&#39;ecdsa&#39;</code><br>      and <code>&#39;ed25519&#39;</code></li>
<li><code>options</code> – optional Object, with keys:<ul>
<li><code>curve</code> – optional String, for <code>&#39;ecdsa&#39;</code> keys, specifies the curve to use.<br>       If ECDSA is specified and this option is not given, defaults to<br>       using <code>&#39;nistp256&#39;</code>.</li>
</ul>
</li>
</ul>

        <h3 id="PrivateKey-isPrivateKey-obj"   >
          <a href="#PrivateKey-isPrivateKey-obj" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-isPrivateKey-obj" class="headerlink" title="PrivateKey.isPrivateKey(obj)"></a><code>PrivateKey.isPrivateKey(obj)</code></h3>
      <p>Returns <code>true</code> if the given object is a valid <code>PrivateKey</code> object created by a<br>version of <code>sshpk</code> compatible with this one.</p>
<p>Parameters</p>
<ul>
<li><code>obj</code> – Object to identify</li>
</ul>

        <h3 id="PrivateKey-type"   >
          <a href="#PrivateKey-type" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-type" class="headerlink" title="PrivateKey#type"></a><code>PrivateKey#type</code></h3>
      <p>String, the type of key. Valid options are <code>rsa</code>, <code>dsa</code>, <code>ecdsa</code>.</p>

        <h3 id="PrivateKey-size"   >
          <a href="#PrivateKey-size" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-size" class="headerlink" title="PrivateKey#size"></a><code>PrivateKey#size</code></h3>
      <p>Integer, “size” of the key in bits. For RSA&#x2F;DSA this is the size of the modulus;<br>for ECDSA this is the bit size of the curve in use.</p>

        <h3 id="PrivateKey-curve"   >
          <a href="#PrivateKey-curve" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-curve" class="headerlink" title="PrivateKey#curve"></a><code>PrivateKey#curve</code></h3>
      <p>Only present if <code>this.type === &#39;ecdsa&#39;</code>, string containing the name of the<br>named curve used with this key. Possible values include <code>nistp256</code>, <code>nistp384</code><br>and <code>nistp521</code>.</p>

        <h3 id="PrivateKey-toBuffer-format-39-pkcs1-39"   >
          <a href="#PrivateKey-toBuffer-format-39-pkcs1-39" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-toBuffer-format-39-pkcs1-39" class="headerlink" title="PrivateKey#toBuffer([format = &#39;pkcs1&#39;])"></a><code>PrivateKey#toBuffer([format = &#39;pkcs1&#39;])</code></h3>
      <p>Convert the key into a given data format and return the serialized key as<br>a Buffer.</p>
<p>Parameters</p>
<ul>
<li><code>format</code> – String name of format to use, valid options are listed under<br>        <code>parsePrivateKey</code>. Note that ED25519 keys default to <code>openssh</code><br>        format instead (as they have no <code>pkcs1</code> representation).</li>
</ul>

        <h3 id="PrivateKey-toString-format-39-pkcs1-39"   >
          <a href="#PrivateKey-toString-format-39-pkcs1-39" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-toString-format-39-pkcs1-39" class="headerlink" title="PrivateKey#toString([format = &#39;pkcs1&#39;])"></a><code>PrivateKey#toString([format = &#39;pkcs1&#39;])</code></h3>
      <p>Same as <code>this.toBuffer(format).toString()</code>.</p>

        <h3 id="PrivateKey-toPublic"   >
          <a href="#PrivateKey-toPublic" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-toPublic" class="headerlink" title="PrivateKey#toPublic()"></a><code>PrivateKey#toPublic()</code></h3>
      <p>Extract just the public part of this private key, and return it as a <code>Key</code><br>object.</p>

        <h3 id="PrivateKey-fingerprint-algorithm-39-sha256-39"   >
          <a href="#PrivateKey-fingerprint-algorithm-39-sha256-39" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-fingerprint-algorithm-39-sha256-39" class="headerlink" title="PrivateKey#fingerprint([algorithm = &#39;sha256&#39;])"></a><code>PrivateKey#fingerprint([algorithm = &#39;sha256&#39;])</code></h3>
      <p>Same as <code>this.toPublic().fingerprint()</code>.</p>

        <h3 id="PrivateKey-createVerify-hashAlgorithm"   >
          <a href="#PrivateKey-createVerify-hashAlgorithm" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-createVerify-hashAlgorithm" class="headerlink" title="PrivateKey#createVerify([hashAlgorithm])"></a><code>PrivateKey#createVerify([hashAlgorithm])</code></h3>
      <p>Same as <code>this.toPublic().createVerify()</code>.</p>

        <h3 id="PrivateKey-createSign-hashAlgorithm"   >
          <a href="#PrivateKey-createSign-hashAlgorithm" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-createSign-hashAlgorithm" class="headerlink" title="PrivateKey#createSign([hashAlgorithm])"></a><code>PrivateKey#createSign([hashAlgorithm])</code></h3>
      <p>Creates a <code>crypto.Sign</code> specialized to use this PrivateKey (and the correct<br>key algorithm to match it). The returned Signer has the same API as a regular<br>one, except that the <code>sign()</code> function takes no arguments, and returns a<br><code>Signature</code> object.</p>
<p>Parameters</p>
<ul>
<li><code>hashAlgorithm</code> – optional String name of hash algorithm to use, any<br>               supported by OpenSSL are valid, usually including<br>               <code>sha1</code>, <code>sha256</code>.</li>
</ul>
<p><code>v.sign()</code> Parameters</p>
<ul>
<li>none</li>
</ul>

        <h3 id="PrivateKey-derive-newType"   >
          <a href="#PrivateKey-derive-newType" class="heading-link"><i class="fas fa-link"></i></a><a href="#PrivateKey-derive-newType" class="headerlink" title="PrivateKey#derive(newType)"></a><code>PrivateKey#derive(newType)</code></h3>
      <p>Derives a related key of type <code>newType</code> from this key. Currently this is<br>only supported to change between <code>ed25519</code> and <code>curve25519</code> keys which are<br>stored with the same private key (but usually distinct public keys in order<br>to avoid degenerate keys that lead to a weak Diffie-Hellman exchange).</p>
<p>Parameters</p>
<ul>
<li><code>newType</code> – String, type of key to derive, either <code>ed25519</code> or <code>curve25519</code></li>
</ul>

        <h2 id="Fingerprints"   >
          <a href="#Fingerprints" class="heading-link"><i class="fas fa-link"></i></a><a href="#Fingerprints" class="headerlink" title="Fingerprints"></a>Fingerprints</h2>
      
        <h3 id="parseFingerprint-fingerprint-options"   >
          <a href="#parseFingerprint-fingerprint-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#parseFingerprint-fingerprint-options" class="headerlink" title="parseFingerprint(fingerprint[, options])"></a><code>parseFingerprint(fingerprint[, options])</code></h3>
      <p>Pre-parses a fingerprint, creating a <code>Fingerprint</code> object that can be used to<br>quickly locate a key by using the <code>Fingerprint#matches</code> function.</p>
<p>Parameters</p>
<ul>
<li><code>fingerprint</code> – String, the fingerprint value, in any supported format</li>
<li><code>options</code> – Optional Object, with properties:<ul>
<li><code>algorithms</code> – Array of strings, names of hash algorithms to limit<br>        support to. If <code>fingerprint</code> uses a hash algorithm not on<br>        this list, throws <code>InvalidAlgorithmError</code>.</li>
<li><code>hashType</code> – String, the type of hash the fingerprint uses, either <code>ssh</code><br>          or <code>spki</code> (normally auto-detected based on the format, but<br>          can be overridden)</li>
<li><code>type</code> – String, the entity this fingerprint identifies, either <code>key</code> or<br>      <code>certificate</code></li>
</ul>
</li>
</ul>

        <h3 id="Fingerprint-isFingerprint-obj"   >
          <a href="#Fingerprint-isFingerprint-obj" class="heading-link"><i class="fas fa-link"></i></a><a href="#Fingerprint-isFingerprint-obj" class="headerlink" title="Fingerprint.isFingerprint(obj)"></a><code>Fingerprint.isFingerprint(obj)</code></h3>
      <p>Returns <code>true</code> if the given object is a valid <code>Fingerprint</code> object created by a<br>version of <code>sshpk</code> compatible with this one.</p>
<p>Parameters</p>
<ul>
<li><code>obj</code> – Object to identify</li>
</ul>

        <h3 id="Fingerprint-toString-format"   >
          <a href="#Fingerprint-toString-format" class="heading-link"><i class="fas fa-link"></i></a><a href="#Fingerprint-toString-format" class="headerlink" title="Fingerprint#toString([format])"></a><code>Fingerprint#toString([format])</code></h3>
      <p>Returns a fingerprint as a string, in the given format.</p>
<p>Parameters</p>
<ul>
<li><code>format</code> – Optional String, format to use, valid options are <code>hex</code> and<br>        <code>base64</code>. If this <code>Fingerprint</code> uses the <code>md5</code> algorithm, the<br>        default format is <code>hex</code>. Otherwise, the default is <code>base64</code>.</li>
</ul>

        <h3 id="Fingerprint-matches-keyOrCertificate"   >
          <a href="#Fingerprint-matches-keyOrCertificate" class="heading-link"><i class="fas fa-link"></i></a><a href="#Fingerprint-matches-keyOrCertificate" class="headerlink" title="Fingerprint#matches(keyOrCertificate)"></a><code>Fingerprint#matches(keyOrCertificate)</code></h3>
      <p>Verifies whether or not this <code>Fingerprint</code> matches a given <code>Key</code> or<br><code>Certificate</code>. This function uses double-hashing to avoid leaking timing<br>information. Returns a boolean.</p>
<p>Note that a <code>Key</code>-type Fingerprint will always return <code>false</code> if asked to match<br>a <code>Certificate</code> and vice versa.</p>
<p>Parameters</p>
<ul>
<li><code>keyOrCertificate</code> – a <code>Key</code> object or <code>Certificate</code> object, the entity to<br>                  match this fingerprint against</li>
</ul>

        <h2 id="Signatures"   >
          <a href="#Signatures" class="heading-link"><i class="fas fa-link"></i></a><a href="#Signatures" class="headerlink" title="Signatures"></a>Signatures</h2>
      
        <h3 id="parseSignature-signature-algorithm-format"   >
          <a href="#parseSignature-signature-algorithm-format" class="heading-link"><i class="fas fa-link"></i></a><a href="#parseSignature-signature-algorithm-format" class="headerlink" title="parseSignature(signature, algorithm, format)"></a><code>parseSignature(signature, algorithm, format)</code></h3>
      <p>Parses a signature in a given format, creating a <code>Signature</code> object. Useful<br>for converting between the SSH and ASN.1 (PKCS&#x2F;OpenSSL) signature formats, and<br>also returned as output from <code>PrivateKey#createSign().sign()</code>.</p>
<p>A Signature object can also be passed to a verifier produced by<br><code>Key#createVerify()</code> and it will automatically be converted internally into the<br>correct format for verification.</p>
<p>Parameters</p>
<ul>
<li><code>signature</code> – a Buffer (binary) or String (base64), data of the actual<br>           signature in the given format</li>
<li><code>algorithm</code> – a String, name of the algorithm to be used, possible values<br>           are <code>rsa</code>, <code>dsa</code>, <code>ecdsa</code></li>
<li><code>format</code> – a String, either <code>asn1</code> or <code>ssh</code></li>
</ul>

        <h3 id="Signature-isSignature-obj"   >
          <a href="#Signature-isSignature-obj" class="heading-link"><i class="fas fa-link"></i></a><a href="#Signature-isSignature-obj" class="headerlink" title="Signature.isSignature(obj)"></a><code>Signature.isSignature(obj)</code></h3>
      <p>Returns <code>true</code> if the given object is a valid <code>Signature</code> object created by a<br>version of <code>sshpk</code> compatible with this one.</p>
<p>Parameters</p>
<ul>
<li><code>obj</code> – Object to identify</li>
</ul>

        <h3 id="Signature-toBuffer-format-39-asn1-39"   >
          <a href="#Signature-toBuffer-format-39-asn1-39" class="heading-link"><i class="fas fa-link"></i></a><a href="#Signature-toBuffer-format-39-asn1-39" class="headerlink" title="Signature#toBuffer([format = &#39;asn1&#39;])"></a><code>Signature#toBuffer([format = &#39;asn1&#39;])</code></h3>
      <p>Converts a Signature to the given format and returns it as a Buffer.</p>
<p>Parameters</p>
<ul>
<li><code>format</code> – a String, either <code>asn1</code> or <code>ssh</code></li>
</ul>

        <h3 id="Signature-toString-format-39-asn1-39"   >
          <a href="#Signature-toString-format-39-asn1-39" class="heading-link"><i class="fas fa-link"></i></a><a href="#Signature-toString-format-39-asn1-39" class="headerlink" title="Signature#toString([format = &#39;asn1&#39;])"></a><code>Signature#toString([format = &#39;asn1&#39;])</code></h3>
      <p>Same as <code>this.toBuffer(format).toString(&#39;base64&#39;)</code>.</p>

        <h2 id="Certificates"   >
          <a href="#Certificates" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificates" class="headerlink" title="Certificates"></a>Certificates</h2>
      <p><code>sshpk</code> includes basic support for parsing certificates in X.509 (PEM) format<br>and the OpenSSH certificate format. This feature is intended to be used mainly<br>to access basic metadata about certificates, extract public keys from them, and<br>also to generate simple self-signed certificates from an existing key.</p>
<p>Notably, there is no implementation of CA chain-of-trust verification, and only<br>very minimal support for key usage restrictions. Please do the security world<br>a favour, and DO NOT use this code for certificate verification in the<br>traditional X.509 CA chain style.</p>

        <h3 id="parseCertificate-data-format"   >
          <a href="#parseCertificate-data-format" class="heading-link"><i class="fas fa-link"></i></a><a href="#parseCertificate-data-format" class="headerlink" title="parseCertificate(data, format)"></a><code>parseCertificate(data, format)</code></h3>
      <p>Parameters</p>
<ul>
<li><code>data</code> – a Buffer or String</li>
<li><code>format</code> – a String, format to use, one of <code>&#39;openssh&#39;</code>, <code>&#39;pem&#39;</code> (X.509 in a<br>        PEM wrapper), or <code>&#39;x509&#39;</code> (raw DER encoded)</li>
</ul>

        <h3 id="createSelfSignedCertificate-subject-privateKey-options"   >
          <a href="#createSelfSignedCertificate-subject-privateKey-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#createSelfSignedCertificate-subject-privateKey-options" class="headerlink" title="createSelfSignedCertificate(subject, privateKey[, options])"></a><code>createSelfSignedCertificate(subject, privateKey[, options])</code></h3>
      <p>Parameters</p>
<ul>
<li><code>subject</code> – an Identity, the subject of the certificate</li>
<li><code>privateKey</code> – a PrivateKey, the key of the subject: will be used both to be<br>            placed in the certificate and also to sign it (since this is<br>            a self-signed certificate)</li>
<li><code>options</code> – optional Object, with keys:<ul>
<li><code>lifetime</code> – optional Number, lifetime of the certificate from now in<br>          seconds</li>
<li><code>validFrom</code>, <code>validUntil</code> – optional Dates, beginning and end of<br>                         certificate validity period. If given<br>                         <code>lifetime</code> will be ignored</li>
<li><code>serial</code> – optional Buffer, the serial number of the certificate</li>
<li><code>purposes</code> – optional Array of String, X.509 key usage restrictions</li>
</ul>
</li>
</ul>

        <h3 id="createCertificate-subject-key-issuer-issuerKey-options"   >
          <a href="#createCertificate-subject-key-issuer-issuerKey-options" class="heading-link"><i class="fas fa-link"></i></a><a href="#createCertificate-subject-key-issuer-issuerKey-options" class="headerlink" title="createCertificate(subject, key, issuer, issuerKey[, options])"></a><code>createCertificate(subject, key, issuer, issuerKey[, options])</code></h3>
      <p>Parameters</p>
<ul>
<li><code>subject</code> – an Identity, the subject of the certificate</li>
<li><code>key</code> – a Key, the public key of the subject</li>
<li><code>issuer</code> – an Identity, the issuer of the certificate who will sign it</li>
<li><code>issuerKey</code> – a PrivateKey, the issuer’s private key for signing</li>
<li><code>options</code> – optional Object, with keys:<ul>
<li><code>lifetime</code> – optional Number, lifetime of the certificate from now in<br>          seconds</li>
<li><code>validFrom</code>, <code>validUntil</code> – optional Dates, beginning and end of<br>                         certificate validity period. If given<br>                         <code>lifetime</code> will be ignored</li>
<li><code>serial</code> – optional Buffer, the serial number of the certificate</li>
<li><code>purposes</code> – optional Array of String, X.509 key usage restrictions</li>
</ul>
</li>
</ul>

        <h3 id="Certificate-subjects"   >
          <a href="#Certificate-subjects" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-subjects" class="headerlink" title="Certificate#subjects"></a><code>Certificate#subjects</code></h3>
      <p>Array of <code>Identity</code> instances describing the subject of this certificate.</p>

        <h3 id="Certificate-issuer"   >
          <a href="#Certificate-issuer" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-issuer" class="headerlink" title="Certificate#issuer"></a><code>Certificate#issuer</code></h3>
      <p>The <code>Identity</code> of the Certificate’s issuer (signer).</p>

        <h3 id="Certificate-subjectKey"   >
          <a href="#Certificate-subjectKey" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-subjectKey" class="headerlink" title="Certificate#subjectKey"></a><code>Certificate#subjectKey</code></h3>
      <p>The public key of the subject of the certificate, as a <code>Key</code> instance.</p>

        <h3 id="Certificate-issuerKey"   >
          <a href="#Certificate-issuerKey" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-issuerKey" class="headerlink" title="Certificate#issuerKey"></a><code>Certificate#issuerKey</code></h3>
      <p>The public key of the signing issuer of this certificate, as a <code>Key</code> instance.<br>May be <code>undefined</code> if the issuer’s key is unknown (e.g. on an X509 certificate).</p>

        <h3 id="Certificate-serial"   >
          <a href="#Certificate-serial" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-serial" class="headerlink" title="Certificate#serial"></a><code>Certificate#serial</code></h3>
      <p>The serial number of the certificate. As this is normally a 64-bit or wider<br>integer, it is returned as a Buffer.</p>

        <h3 id="Certificate-purposes"   >
          <a href="#Certificate-purposes" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-purposes" class="headerlink" title="Certificate#purposes"></a><code>Certificate#purposes</code></h3>
      <p>Array of Strings indicating the X.509 key usage purposes that this certificate<br>is valid for. The possible strings at the moment are:</p>
<ul>
<li><code>&#39;signature&#39;</code> – key can be used for digital signatures</li>
<li><code>&#39;identity&#39;</code> – key can be used to attest about the identity of the signer<br>            (X.509 calls this <code>nonRepudiation</code>)</li>
<li><code>&#39;codeSigning&#39;</code> – key can be used to sign executable code</li>
<li><code>&#39;keyEncryption&#39;</code> – key can be used to encrypt other keys</li>
<li><code>&#39;encryption&#39;</code> – key can be used to encrypt data (only applies for RSA)</li>
<li><code>&#39;keyAgreement&#39;</code> – key can be used for key exchange protocols such as<br>                Diffie-Hellman</li>
<li><code>&#39;ca&#39;</code> – key can be used to sign other certificates (is a Certificate<br>      Authority)</li>
<li><code>&#39;crl&#39;</code> – key can be used to sign Certificate Revocation Lists (CRLs)</li>
</ul>

        <h3 id="Certificate-getExtension-nameOrOid"   >
          <a href="#Certificate-getExtension-nameOrOid" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-getExtension-nameOrOid" class="headerlink" title="Certificate#getExtension(nameOrOid)"></a><code>Certificate#getExtension(nameOrOid)</code></h3>
      <p>Retrieves information about a certificate extension, if present, or returns<br><code>undefined</code> if not. The string argument <code>nameOrOid</code> should be either the OID<br>(for X509 extensions) or the name (for OpenSSH extensions) of the extension<br>to retrieve.</p>
<p>The object returned will have the following properties:</p>
<ul>
<li><code>format</code> – String, set to either <code>&#39;x509&#39;</code> or <code>&#39;openssh&#39;</code></li>
<li><code>name</code> or <code>oid</code> – String, only one set based on value of <code>format</code></li>
<li><code>data</code> – Buffer, the raw data inside the extension</li>
</ul>

        <h3 id="Certificate-getExtensions"   >
          <a href="#Certificate-getExtensions" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-getExtensions" class="headerlink" title="Certificate#getExtensions()"></a><code>Certificate#getExtensions()</code></h3>
      <p>Returns an Array of all present certificate extensions, in the same manner and<br>format as <code>getExtension()</code>.</p>

        <h3 id="Certificate-isExpired-when"   >
          <a href="#Certificate-isExpired-when" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-isExpired-when" class="headerlink" title="Certificate#isExpired([when])"></a><code>Certificate#isExpired([when])</code></h3>
      <p>Tests whether the Certificate is currently expired (i.e. the <code>validFrom</code> and<br><code>validUntil</code> dates specify a range of time that does not include the current<br>time).</p>
<p>Parameters</p>
<ul>
<li><code>when</code> – optional Date, if specified, tests whether the Certificate was or<br>      will be expired at the specified time instead of now</li>
</ul>
<p>Returns a Boolean.</p>

        <h3 id="Certificate-isSignedByKey-key"   >
          <a href="#Certificate-isSignedByKey-key" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-isSignedByKey-key" class="headerlink" title="Certificate#isSignedByKey(key)"></a><code>Certificate#isSignedByKey(key)</code></h3>
      <p>Tests whether the Certificate was validly signed by the given (public) Key.</p>
<p>Parameters</p>
<ul>
<li><code>key</code> – a Key instance</li>
</ul>
<p>Returns a Boolean.</p>

        <h3 id="Certificate-isSignedBy-certificate"   >
          <a href="#Certificate-isSignedBy-certificate" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-isSignedBy-certificate" class="headerlink" title="Certificate#isSignedBy(certificate)"></a><code>Certificate#isSignedBy(certificate)</code></h3>
      <p>Tests whether this Certificate was validly signed by the subject of the given<br>certificate. Also tests that the issuer Identity of this Certificate and the<br>subject Identity of the other Certificate are equivalent.</p>
<p>Parameters</p>
<ul>
<li><code>certificate</code> – another Certificate instance</li>
</ul>
<p>Returns a Boolean.</p>

        <h3 id="Certificate-fingerprint-hashAlgo"   >
          <a href="#Certificate-fingerprint-hashAlgo" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-fingerprint-hashAlgo" class="headerlink" title="Certificate#fingerprint([hashAlgo])"></a><code>Certificate#fingerprint([hashAlgo])</code></h3>
      <p>Returns the X509-style fingerprint of the entire certificate (as a Fingerprint<br>instance). This matches what a web-browser or similar would display as the<br>certificate fingerprint and should not be confused with the fingerprint of the<br>subject’s public key.</p>
<p>Parameters</p>
<ul>
<li><code>hashAlgo</code> – an optional String, any hash function name</li>
</ul>

        <h3 id="Certificate-toBuffer-format"   >
          <a href="#Certificate-toBuffer-format" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-toBuffer-format" class="headerlink" title="Certificate#toBuffer([format])"></a><code>Certificate#toBuffer([format])</code></h3>
      <p>Serializes the Certificate to a Buffer and returns it.</p>
<p>Parameters</p>
<ul>
<li><code>format</code> – an optional String, output format, one of <code>&#39;openssh&#39;</code>, <code>&#39;pem&#39;</code> or<br>        <code>&#39;x509&#39;</code>. Defaults to <code>&#39;x509&#39;</code>.</li>
</ul>
<p>Returns a Buffer.</p>

        <h3 id="Certificate-toString-format"   >
          <a href="#Certificate-toString-format" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-toString-format" class="headerlink" title="Certificate#toString([format])"></a><code>Certificate#toString([format])</code></h3>
      <ul>
<li><code>format</code> – an optional String, output format, one of <code>&#39;openssh&#39;</code>, <code>&#39;pem&#39;</code> or<br>        <code>&#39;x509&#39;</code>. Defaults to <code>&#39;pem&#39;</code>.</li>
</ul>
<p>Returns a String.</p>

        <h2 id="Certificate-identities"   >
          <a href="#Certificate-identities" class="heading-link"><i class="fas fa-link"></i></a><a href="#Certificate-identities" class="headerlink" title="Certificate identities"></a>Certificate identities</h2>
      
        <h3 id="identityForHost-hostname"   >
          <a href="#identityForHost-hostname" class="heading-link"><i class="fas fa-link"></i></a><a href="#identityForHost-hostname" class="headerlink" title="identityForHost(hostname)"></a><code>identityForHost(hostname)</code></h3>
      <p>Constructs a host-type Identity for a given hostname.</p>
<p>Parameters</p>
<ul>
<li><code>hostname</code> – the fully qualified DNS name of the host</li>
</ul>
<p>Returns an Identity instance.</p>

        <h3 id="identityForUser-uid"   >
          <a href="#identityForUser-uid" class="heading-link"><i class="fas fa-link"></i></a><a href="#identityForUser-uid" class="headerlink" title="identityForUser(uid)"></a><code>identityForUser(uid)</code></h3>
      <p>Constructs a user-type Identity for a given UID.</p>
<p>Parameters</p>
<ul>
<li><code>uid</code> – a String, user identifier (login name)</li>
</ul>
<p>Returns an Identity instance.</p>

        <h3 id="identityForEmail-email"   >
          <a href="#identityForEmail-email" class="heading-link"><i class="fas fa-link"></i></a><a href="#identityForEmail-email" class="headerlink" title="identityForEmail(email)"></a><code>identityForEmail(email)</code></h3>
      <p>Constructs an email-type Identity for a given email address.</p>
<p>Parameters</p>
<ul>
<li><code>email</code> – a String, email address</li>
</ul>
<p>Returns an Identity instance.</p>

        <h3 id="identityFromDN-dn"   >
          <a href="#identityFromDN-dn" class="heading-link"><i class="fas fa-link"></i></a><a href="#identityFromDN-dn" class="headerlink" title="identityFromDN(dn)"></a><code>identityFromDN(dn)</code></h3>
      <p>Parses an LDAP-style DN string (e.g. <code>&#39;CN=foo, C=US&#39;</code>) and turns it into an<br>Identity instance.</p>
<p>Parameters</p>
<ul>
<li><code>dn</code> – a String</li>
</ul>
<p>Returns an Identity instance.</p>

        <h3 id="identityFromArray-arr"   >
          <a href="#identityFromArray-arr" class="heading-link"><i class="fas fa-link"></i></a><a href="#identityFromArray-arr" class="headerlink" title="identityFromArray(arr)"></a><code>identityFromArray(arr)</code></h3>
      <p>Constructs an Identity from an array of DN components (see <code>Identity#toArray()</code><br>for the format).</p>
<p>Parameters</p>
<ul>
<li><code>arr</code> – an Array of Objects, DN components with <code>name</code> and <code>value</code></li>
</ul>
<p>Returns an Identity instance.</p>
<p>Supported attributes in DNs:</p>
<div class="table-container"><table>
<thead>
<tr>
<th>Attribute name</th>
<th>OID</th>
</tr>
</thead>
<tbody><tr>
<td><code>cn</code></td>
<td><code>2.5.4.3</code></td>
</tr>
<tr>
<td><code>o</code></td>
<td><code>2.5.4.10</code></td>
</tr>
<tr>
<td><code>ou</code></td>
<td><code>2.5.4.11</code></td>
</tr>
<tr>
<td><code>l</code></td>
<td><code>2.5.4.7</code></td>
</tr>
<tr>
<td><code>s</code></td>
<td><code>2.5.4.8</code></td>
</tr>
<tr>
<td><code>c</code></td>
<td><code>2.5.4.6</code></td>
</tr>
<tr>
<td><code>sn</code></td>
<td><code>2.5.4.4</code></td>
</tr>
<tr>
<td><code>postalCode</code></td>
<td><code>2.5.4.17</code></td>
</tr>
<tr>
<td><code>serialNumber</code></td>
<td><code>2.5.4.5</code></td>
</tr>
<tr>
<td><code>street</code></td>
<td><code>2.5.4.9</code></td>
</tr>
<tr>
<td><code>x500UniqueIdentifier</code></td>
<td><code>2.5.4.45</code></td>
</tr>
<tr>
<td><code>role</code></td>
<td><code>2.5.4.72</code></td>
</tr>
<tr>
<td><code>telephoneNumber</code></td>
<td><code>2.5.4.20</code></td>
</tr>
<tr>
<td><code>description</code></td>
<td><code>2.5.4.13</code></td>
</tr>
<tr>
<td><code>dc</code></td>
<td><code>0.9.2342.19200300.100.1.25</code></td>
</tr>
<tr>
<td><code>uid</code></td>
<td><code>0.9.2342.19200300.100.1.1</code></td>
</tr>
<tr>
<td><code>mail</code></td>
<td><code>0.9.2342.19200300.100.1.3</code></td>
</tr>
<tr>
<td><code>title</code></td>
<td><code>2.5.4.12</code></td>
</tr>
<tr>
<td><code>gn</code></td>
<td><code>2.5.4.42</code></td>
</tr>
<tr>
<td><code>initials</code></td>
<td><code>2.5.4.43</code></td>
</tr>
<tr>
<td><code>pseudonym</code></td>
<td><code>2.5.4.65</code></td>
</tr>
</tbody></table></div>

        <h3 id="Identity-toString"   >
          <a href="#Identity-toString" class="heading-link"><i class="fas fa-link"></i></a><a href="#Identity-toString" class="headerlink" title="Identity#toString()"></a><code>Identity#toString()</code></h3>
      <p>Returns the identity as an LDAP-style DN string.<br>e.g. <code>&#39;CN=foo, O=bar corp, C=us&#39;</code></p>

        <h3 id="Identity-type"   >
          <a href="#Identity-type" class="heading-link"><i class="fas fa-link"></i></a><a href="#Identity-type" class="headerlink" title="Identity#type"></a><code>Identity#type</code></h3>
      <p>The type of identity. One of <code>&#39;host&#39;</code>, <code>&#39;user&#39;</code>, <code>&#39;email&#39;</code> or <code>&#39;unknown&#39;</code></p>

        <h3 id="Identity-hostname"   >
          <a href="#Identity-hostname" class="heading-link"><i class="fas fa-link"></i></a><a href="#Identity-hostname" class="headerlink" title="Identity#hostname"></a><code>Identity#hostname</code></h3>
      
        <h3 id="Identity-uid"   >
          <a href="#Identity-uid" class="heading-link"><i class="fas fa-link"></i></a><a href="#Identity-uid" class="headerlink" title="Identity#uid"></a><code>Identity#uid</code></h3>
      
        <h3 id="Identity-email"   >
          <a href="#Identity-email" class="heading-link"><i class="fas fa-link"></i></a><a href="#Identity-email" class="headerlink" title="Identity#email"></a><code>Identity#email</code></h3>
      <p>Set when <code>type</code> is <code>&#39;host&#39;</code>, <code>&#39;user&#39;</code>, or <code>&#39;email&#39;</code>, respectively. Strings.</p>

        <h3 id="Identity-cn"   >
          <a href="#Identity-cn" class="heading-link"><i class="fas fa-link"></i></a><a href="#Identity-cn" class="headerlink" title="Identity#cn"></a><code>Identity#cn</code></h3>
      <p>The value of the first <code>CN=</code> in the DN, if any. It’s probably better to use<br>the <code>#get()</code> method instead of this property.</p>

        <h3 id="Identity-get-name-asArray"   >
          <a href="#Identity-get-name-asArray" class="heading-link"><i class="fas fa-link"></i></a><a href="#Identity-get-name-asArray" class="headerlink" title="Identity#get(name[, asArray])"></a><code>Identity#get(name[, asArray])</code></h3>
      <p>Returns the value of a named attribute in the Identity DN. If there is no<br>attribute of the given name, returns <code>undefined</code>. If multiple components<br>of the DN contain an attribute of this name, an exception is thrown unless<br>the <code>asArray</code> argument is given as <code>true</code> – then they will be returned as<br>an Array in the same order they appear in the DN.</p>
<p>Parameters</p>
<ul>
<li><code>name</code> – a String</li>
<li><code>asArray</code> – an optional Boolean</li>
</ul>

        <h3 id="Identity-toArray"   >
          <a href="#Identity-toArray" class="heading-link"><i class="fas fa-link"></i></a><a href="#Identity-toArray" class="headerlink" title="Identity#toArray()"></a><code>Identity#toArray()</code></h3>
      <p>Returns the Identity as an Array of DN component objects. This looks like:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[ &#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;cn&quot;</span>,</span><br><span class="line">  <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Joe Bloggs&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;o&quot;</span>,</span><br><span class="line">  <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Organisation Ltd&quot;</span></span><br><span class="line">&#125; ]</span><br></pre></td></tr></table></div></figure>

<p>Each object has a <code>name</code> and a <code>value</code> property. The returned objects may be<br>safely modified.</p>

        <h2 id="Errors"   >
          <a href="#Errors" class="heading-link"><i class="fas fa-link"></i></a><a href="#Errors" class="headerlink" title="Errors"></a>Errors</h2>
      
        <h3 id="InvalidAlgorithmError"   >
          <a href="#InvalidAlgorithmError" class="heading-link"><i class="fas fa-link"></i></a><a href="#InvalidAlgorithmError" class="headerlink" title="InvalidAlgorithmError"></a><code>InvalidAlgorithmError</code></h3>
      <p>The specified algorithm is not valid, either because it is not supported, or<br>because it was not included on a list of allowed algorithms.</p>
<p>Thrown by <code>Fingerprint.parse</code>, <code>Key#fingerprint</code>.</p>
<p>Properties</p>
<ul>
<li><code>algorithm</code> – the algorithm that could not be validated</li>
</ul>

        <h3 id="FingerprintFormatError"   >
          <a href="#FingerprintFormatError" class="heading-link"><i class="fas fa-link"></i></a><a href="#FingerprintFormatError" class="headerlink" title="FingerprintFormatError"></a><code>FingerprintFormatError</code></h3>
      <p>The fingerprint string given could not be parsed as a supported fingerprint<br>format, or the specified fingerprint format is invalid.</p>
<p>Thrown by <code>Fingerprint.parse</code>, <code>Fingerprint#toString</code>.</p>
<p>Properties</p>
<ul>
<li><code>fingerprint</code> – if caused by a fingerprint, the string value given</li>
<li><code>format</code> – if caused by an invalid format specification, the string value given</li>
</ul>

        <h3 id="KeyParseError"   >
          <a href="#KeyParseError" class="heading-link"><i class="fas fa-link"></i></a><a href="#KeyParseError" class="headerlink" title="KeyParseError"></a><code>KeyParseError</code></h3>
      <p>The key data given could not be parsed as a valid key.</p>
<p>Properties</p>
<ul>
<li><code>keyName</code> – <code>filename</code> that was given to <code>parseKey</code></li>
<li><code>format</code> – the <code>format</code> that was trying to parse the key (see <code>parseKey</code>)</li>
<li><code>innerErr</code> – the inner Error thrown by the format parser</li>
</ul>

        <h3 id="KeyEncryptedError"   >
          <a href="#KeyEncryptedError" class="heading-link"><i class="fas fa-link"></i></a><a href="#KeyEncryptedError" class="headerlink" title="KeyEncryptedError"></a><code>KeyEncryptedError</code></h3>
      <p>The key is encrypted with a symmetric key (ie, it is password protected). The<br>parsing operation would succeed if it was given the <code>passphrase</code> option.</p>
<p>Properties</p>
<ul>
<li><code>keyName</code> – <code>filename</code> that was given to <code>parseKey</code></li>
<li><code>format</code> – the <code>format</code> that was trying to parse the key (currently can only<br>        be <code>&quot;pem&quot;</code>)</li>
</ul>

        <h3 id="CertificateParseError"   >
          <a href="#CertificateParseError" class="heading-link"><i class="fas fa-link"></i></a><a href="#CertificateParseError" class="headerlink" title="CertificateParseError"></a><code>CertificateParseError</code></h3>
      <p>The certificate data given could not be parsed as a valid certificate.</p>
<p>Properties</p>
<ul>
<li><code>certName</code> – <code>filename</code> that was given to <code>parseCertificate</code></li>
<li><code>format</code> – the <code>format</code> that was trying to parse the key<br>        (see <code>parseCertificate</code>)</li>
<li><code>innerErr</code> – the inner Error thrown by the format parser</li>
</ul>

        <h2 id="Friends-of-sshpk"   >
          <a href="#Friends-of-sshpk" class="heading-link"><i class="fas fa-link"></i></a><a href="#Friends-of-sshpk" class="headerlink" title="Friends of sshpk"></a>Friends of sshpk</h2>
      <ul>
<li><a target="_blank" rel="noopener" href="https://github.com/arekinath/node-sshpk-agent"><code>sshpk-agent</code></a> is a library<br>for speaking the <code>ssh-agent</code> protocol from node.js, which uses <code>sshpk</code></li>
</ul>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/source-map/CHANGELOG/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2017-04-18</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="Change-Log"   >
          <a href="#Change-Log" class="heading-link"><i class="fas fa-link"></i></a><a href="#Change-Log" class="headerlink" title="Change Log"></a>Change Log</h1>
      
        <h2 id="0-5-6"   >
          <a href="#0-5-6" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-5-6" class="headerlink" title="0.5.6"></a>0.5.6</h2>
      <ul>
<li>Fix for regression when people were using numbers as names in source maps. See<br>#236.</li>
</ul>

        <h2 id="0-5-5"   >
          <a href="#0-5-5" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-5-5" class="headerlink" title="0.5.5"></a>0.5.5</h2>
      <ul>
<li><p>Fix “regression” of unsupported, implementation behavior that half the world<br>happens to have come to depend on. See #235.</p>
</li>
<li><p>Fix regression involving function hoisting in SpiderMonkey. See #233.</p>
</li>
</ul>

        <h2 id="0-5-4"   >
          <a href="#0-5-4" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-5-4" class="headerlink" title="0.5.4"></a>0.5.4</h2>
      <ul>
<li>Large performance improvements to source-map serialization. See #228 and #229.</li>
</ul>

        <h2 id="0-5-3"   >
          <a href="#0-5-3" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-5-3" class="headerlink" title="0.5.3"></a>0.5.3</h2>
      <ul>
<li>Do not include unnecessary distribution files. See<br>commit ef7006f8d1647e0a83fdc60f04f5a7ca54886f86.</li>
</ul>

        <h2 id="0-5-2"   >
          <a href="#0-5-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-5-2" class="headerlink" title="0.5.2"></a>0.5.2</h2>
      <ul>
<li>Include browser distributions of the library in package.json’s <code>files</code>. See<br>issue #212.</li>
</ul>

        <h2 id="0-5-1"   >
          <a href="#0-5-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-5-1" class="headerlink" title="0.5.1"></a>0.5.1</h2>
      <ul>
<li>Fix latent bugs in IndexedSourceMapConsumer.prototype._parseMappings. See<br>ff05274becc9e6e1295ed60f3ea090d31d843379.</li>
</ul>

        <h2 id="0-5-0"   >
          <a href="#0-5-0" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-5-0" class="headerlink" title="0.5.0"></a>0.5.0</h2>
      <ul>
<li><p>Node 0.8 is no longer supported.</p>
</li>
<li><p>Use webpack instead of dryice for bundling.</p>
</li>
<li><p>Big speedups serializing source maps. See pull request #203.</p>
</li>
<li><p>Fix a bug with <code>SourceMapConsumer.prototype.sourceContentFor</code> and sources that<br>explicitly start with the source root. See issue #199.</p>
</li>
</ul>

        <h2 id="0-4-4"   >
          <a href="#0-4-4" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-4-4" class="headerlink" title="0.4.4"></a>0.4.4</h2>
      <ul>
<li><p>Fix an issue where using a <code>SourceMapGenerator</code> after having created a<br><code>SourceMapConsumer</code> from it via <code>SourceMapConsumer.fromSourceMap</code> failed. See<br>issue #191.</p>
</li>
<li><p>Fix an issue with where <code>SourceMapGenerator</code> would mistakenly consider<br>different mappings as duplicates of each other and avoid generating them. See<br>issue #192.</p>
</li>
</ul>

        <h2 id="0-4-3"   >
          <a href="#0-4-3" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-4-3" class="headerlink" title="0.4.3"></a>0.4.3</h2>
      <ul>
<li><p>A very large number of performance improvements, particularly when parsing<br>source maps. Collectively about 75% of time shaved off of the source map<br>parsing benchmark!</p>
</li>
<li><p>Fix a bug in <code>SourceMapConsumer.prototype.allGeneratedPositionsFor</code> and fuzzy<br>searching in the presence of a column option. See issue #177.</p>
</li>
<li><p>Fix a bug with joining a source and its source root when the source is above<br>the root. See issue #182.</p>
</li>
<li><p>Add the <code>SourceMapConsumer.prototype.hasContentsOfAllSources</code> method to<br>determine when all sources’ contents are inlined into the source map. See<br>issue #190.</p>
</li>
</ul>

        <h2 id="0-4-2"   >
          <a href="#0-4-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-4-2" class="headerlink" title="0.4.2"></a>0.4.2</h2>
      <ul>
<li><p>Add an <code>.npmignore</code> file so that the benchmarks aren’t pulled down by<br>dependent projects. Issue #169.</p>
</li>
<li><p>Add an optional <code>column</code> argument to<br><code>SourceMapConsumer.prototype.allGeneratedPositionsFor</code> and better handle lines<br>with no mappings. Issues #172 and #173.</p>
</li>
</ul>

        <h2 id="0-4-1"   >
          <a href="#0-4-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-4-1" class="headerlink" title="0.4.1"></a>0.4.1</h2>
      <ul>
<li>Fix accidentally defining a global variable. #170.</li>
</ul>

        <h2 id="0-4-0"   >
          <a href="#0-4-0" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-4-0" class="headerlink" title="0.4.0"></a>0.4.0</h2>
      <ul>
<li><p>The default direction for fuzzy searching was changed back to its original<br>direction. See #164.</p>
</li>
<li><p>There is now a <code>bias</code> option you can supply to <code>SourceMapConsumer</code> to control<br>the fuzzy searching direction. See #167.</p>
</li>
<li><p>About an 8% speed up in parsing source maps. See #159.</p>
</li>
<li><p>Added a benchmark for parsing and generating source maps.</p>
</li>
</ul>

        <h2 id="0-3-0"   >
          <a href="#0-3-0" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-3-0" class="headerlink" title="0.3.0"></a>0.3.0</h2>
      <ul>
<li><p>Change the default direction that searching for positions fuzzes when there is<br>not an exact match. See #154.</p>
</li>
<li><p>Support for environments using json2.js for JSON serialization. See #156.</p>
</li>
</ul>

        <h2 id="0-2-0"   >
          <a href="#0-2-0" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-2-0" class="headerlink" title="0.2.0"></a>0.2.0</h2>
      <ul>
<li>Support for consuming “indexed” source maps which do not have any remote<br>sections. See pull request #127. This introduces a minor backwards<br>incompatibility if you are monkey patching <code>SourceMapConsumer.prototype</code><br>methods.</li>
</ul>

        <h2 id="0-1-43"   >
          <a href="#0-1-43" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-43" class="headerlink" title="0.1.43"></a>0.1.43</h2>
      <ul>
<li>Performance improvements for <code>SourceMapGenerator</code> and <code>SourceNode</code>. See issue<br>#148 for some discussion and issues #150, #151, and #152 for implementations.</li>
</ul>

        <h2 id="0-1-42"   >
          <a href="#0-1-42" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-42" class="headerlink" title="0.1.42"></a>0.1.42</h2>
      <ul>
<li>Fix an issue where <code>SourceNode</code>s from different versions of the source-map<br>library couldn’t be used in conjunction with each other. See issue #142.</li>
</ul>

        <h2 id="0-1-41"   >
          <a href="#0-1-41" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-41" class="headerlink" title="0.1.41"></a>0.1.41</h2>
      <ul>
<li><p>Fix a bug with getting the source content of relative sources with a “.&#x2F;“<br>prefix. See issue #145 and <a href="bugzil.la/1090768">Bug 1090768</a>.</p>
</li>
<li><p>Add the <code>SourceMapConsumer.prototype.computeColumnSpans</code> method to compute the<br>column span of each mapping.</p>
</li>
<li><p>Add the <code>SourceMapConsumer.prototype.allGeneratedPositionsFor</code> method to find<br>all generated positions associated with a given original source and line.</p>
</li>
</ul>

        <h2 id="0-1-40"   >
          <a href="#0-1-40" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-40" class="headerlink" title="0.1.40"></a>0.1.40</h2>
      <ul>
<li>Performance improvements for parsing source maps in SourceMapConsumer.</li>
</ul>

        <h2 id="0-1-39"   >
          <a href="#0-1-39" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-39" class="headerlink" title="0.1.39"></a>0.1.39</h2>
      <ul>
<li>Fix a bug where setting a source’s contents to null before any source content<br>had been set before threw a TypeError. See issue #131.</li>
</ul>

        <h2 id="0-1-38"   >
          <a href="#0-1-38" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-38" class="headerlink" title="0.1.38"></a>0.1.38</h2>
      <ul>
<li>Fix a bug where finding relative paths from an empty path were creating<br>absolute paths. See issue #129.</li>
</ul>

        <h2 id="0-1-37"   >
          <a href="#0-1-37" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-37" class="headerlink" title="0.1.37"></a>0.1.37</h2>
      <ul>
<li>Fix a bug where if the source root was an empty string, relative source paths<br>would turn into absolute source paths. Issue #124.</li>
</ul>

        <h2 id="0-1-36"   >
          <a href="#0-1-36" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-36" class="headerlink" title="0.1.36"></a>0.1.36</h2>
      <ul>
<li>Allow the <code>names</code> mapping property to be an empty string. Issue #121.</li>
</ul>

        <h2 id="0-1-35"   >
          <a href="#0-1-35" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-35" class="headerlink" title="0.1.35"></a>0.1.35</h2>
      <ul>
<li><p>A third optional parameter was added to <code>SourceNode.fromStringWithSourceMap</code><br>to specify a path that relative sources in the second parameter should be<br>relative to. Issue #105.</p>
</li>
<li><p>If no file property is given to a <code>SourceMapGenerator</code>, then the resulting<br>source map will no longer have a <code>null</code> file property. The property will<br>simply not exist. Issue #104.</p>
</li>
<li><p>Fixed a bug where consecutive newlines were ignored in <code>SourceNode</code>s.<br>Issue #116.</p>
</li>
</ul>

        <h2 id="0-1-34"   >
          <a href="#0-1-34" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-34" class="headerlink" title="0.1.34"></a>0.1.34</h2>
      <ul>
<li><p>Make <code>SourceNode</code> work with windows style (“\r\n”) newlines. Issue #103.</p>
</li>
<li><p>Fix bug involving source contents and the<br><code>SourceMapGenerator.prototype.applySourceMap</code>. Issue #100.</p>
</li>
</ul>

        <h2 id="0-1-33"   >
          <a href="#0-1-33" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-33" class="headerlink" title="0.1.33"></a>0.1.33</h2>
      <ul>
<li><p>Fix some edge cases surrounding path joining and URL resolution.</p>
</li>
<li><p>Add a third parameter for relative path to<br><code>SourceMapGenerator.prototype.applySourceMap</code>.</p>
</li>
<li><p>Fix issues with mappings and EOLs.</p>
</li>
</ul>

        <h2 id="0-1-32"   >
          <a href="#0-1-32" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-32" class="headerlink" title="0.1.32"></a>0.1.32</h2>
      <ul>
<li><p>Fixed a bug where SourceMapConsumer couldn’t handle negative relative columns<br>(issue 92).</p>
</li>
<li><p>Fixed test runner to actually report number of failed tests as its process<br>exit code.</p>
</li>
<li><p>Fixed a typo when reporting bad mappings (issue 87).</p>
</li>
</ul>

        <h2 id="0-1-31"   >
          <a href="#0-1-31" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-31" class="headerlink" title="0.1.31"></a>0.1.31</h2>
      <ul>
<li><p>Delay parsing the mappings in SourceMapConsumer until queried for a source<br>location.</p>
</li>
<li><p>Support Sass source maps (which at the time of writing deviate from the spec<br>in small ways) in SourceMapConsumer.</p>
</li>
</ul>

        <h2 id="0-1-30"   >
          <a href="#0-1-30" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-30" class="headerlink" title="0.1.30"></a>0.1.30</h2>
      <ul>
<li><p>Do not join source root with a source, when the source is a data URI.</p>
</li>
<li><p>Extend the test runner to allow running single specific test files at a time.</p>
</li>
<li><p>Performance improvements in <code>SourceNode.prototype.walk</code> and<br><code>SourceMapConsumer.prototype.eachMapping</code>.</p>
</li>
<li><p>Source map browser builds will now work inside Workers.</p>
</li>
<li><p>Better error messages when attempting to add an invalid mapping to a<br><code>SourceMapGenerator</code>.</p>
</li>
</ul>

        <h2 id="0-1-29"   >
          <a href="#0-1-29" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-29" class="headerlink" title="0.1.29"></a>0.1.29</h2>
      <ul>
<li>Allow duplicate entries in the <code>names</code> and <code>sources</code> arrays of source maps<br>(usually from TypeScript) we are parsing. Fixes github issue 72.</li>
</ul>

        <h2 id="0-1-28"   >
          <a href="#0-1-28" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-28" class="headerlink" title="0.1.28"></a>0.1.28</h2>
      <ul>
<li>Skip duplicate mappings when creating source maps from SourceNode; github<br>issue 75.</li>
</ul>

        <h2 id="0-1-27"   >
          <a href="#0-1-27" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-27" class="headerlink" title="0.1.27"></a>0.1.27</h2>
      <ul>
<li>Don’t throw an error when the <code>file</code> property is missing in SourceMapConsumer,<br>we don’t use it anyway.</li>
</ul>

        <h2 id="0-1-26"   >
          <a href="#0-1-26" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-26" class="headerlink" title="0.1.26"></a>0.1.26</h2>
      <ul>
<li>Fix SourceNode.fromStringWithSourceMap for empty maps. Fixes github issue 70.</li>
</ul>

        <h2 id="0-1-25"   >
          <a href="#0-1-25" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-25" class="headerlink" title="0.1.25"></a>0.1.25</h2>
      <ul>
<li>Make compatible with browserify</li>
</ul>

        <h2 id="0-1-24"   >
          <a href="#0-1-24" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-24" class="headerlink" title="0.1.24"></a>0.1.24</h2>
      <ul>
<li>Fix issue with absolute paths and <code>file://</code> URIs. See<br><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://bugzilla.mozilla.org/show_bug.cgi?id=885597" >https://bugzilla.mozilla.org/show_bug.cgi?id=885597</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ul>

        <h2 id="0-1-23"   >
          <a href="#0-1-23" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-23" class="headerlink" title="0.1.23"></a>0.1.23</h2>
      <ul>
<li>Fix issue with absolute paths and sourcesContent, github issue 64.</li>
</ul>

        <h2 id="0-1-22"   >
          <a href="#0-1-22" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-22" class="headerlink" title="0.1.22"></a>0.1.22</h2>
      <ul>
<li>Ignore duplicate mappings in SourceMapGenerator. Fixes github issue 21.</li>
</ul>

        <h2 id="0-1-21"   >
          <a href="#0-1-21" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-21" class="headerlink" title="0.1.21"></a>0.1.21</h2>
      <ul>
<li>Fixed handling of sources that start with a slash so that they are relative to<br>the source root’s host.</li>
</ul>

        <h2 id="0-1-20"   >
          <a href="#0-1-20" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-20" class="headerlink" title="0.1.20"></a>0.1.20</h2>
      <ul>
<li>Fixed github issue #43: absolute URLs aren’t joined with the source root<br>anymore.</li>
</ul>

        <h2 id="0-1-19"   >
          <a href="#0-1-19" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-19" class="headerlink" title="0.1.19"></a>0.1.19</h2>
      <ul>
<li>Using Travis CI to run tests.</li>
</ul>

        <h2 id="0-1-18"   >
          <a href="#0-1-18" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-18" class="headerlink" title="0.1.18"></a>0.1.18</h2>
      <ul>
<li>Fixed a bug in the handling of sourceRoot.</li>
</ul>

        <h2 id="0-1-17"   >
          <a href="#0-1-17" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-17" class="headerlink" title="0.1.17"></a>0.1.17</h2>
      <ul>
<li>Added SourceNode.fromStringWithSourceMap.</li>
</ul>

        <h2 id="0-1-16"   >
          <a href="#0-1-16" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-16" class="headerlink" title="0.1.16"></a>0.1.16</h2>
      <ul>
<li><p>Added missing documentation.</p>
</li>
<li><p>Fixed the generating of empty mappings in SourceNode.</p>
</li>
</ul>

        <h2 id="0-1-15"   >
          <a href="#0-1-15" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-15" class="headerlink" title="0.1.15"></a>0.1.15</h2>
      <ul>
<li>Added SourceMapGenerator.applySourceMap.</li>
</ul>

        <h2 id="0-1-14"   >
          <a href="#0-1-14" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-14" class="headerlink" title="0.1.14"></a>0.1.14</h2>
      <ul>
<li>The sourceRoot is now handled consistently.</li>
</ul>

        <h2 id="0-1-13"   >
          <a href="#0-1-13" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-13" class="headerlink" title="0.1.13"></a>0.1.13</h2>
      <ul>
<li>Added SourceMapGenerator.fromSourceMap.</li>
</ul>

        <h2 id="0-1-12"   >
          <a href="#0-1-12" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-12" class="headerlink" title="0.1.12"></a>0.1.12</h2>
      <ul>
<li>SourceNode now generates empty mappings too.</li>
</ul>

        <h2 id="0-1-11"   >
          <a href="#0-1-11" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-11" class="headerlink" title="0.1.11"></a>0.1.11</h2>
      <ul>
<li>Added name support to SourceNode.</li>
</ul>

        <h2 id="0-1-10"   >
          <a href="#0-1-10" class="heading-link"><i class="fas fa-link"></i></a><a href="#0-1-10" class="headerlink" title="0.1.10"></a>0.1.10</h2>
      <ul>
<li>Added sourcesContent support to the customer and generator.</li>
</ul>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/03/24/02_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/01_%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-demo/node_modules/saxes/README/">[ Untitled ]</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2023-03-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">1985-10-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="saxes"   >
          <a href="#saxes" class="heading-link"><i class="fas fa-link"></i></a><a href="#saxes" class="headerlink" title="saxes"></a>saxes</h1>
      <p>A sax-style non-validating parser for XML.</p>
<p>Saxes is a fork of <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/isaacs/sax-js" >sax</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> 1.2.4. All mentions<br>of sax in this project’s documentation are references to sax 1.2.4.</p>
<p>Designed with <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://nodejs.org/" >node</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> in mind, but should work fine in the<br>browser or other CommonJS implementations.</p>
<p>Saxes does not support Node versions older than 10.</p>

        <h2 id="Notable-Differences-from-Sax"   >
          <a href="#Notable-Differences-from-Sax" class="heading-link"><i class="fas fa-link"></i></a><a href="#Notable-Differences-from-Sax" class="headerlink" title="Notable Differences from Sax."></a>Notable Differences from Sax.</h2>
      <ul>
<li><p>Saxes aims to be much stricter than sax with regards to XML<br>well-formedness. Sax, even in its so-called “strict mode”, is not strict. It<br>silently accepts structures that are not well-formed XML. Projects that need<br>better compliance with well-formedness constraints cannot use sax as-is.</p>
<p>Consequently, saxes does not support HTML, or pseudo-XML, or bad XML. Saxes<br>will report well-formedness errors in all these cases but it won’t try to<br>extract data from malformed documents like sax does.</p>
</li>
<li><p>Saxes is much much faster than sax, mostly because of a substantial redesign<br>of the internal parsing logic. The speed improvement is not merely due to<br>removing features that were supported by sax. That helped a bit, but saxes<br>adds some expensive checks in its aim for conformance with the XML<br>specification. Redesigning the parsing logic is what accounts for most of the<br>performance improvement.</p>
</li>
<li><p>Saxes does not aim to support antiquated platforms. We will not pollute the<br>source or the default build with support for antiquated platforms. If you want<br>support for IE 11, you are welcome to produce a PR that adds a <em>new build</em><br>transpiled to ES5.</p>
</li>
<li><p>Saxes handles errors differently from sax: it provides a default onerror<br>handler which throws. You can replace it with your own handler if you want. If<br>your handler does nothing, there is no <code>resume</code> method to call.</p>
</li>
<li><p>There’s no <code>Stream</code> API. A revamped API may be introduced later. (It is still<br>a “streaming parser” in the general sense that you write a character stream to<br>it.)</p>
</li>
<li><p>Saxes does not have facilities for limiting the size the data chunks passed to<br>event handlers. See the FAQ entry for more details.</p>
</li>
</ul>

        <h2 id="Conformance"   >
          <a href="#Conformance" class="heading-link"><i class="fas fa-link"></i></a><a href="#Conformance" class="headerlink" title="Conformance"></a>Conformance</h2>
      <p>Saxes supports:</p>
<ul>
<li><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.w3.org/TR/2008/REC-xml-20081126/" >XML 1.0 fifth edition</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.w3.org/TR/2006/REC-xml11-20060816/" >XML 1.1 second edition</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.w3.org/TR/2009/REC-xml-names-20091208/" >Namespaces in XML 1.0 (Third Edition)</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</li>
<li><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.w3.org/TR/2006/REC-xml-names11-20060816/" >Namespaces in XML 1.1 (Second Edition)</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</li>
</ul>

        <h2 id="Limitations"   >
          <a href="#Limitations" class="heading-link"><i class="fas fa-link"></i></a><a href="#Limitations" class="headerlink" title="Limitations"></a>Limitations</h2>
      <p>This is a non-validating parser so it only verifies whether the document is<br>well-formed. We do aim to raise errors for all malformed constructs<br>encountered. However, this parser does not thorougly parse the contents of<br>DTDs. So most malformedness errors caused by errors <strong>in DTDs</strong> cannot be<br>reported.</p>

        <h2 id="Regarding-lt-DOCTYPE-and-lt-ENTITY"   >
          <a href="#Regarding-lt-DOCTYPE-and-lt-ENTITY" class="heading-link"><i class="fas fa-link"></i></a><a href="#Regarding-lt-DOCTYPE-and-lt-ENTITY" class="headerlink" title="Regarding &lt;!DOCTYPE and &lt;!ENTITY"></a>Regarding <code>&lt;!DOCTYPE</code> and <code>&lt;!ENTITY</code></h2>
      <p>The parser will handle the basic XML entities in text nodes and attribute<br>values: <code>&amp;amp; &amp;lt; &amp;gt; &amp;apos; &amp;quot;</code>. It’s possible to define additional<br>entities in XML by putting them in the DTD. This parser doesn’t do anything with<br>that. If you want to listen to the <code>doctype</code> event, and then fetch the<br>doctypes, and read the entities and add them to <code>parser.ENTITIES</code>, then be my<br>guest.</p>

        <h2 id="Documentation"   >
          <a href="#Documentation" class="heading-link"><i class="fas fa-link"></i></a><a href="#Documentation" class="headerlink" title="Documentation"></a>Documentation</h2>
      <p>The source code contains JSDOC comments. Use them. What follows is a brief<br>summary of what is available. The final authority is the source code.</p>
<p><strong>PAY CLOSE ATTENTION TO WHAT IS PUBLIC AND WHAT IS PRIVATE.</strong></p>
<p>The move to TypeScript makes it so that everything is now formally private,<br>protected, or public.</p>
<p>If you use anything not public, that’s at your own peril.</p>
<p>If there’s a mistake in the documentation, raise an issue. If you just assume,<br>you may assume incorrectly.</p>

        <h2 id="Summary-Usage-Information"   >
          <a href="#Summary-Usage-Information" class="heading-link"><i class="fas fa-link"></i></a><a href="#Summary-Usage-Information" class="headerlink" title="Summary Usage Information"></a>Summary Usage Information</h2>
      
        <h3 id="Example"   >
          <a href="#Example" class="heading-link"><i class="fas fa-link"></i></a><a href="#Example" class="headerlink" title="Example"></a>Example</h3>
      <figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> saxes = <span class="built_in">require</span>(<span class="string">&quot;./lib/saxes&quot;</span>),</span><br><span class="line">  parser = <span class="keyword">new</span> saxes.<span class="title class_">SaxesParser</span>();</span><br><span class="line"></span><br><span class="line">parser.<span class="title function_">on</span>(<span class="string">&quot;error&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="comment">// an error happened.</span></span><br><span class="line">&#125;);</span><br><span class="line">parser.<span class="title function_">on</span>(<span class="string">&quot;text&quot;</span>, <span class="keyword">function</span> (<span class="params">t</span>) &#123;</span><br><span class="line">  <span class="comment">// got some text.  t is the string of text.</span></span><br><span class="line">&#125;);</span><br><span class="line">parser.<span class="title function_">on</span>(<span class="string">&quot;opentag&quot;</span>, <span class="keyword">function</span> (<span class="params">node</span>) &#123;</span><br><span class="line">  <span class="comment">// opened a tag.  node has &quot;name&quot; and &quot;attributes&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line">parser.<span class="title function_">on</span>(<span class="string">&quot;end&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// parser stream is done, and ready to have more stuff written to it.</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">parser.<span class="title function_">write</span>(<span class="string">&#x27;&lt;xml&gt;Hello, &lt;who name=&quot;world&quot;&gt;world&lt;/who&gt;!&lt;/xml&gt;&#x27;</span>).<span class="title function_">close</span>();</span><br></pre></td></tr></table></div></figure>


        <h3 id="Constructor-Arguments"   >
          <a href="#Constructor-Arguments" class="heading-link"><i class="fas fa-link"></i></a><a href="#Constructor-Arguments" class="headerlink" title="Constructor Arguments"></a>Constructor Arguments</h3>
      <p>Settings supported:</p>
<ul>
<li><p><code>xmlns</code> - Boolean. If <code>true</code>, then namespaces are supported. Default<br>is <code>false</code>.</p>
</li>
<li><p><code>position</code> - Boolean. If <code>false</code>, then don’t track line&#x2F;col&#x2F;position. Unset is<br>treated as <code>true</code>. Default is unset. Currently, setting this to <code>false</code> only<br>results in a cosmetic change: the errors reported do not contain position<br>information. sax-js would literally turn off the position-computing logic if<br>this flag was set to false. The notion was that it would optimize<br>execution. In saxes at least it turns out that continually testing this flag<br>causes a cost that offsets the benefits of turning off this logic.</p>
</li>
<li><p><code>fileName</code> - String. Set a file name for error reporting. This is useful only<br>when tracking positions. You may leave it unset.</p>
</li>
<li><p><code>fragment</code> - Boolean. If <code>true</code>, parse the XML as an XML fragment. Default is<br><code>false</code>.</p>
</li>
<li><p><code>additionalNamespaces</code> - A plain object whose key, value pairs define<br> namespaces known before parsing the XML file. It is not legal to pass<br> bindings for the namespaces <code>&quot;xml&quot;</code> or <code>&quot;xmlns&quot;</code>.</p>
</li>
<li><p><code>defaultXMLVersion</code> - The default version of the XML specification to use if<br>the document contains no XML declaration. If the document does contain an XML<br>declaration, then this setting is ignored. Must be <code>&quot;1.0&quot;</code> or <code>&quot;1.1&quot;</code>. The<br>default is <code>&quot;1.0&quot;</code>.</p>
</li>
<li><p><code>forceXMLVersion</code> - Boolean. A flag indicating whether to force the XML<br>version used for parsing to the value of <code>defaultXMLVersion</code>. When this flag<br>is <code>true</code>, <code>defaultXMLVersion</code> must be specified. If unspecified, the<br>default value of this flag is <code>false</code>.</p>
<p>Example: suppose you are parsing a document that has an XML declaration<br>specifying XML version 1.1.</p>
<p>If you set <code>defaultXMLVersion</code> to <code>&quot;1.0&quot;</code> without setting<br><code>forceXMLVersion</code> then the XML declaration will override the value of<br><code>defaultXMLVersion</code> and the document will be parsed according to XML 1.1.</p>
<p>If you set <code>defaultXMLVersion</code> to <code>&quot;1.0&quot;</code> and set <code>forceXMLVersion</code> to<br><code>true</code>, then the XML declaration will be ignored and the document will be<br>parsed according to XML 1.0.</p>
</li>
</ul>

        <h3 id="Methods"   >
          <a href="#Methods" class="heading-link"><i class="fas fa-link"></i></a><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3>
      <p><code>write</code> - Write bytes onto the stream. You don’t have to pass the whole document<br>in one <code>write</code> call. You can read your source chunk by chunk and call <code>write</code><br>with each chunk.</p>
<p><code>close</code> - Close the stream. Once closed, no more data may be written until it is<br>done processing the buffer, which is signaled by the <code>end</code> event.</p>

        <h3 id="Properties"   >
          <a href="#Properties" class="heading-link"><i class="fas fa-link"></i></a><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3>
      <p>The parser has the following properties:</p>
<p><code>line</code>, <code>column</code>, <code>columnIndex</code>, <code>position</code> - Indications of the position in the<br>XML document where the parser currently is looking. The <code>columnIndex</code> property<br>counts columns as if indexing into a JavaScript string, whereas the <code>column</code><br>property counts Unicode characters.</p>
<p><code>closed</code> - Boolean indicating whether or not the parser can be written to.  If<br>it’s <code>true</code>, then wait for the <code>ready</code> event to write again.</p>
<p><code>opt</code> - Any options passed into the constructor.</p>
<p><code>xmlDecl</code> - The XML declaration for this document. It contains the fields<br><code>version</code>, <code>encoding</code> and <code>standalone</code>. They are all <code>undefined</code> before<br>encountering the XML declaration. If they are undefined after the XML<br>declaration, the corresponding value was not set by the declaration. There is no<br>event associated with the XML declaration. In a well-formed document, the XML<br>declaration may be preceded only by an optional BOM. So by the time any event<br>generated by the parser happens, the declaration has been processed if present<br>at all. Otherwise, you have a malformed document, and as stated above, you<br>cannot rely on the parser data!</p>

        <h3 id="Error-Handling"   >
          <a href="#Error-Handling" class="heading-link"><i class="fas fa-link"></i></a><a href="#Error-Handling" class="headerlink" title="Error Handling"></a>Error Handling</h3>
      <p>The parser continues to parse even upon encountering errors, and does its best<br>to continue reporting errors. You should heed all errors reported. After an<br>error, however, saxes may interpret your document incorrectly. For instance<br><code>&lt;foo a=bc=&quot;d&quot;/&gt;</code> is invalid XML. Did you mean to have <code>&lt;foo a=&quot;bc=d&quot;/&gt;</code> or<br><code>&lt;foo a=&quot;b&quot; c=&quot;d&quot;/&gt;</code> or some other variation?  For the sake of continuing to<br>provide errors, saxes will continue parsing the document, but the structure it<br>reports may be incorrect. It is only after the errors are fixed in the document<br>that saxes can provide a reliable interpretation of the document.</p>
<p>That leaves you with two rules of thumb when using saxes:</p>
<ul>
<li><p>Pay attention to the errors that saxes report. The default <code>onerror</code> handler<br>throws, so by default, you cannot miss errors.</p>
</li>
<li><p><strong>ONCE AN ERROR HAS BEEN ENCOUNTERED, STOP RELYING ON THE EVENT HANDLERS OTHER<br>THAN <code>onerror</code>.</strong> As explained above, when saxes runs into a well-formedness<br>problem, it makes a guess in order to continue reporting more errors. The guess<br>may be wrong.</p>
</li>
</ul>

        <h3 id="Events"   >
          <a href="#Events" class="heading-link"><i class="fas fa-link"></i></a><a href="#Events" class="headerlink" title="Events"></a>Events</h3>
      <p>To listen to an event, override <code>on&lt;eventname&gt;</code>. The list of supported events<br>are also in the exported <code>EVENTS</code> array.</p>
<p>See the JSDOC comments in the source code for a description of each supported<br>event.</p>

        <h3 id="Parsing-XML-Fragments"   >
          <a href="#Parsing-XML-Fragments" class="heading-link"><i class="fas fa-link"></i></a><a href="#Parsing-XML-Fragments" class="headerlink" title="Parsing XML Fragments"></a>Parsing XML Fragments</h3>
      <p>The XML specification does not define any method by which to parse XML<br>fragments. However, there are usage scenarios in which it is desirable to parse<br>fragments. In order to allow this, saxes provides three initialization options.</p>
<p>If you pass the option <code>fragment: true</code> to the parser constructor, the parser<br>will expect an XML fragment. It essentially starts with a parsing state<br>equivalent to the one it would be in if <code>parser.write(&quot;&lt;foo&quot;&gt;)</code> had been called<br>right after initialization. In other words, it expects content which is<br>acceptable inside an element. This also turns off well-formedness checks that<br>are inappropriate when parsing a fragment.</p>
<p>The option <code>additionalNamespaces</code> allows you to define additional prefix-to-URI<br>bindings known before parsing starts. You would use this over <code>resolvePrefix</code> if<br>you have at the ready a series of namespaces bindings to use.</p>
<p>The option <code>resolvePrefix</code> allows you to pass a function which saxes will use if<br>it is unable to resolve a namespace prefix by itself. You would use this over<br><code>additionalNamespaces</code> in a context where getting a complete list of defined<br>namespaces is onerous.</p>
<p>Note that you can use <code>additionalNamespaces</code> and <code>resolvePrefix</code> together if you<br>want. <code>additionalNamespaces</code> applies before <code>resolvePrefix</code>.</p>
<p>The options <code>additionalNamespaces</code> and <code>resolvePrefix</code> are really meant to be<br>used for parsing fragments. However, saxes won’t prevent you from using them<br>with <code>fragment: false</code>. Note that if you do this, your document may parse<br>without errors and yet be malformed because the document can refer to namespaces<br>which are not defined <em>in</em> the document.</p>
<p>Of course, <code>additionalNamespaces</code> and <code>resolvePrefix</code> are used only if <code>xmlns</code><br>is <code>true</code>. If you are parsing a fragment that does not use namespaces, there’s<br>no point in setting these options.</p>

        <h3 id="Performance-Tips"   >
          <a href="#Performance-Tips" class="heading-link"><i class="fas fa-link"></i></a><a href="#Performance-Tips" class="headerlink" title="Performance Tips"></a>Performance Tips</h3>
      <ul>
<li><p>saxes works faster on files that use newlines (<code>\u000A</code>) as end of line<br>markers than files that use other end of line markers (like <code>\r</code> or<br><code>\r\n</code>). The XML specification requires that conformant applications behave<br>as if all characters that are to be treated as end of line characters are<br>converted to <code>\u000A</code> prior to parsing. The optimal code path for saxes is a<br>file in which all end of line characters are already <code>\u000A</code>.</p>
</li>
<li><p>Don’t split Unicode strings you feed to saxes across surrogates. When you<br>naively split a string in JavaScript, you run the risk of splitting a Unicode<br>character into two surrogates. e.g.  In the following example <code>a</code> and <code>b</code><br>each contain half of a single Unicode character: <code>const a = &quot;\u&#123;1F4A9&#125;&quot;[0]; const b = &quot;\u&#123;1F4A9&#125;&quot;[1]</code> If you feed such split surrogates to versions of<br>saxes prior to 4, you’d get errors. Saxes version 4 and over are able to<br>detect when a chunk of data ends with a surrogate and carry over the surrogate<br>to the next chunk. However this operation entails slicing and concatenating<br>strings. If you can feed your data in a way that does not split surrogates,<br>you should do it. (Obviously, feeding all the data at once with a single write<br>is fastest.)</p>
</li>
<li><p>Don’t set event handlers you don’t need. Saxes has always aimed to avoid doing<br>work that will just be tossed away but future improvements hope to do this<br>more aggressively. One way saxes knows whether or not some data is needed is<br>by checking whether a handler has been set for a specific event.</p>
</li>
</ul>

        <h2 id="FAQ"   >
          <a href="#FAQ" class="heading-link"><i class="fas fa-link"></i></a><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2>
      <p>Q. Why has saxes dropped support for limiting the size of data chunks passed to<br>event handlers?</p>
<p>A. With sax you could set <code>MAX_BUFFER_LENGTH</code> to cause the parser to limit the<br>size of data chunks passed to event handlers. So if you ran into a span of text<br>above the limit, multiple <code>text</code> events with smaller data chunks were fired<br>instead of a single event with a large chunk.</p>
<p>However, that functionality had some problematic characteristics. It had an<br>arbitrary default value. It was library-wide so all parsers created from a<br>single instance of the <code>sax</code> library shared it. This could potentially cause<br>conflicts among libraries running in the same VM but using sax for different<br>purposes.</p>
<p>These issues could have been easily fixed, but there were larger issues. The<br>buffer limit arbitrarily applied to some events but not others. It would split<br><code>text</code>, <code>cdata</code> and <code>script</code> events. However, if a <code>comment</code>,<br><code>doctype</code>, <code>attribute</code> or <code>processing instruction</code> were more than the<br>limit, the parser would generate an error and you were left picking up the<br>pieces.</p>
<p>It was not intuitive to use. You’d think setting the limit to 1K would prevent<br>chunks bigger than 1K to be passed to event handlers. But that was not the<br>case. A comment in the source code told you that you might go over the limit if<br>you passed large chunks to <code>write</code>. So if you want a 1K limit, don’t pass 64K<br>chunks to <code>write</code>. Fair enough. You know what limit you want so you can<br>control the size of the data you pass to <code>write</code>. So you limit the chunks to<br><code>write</code> to 1K at a time. Even if you do this, your event handlers may get data<br>chunks that are 2K in size. Suppose on the previous <code>write</code> the parser has<br>just finished processing an open tag, so it is ready for text. Your <code>write</code><br>passes 1K of text. You are not above the limit yet, so no event is generated<br>yet. The next <code>write</code> passes another 1K of text. It so happens that sax checks<br>buffer limits only once per <code>write</code>, after the chunk of data has been<br>processed. Now you’ve hit the limit and you get a <code>text</code> event with 2K of<br>data. So even if you limit your <code>write</code> calls to the buffer limit you’ve set,<br>you may still get events with chunks at twice the buffer size limit you’ve<br>specified.</p>
<p>We may consider reinstating an equivalent functionality, provided that it<br>addresses the issues above and does not cause a huge performance drop for<br>use-case scenarios that don’t need it.</p>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><a class="extend prev" rel="prev" href="/page/3/"><i class="fas fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/5/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/cat.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">Hello Stun</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">144</div><div class="sidebar-ov-state-item__name">Archives</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2023</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>汪汪队</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v6.3.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.8.0</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.8.0"></script><script src="/js/stun-boot.js?v=2.8.0"></script><script src="/js/scroll.js?v=2.8.0"></script><script src="/js/header.js?v=2.8.0"></script><script src="/js/sidebar.js?v=2.8.0"></script></body></html>